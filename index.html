<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Immersive Audio Container</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in § N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *     -> ins/del.c### for candidate and proposed changes (amendments)
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *   - .correction for "candidate corrections"       (div, aside, details, section)
 *   - .addition   for "candidate additions"         (div, aside, details, section)
 *   - .correction.proposed for "proposed corrections" (div, aside, details, section)
 *   - .addition.proposed   for "proposed additions"   (div, aside, details, section)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Outdated warning for old specs
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/* color variables included separately for reliability */

/******************************************************************************/
/*                                    Body                                    */
/******************************************************************************/

	html {
	}

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;			  /* limit line length to 50em for readability   */
		margin: 0 auto;				/* center text within page                    */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag    */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		color: black;
		color: var(--text);
		background: white top left fixed no-repeat;
		background: var(--bg) top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em; }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border: solid var(--logo-bg);
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		background: var(--logo-bg);
		color: white;
		color: var(--logo-text);
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		background: var(--logo-active-bg);
		border-color: #c00;
		border-color: var(--logo-active-bg);
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small; }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 3;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;

			color: #707070;
			color: var(--tocnav-normal-text);
			background: white;
			background: var(--tocnav-normal-bg);
		}
		#toc-nav > a:hover,
		#toc-nav > a:focus {
			color: black;
			color: var(--tocnav-hover-text);
			background: #f8f8f8;
			background: var(--tocnav-hover-bg);
		}
		#toc-nav > a:active {
			color: #c00;
			color: var(--tocnav-active-text);
			background: white;
			background: var(--tocnav-active-bg);
		}

		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;	/* Inherit the font family. */
		line-height: 1.2;		/* Keep wrapped headings compact */
		hyphens: manual;		/* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		color: var(--heading-text);
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#profile-and-date {
		/* #profile-and-date is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > :not(.head) + hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		color: black;
		color: var(--hr-text);
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	border-left: 0.5em solid #DEF;
	border-left: 0.5em solid var(--algo-border);
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	 padding: .5em;
	 border: thin solid #ddd;
	 border: thin solid var(--algo-border);
	 border-radius: .5em;
	 margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	 margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	 margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	margin-left: -2em;
	}
	dl.switch {
	padding-left: 2em;
	}
	dl.switch > dt {
	text-indent: -1.5em;
	margin-top: 1em;
	}
	dl.switch > dt + dt {
	margin-top: 0;
	}
	dl.switch > dt::before {
	content: '\21AA';
	padding: 0 0.5em 0 0;
	display: inline-block;
	width: 1em;
	text-align: right;
	line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: inherit;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del {
		color: #aa0000;
		color: var(--del-text);
		background: transparent;
		background: var(--del-bg);
		text-decoration: line-through;
	}
	ins {
		color: #006100;
		color: var(--ins-text);
		background: transparent;
		background: var(--ins-bg);
		text-decoration: underline;
	}

	/* for amendments (candidate/proposed changes) */

	.amendment ins, .correction ins, .addition ins,
	ins[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment del, .correction del, .addition del,
	del[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment.proposed ins, .correction.proposed ins, .addition.proposed ins,
	ins[class^=c].proposed {
		text-decoration-style: double;
	}
	.amendment.proposed del, .correction.proposed del, .addition.proposed del,
	del[class^=c].proposed {
		text-decoration-style: double;
	}

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		hyphens: none;
		text-transform: none;
		text-align: left;
		text-align: start;
		font-variant: normal;
		orphans: 3;
		widows: 3;
		page-break-before: avoid;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

	/* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		color: var(--a-normal-text);
		text-decoration: underline #707070;
		text-decoration: underline var(--a-normal-underline);
		text-decoration-skip-ink: none;
	}
	a:visited {
		color: #034575;
		color: var(--a-visited-text);
		text-decoration-color: #bbb;
		text-decoration-color: var(--a-visited-underline);
	}

	/* Indicate interaction with the link */
	a[href]:focus,
	a[href]:hover {
		text-decoration-thickness: 2px;
	}
	a[href]:active {
		color: #c00;
		color: var(--a-active-text);
		text-decoration-color: #c00;
		text-decoration-color: var(--a-active-underline);
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	img, svg {
		/* Intentionally not color-scheme aware. */
		background: white;
	}

	/* For autogen numbers, add
	  .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,	.sidefigure img,	figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
		height: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em;
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em; }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote,
	.amendment, .correction, .addition {
		margin: 1em auto;
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	blockquote > :first-child,
	.note  > p:first-child,
	.issue > p:first-child,
	.amendment > p:first-child,
	.correction > p:first-child,
	.addition > p:first-child {
		margin-top: 0;
	}
	blockquote > :last-child,
	.note  > p:last-child,
	.issue > p:last-child,
	.amendment > p:last-child,
	.correction > p:last-child,
	.addition > p:last-child {
		margin-bottom: 0;
	}


	.issue::before, .issue > .marker,
	.example::before, .example > .marker,
	.note::before, .note > .marker,
	details.note > summary > .marker,
	.amendment::before, .amendment > .marker,
	details.amendment > summary > .marker,
	.addition::before, .addition > .marker,
	addition.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	correction.amendment > summary > .marker
	{
		text-transform: uppercase;
		padding-right: 1em;
	}

	.example::before, .example > .marker {
		display: block;
		padding-right: 0em;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
		border-color: var(--blockquote-border);
		background: transparent;
		background: var(--blockquote-bg);
		color: currentcolor;
		color: var(--blockquote-text);
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #e05252;
		border-color: var(--issue-border);
		background: #fbe9e9;
		background: var(--issue-bg);
		color: black;
		color: var(--issue-text);
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		color: #831616;
		color: var(--issueheading-text);
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	  or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #e0cb52;
		border-color: var(--example-border);
		background: #fcfaee;
		background: var(--example-bg);
		color: black;
		color: var(--example-text);
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		color: #574b0f;
		color: var(--exampleheading-text);
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	  or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52e052;
		border-color: var(--note-border);
		background: #e9fbe9;
		background: var(--note-bg);
		color: black;
		color: var(--note-text);
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary {
		color: hsl(120, 70%, 30%);
		color: var(--noteheading-text);
	}
	/* Add .note::before { content: "Note "; } for autogen label,
	  or use class="marker" to mark up the label in source. */

	details.note[open] > summary {
		border-bottom: 1px silver solid;
		border-bottom: 1px var(--notesummary-underline) solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		border-color: var(--assertion-border);
		background: #EEE;
		background: var(--assertion-bg);
		color: black;
		color: var(--assertion-text);
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-color: var(--advisement-border);
		border-style: none solid;
		background: #fec;
		background: var(--advisement-bg);
		color: black;
		color: var(--advisement-text);
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement::before, .advisement > .marker {
		color: #b35f00;
		color: var(--advisementheading-text);
	}

/** Amendment Box *************************************************************/

	.amendment, .correction, .addition {
		border-color: #330099;
		border-color: var(--amendment-border);
		background: #F5F0FF;
		background: var(--amendment-bg);
		color: black;
		color: var(--amendment-text);
	}
	.amendment.proposed, .correction.proposed, .addition.proposed {
		border-style: solid;
		border-block-width: 0.25em;
	}
	.amendment::before, .amendment > .marker,
	details.amendment > summary::before, details.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	details.correction > summary::before, details.correction > summary > .marker,
	.addition::before, .addition > .marker,
	details.addition > summary::before, details.addition > summary > .marker {
		color: #220066;
		color: var(--amendmentheading-text);
	}
	.amendment.proposed::before, .amendment.proposed > .marker,
	details.amendment.proposed > summary::before, details.amendment.proposed > summary > .marker,
	.correction.proposed::before, .correction.proposed > .marker,
	details.correction.proposed > summary::before, details.correction.proposed > summary > .marker,
	.addition.proposed::before, .addition.proposed > .marker,
	details.addition.proposed > summary::before, details.addition.proposed > summary > .marker {
		font-weight: bold;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: hsla(40,100%,50%,0.95);
		background: var(--warning-bg);
		color: black;
		color: var(--warning-text);
		padding: .75em 1em;
		border: red;
		border: var(--warning-border);
		border-style: solid none;
		box-shadow: 0 2px 8px black;
		text-align: center;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 0;
		right: 0;
		bottom: 2em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #def;
		background: var(--def-bg);
		margin: 1.2em 0;
		border-left: 0.5em solid #8ccbf2;
		border-left: 0.5em solid var(--def-border);
		color: black;
		color: var(--def-text);
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
		border-bottom: 1px solid var(--defrow-border);
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def td.footnote {
		padding-top: 0.6em;
	}
	table.def td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		<table class="data"> highlights structural relationships in a table
		when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		Use class="complex data" for particularly complicated tables --
		(This will draw more lines: busier, but clearer.)

		Use class="long" on table cells with paragraph-like contents
		(This will adjust text alignment accordingly.)
		Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-color: var(--datacell-border);
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		border-top: 1px solid var(--datacell-border);
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		border: 1px solid var(--datacell-border);
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
		vertical-align: baseline;
		text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding: 0.1rem 1px 0;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Switch to using border-bottom for underlines */
		text-decoration: none;
		border-bottom: 1px solid;
		/* Reverse color scheme */
		color: black;
		color: var(--toclink-text);
		border-color: #3980b5;
		border-color: var(--toclink-underline);
	}
	.toc a:visited {
		color: black;
		color: var(--toclink-visited-text);
		border-color: #054572;
		border-color: var(--toclink-visited-underline);
	}
	.toc a:focus,
	.toc a:hover {
		background: rgba(75%, 75%, 75%, .25);
		background: var(--a-hover-bg);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
	}
	.toc {
		line-height: 1.1em;
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li			{ font-weight: bold;   }
	.toc > li li		 { font-weight: normal; }
	.toc > li li li	  { font-size:   95%;	}
	.toc > li li li li	{ font-size:   90%;	}
	.toc > li li li li li { font-size:   85%;	}

	/* @supports not (display:grid) { */
		.toc > li			{ margin: 1.5rem 0;	}
		.toc > li li		 { margin: 0.3rem 0;	}
		.toc > li li li	  { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}
		.toc > li li li li .secno { font-size: 85%; }
		.toc > li li li li li .secno { font-size: 100%; }

		.toc li {
			clear: both;
		}

		:not(li) > .toc			 { margin-left:  5rem; }
		.toc .secno				 { margin-left: -5rem; }
		.toc > li li li .secno	  { margin-left: -7rem; }
		.toc > li li li li .secno	{ margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc			 { margin-left:  4rem; }
			.toc .secno				 { margin-left: -4rem; }
			.toc > li li li			 { margin-left:  1rem; }
			.toc > li li li .secno	  { margin-left: -5rem; }
			.toc > li li li li .secno	{ margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
		/* Loosen it on wide screens */
		@media screen and (min-width: 78em) {
			body:not(.toc-inline) :not(li) > .toc			 { margin-left:  4rem; }
			body:not(.toc-inline) .toc .secno				 { margin-left: -4rem; }
			body:not(.toc-inline) .toc > li li li			 { margin-left:  1rem; }
			body:not(.toc-inline) .toc > li li li .secno	  { margin-left: -5rem; }
			body:not(.toc-inline) .toc > li li li li .secno	{ margin-left: -6rem; }
			body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	/* } */

	@supports (display:grid) and (display:contents) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			  comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
		}
		#toc .content:hover,
		#toc .content:focus {
			background: rgba(75%, 75%, 75%, .25);
			background: var(--a-hover-bg);
			border-bottom: 3px solid #054572;
			border-bottom: 3px solid var(--toclink-underline);
			margin-bottom: -3px;
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index	  { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li	{ margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em; }
	ul.index dl	{ margin-top: 0; }
	ul.index dt	{ margin: .2em 0 .2em 20px;}
	ul.index dd	{ margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li a + span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
			color: var(--indexinfo-text);
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		color: black;
		color: var(--indextable-hover-text);
		background: #f7f8f9;
		background: var(--indextable-hover-bg);
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/** Outdated warning **********************************************************/

.outdated-spec {
	color: black;
	color: var(--outdatedspec-text);
	background-color: rgba(0,0,0,0.5);
	background-color: var(--outdatedspec-bg);
}

.outdated-warning {
	position: fixed;
	bottom: 50%;
	left: 0;
	right: 0;
	margin: 0 auto;
	width: 50%;
	background: maroon;
	background: var(--outdated-bg);
	color: white;
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	position: absolute;
	top: 0;
	right:0;
	margin: 0;
	border: 0;
	padding: 0.25em 0.5em;
	background: transparent;
	color: white;
	color: var(--outdated-text);
	font:1em sans-serif;
	text-align:center;
}

.outdated-warning span {
	display: block;
}

.outdated-collapsed {
	bottom: 0;
	border-radius: 0;
	width: 100%;
	padding: 0;
}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}

		.outdated-warning {
			position: absolute;
			border-style: solid;
			border-color: red;
		}

		.outdated-warning input {
			display: none;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge {
		/* Magic to create good item positioning:
		  "content column" is 50ems wide at max; less on smaller screens.
		  Extra space (after ToC + content) is empty on the right.

		  1. When item < content column, centers item in column.
		  2. When content < item < available, left-aligns.
		  3. When item > available, fills available + scroll bar.
		*/
		display: grid;
		grid-template-columns: minmax(0, 50em);
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			* http://lea.verou.me/2012/04/background-attachment-local/
			*
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
						top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
						top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed version 44af0bf3e, updated Fri Jul 29 17:05:16 2022 -0700" name="generator">
  <link href="https://aomediacodec.github.io/iac/" rel="canonical">
  <meta content="6ece6ddbdd8b0f0fccde28d05c213d806ff1aa90" name="document-revision">
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-dfn-panel */

:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-issues */

a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.aomedia.org/" style="width: 200px"> <img alt="AOM" height="60" src="https://aomedia.org/assets/images/aomedia-logo-rgb.svg" width="200"> </a> </p>
   <h1 class="p-name no-ref" id="title">Immersive Audio Container</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="profile-and-date"><span class="content">AOM Working Group Draft, <time class="dt-updated" datetime="2022-07-26">26 July 2022</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://aomediacodec.github.io/iac/">https://aomediacodec.github.io/iac/</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/AOMediaCodec/iac/issues/">GitHub</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:hshee@samsung.com">SungHee Hwang</a> (<span class="p-org org">Samsung</span>)
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:flim@google.com">Felicia Lim</a> (<span class="p-org org">Google</span>)
    </dl>
   </div>
   <div data-fill-with="warning">
    <details class="annoying-warning" open>
     <summary>Warning</summary>
     <p>This specification is still at draft stage and should not be referenced other than as a working draft.</p>
    </details>
   </div>
   <p class="copyright" data-fill-with="copyright">
    <p>Copyright 2022, <a href="https://aomedia.org">AOM</a></p>
    <p>Licensing information is available at <a href="http://aomedia.org/license/">http://aomedia.org/license/</a></p>
    <p>The MATERIALS ARE PROVIDED “AS IS.” The Alliance for Open Media, its members, and its contributors expressly disclaim any warranties (express, implied, or otherwise), including implied warranties of merchantability, non-infringement, fitness for a particular purpose, or title, related to the materials. The entire risk as to implementing or otherwise using the materials is assumed by the implementer and user. IN NO EVENT WILL THE ALLIANCE FOR OPEN MEDIA, ITS MEMBERS, OR CONTRIBUTORS BE LIABLE TO ANY OTHER PARTY FOR LOST PROFITS OR ANY FORM OF INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES OF ANY CHARACTER FROM ANY CAUSES OF ACTION OF ANY KIND WITH RESPECT TO THIS DELIVERABLE OR ITS GOVERNING AGREEMENT, WHETHER BASED ON BREACH OF CONTRACT, TORT (INCLUDING NEGLIGENCE), OR OTHERWISE, AND WHETHER OR NOT THE OTHER MEMBER HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
   </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This document specifies the immersive audio (IA) bitstream format and the storage format for the IA bitstream in one single <a data-link-type="biblio" href="#biblio-isobmff">[ISOBMFF]</a> track.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li>
     <a href="#iabitstream-definition"><span class="secno">2</span> <span class="content">Immersive Audio Bitstream Definition</span></a>
     <ol class="toc">
      <li>
       <a href="#codec-specific"><span class="secno">2.1</span> <span class="content">Codec Specific</span></a>
       <ol class="toc">
        <li><a href="#iac-opus-specific"><span class="secno">2.1.1</span> <span class="content">IAC-OPUS Specific</span></a>
        <li><a href="#iac-aac-lc-specific"><span class="secno">2.1.2</span> <span class="content">IAC-AAC-LC Specific</span></a>
       </ol>
      <li>
       <a href="#obu-section"><span class="secno">2.2</span> <span class="content">OPEN Bitstream Unit (OBU) Syntax and Semantics</span></a>
       <ol class="toc">
        <li><a href="#obu-general"><span class="secno">2.2.1</span> <span class="content">General OBU Syntax and Semantics</span></a>
        <li><a href="#obu-header"><span class="secno">2.2.2</span> <span class="content">OBU Header Syntax and Semantics</span></a>
        <li><a href="#obu-bytealignment"><span class="secno">2.2.3</span> <span class="content">Byte Alignment Syntax and Semantics</span></a>
        <li><a href="#obu-reserved"><span class="secno">2.2.4</span> <span class="content">Reserved OBU Syntax and Semantics</span></a>
        <li><a href="#obu-iastreamindicator"><span class="secno">2.2.5</span> <span class="content">IA Stream Indicator OBU Syntax and Semantics</span></a>
        <li><a href="#obu-codec"><span class="secno">2.2.6</span> <span class="content">Codec Specific Info OBU Syntax and Semantics</span></a>
        <li><a href="#obu-iastaticmeta"><span class="secno">2.2.7</span> <span class="content">IA Static Meta OBU Syntax and Semantics</span></a>
        <li><a href="#obu-ambisonicslayerconfig"><span class="secno">2.2.8</span> <span class="content">Ambisonics Layer Config Syntax and Semantics</span></a>
        <li><a href="#obu-channelaudiolayerconfig"><span class="secno">2.2.9</span> <span class="content">Channel Audio Layer Config Syntax and Semantics</span></a>
        <li><a href="#obu-temporaldelimitor"><span class="secno">2.2.10</span> <span class="content">Temporal Delimitor OBU Syntax and Semantics</span></a>
        <li><a href="#obu-demixinginfo"><span class="secno">2.2.11</span> <span class="content">Demixing Info OBU Syntax and Semantics</span></a>
        <li><a href="#obu-recongaininfo"><span class="secno">2.2.12</span> <span class="content">Recon Gain Info OBU Syntax and Semantics</span></a>
        <li><a href="#obu-substream"><span class="secno">2.2.13</span> <span class="content">Substream OBU Syntax and Semantics</span></a>
       </ol>
     </ol>
    <li>
     <a href="#basic-encapsulation"><span class="secno">3</span> <span class="content">Basic Encapsulation Scheme</span></a>
     <ol class="toc">
      <li><a href="#brands"><span class="secno">3.1</span> <span class="content">General Requirements &amp; Brands</span></a>
      <li>
       <a href="#iasampleentry-section"><span class="secno">3.2</span> <span class="content">IA Sample Entry</span></a>
       <ol class="toc">
        <li><a href="#iasampleentry-definition"><span class="secno">3.2.1</span> <span class="content">Definition</span></a>
        <li><a href="#iasampleentry-description"><span class="secno">3.2.2</span> <span class="content">Description</span></a>
        <li><a href="#iasampleentry-syntax"><span class="secno">3.2.3</span> <span class="content">Syntax</span></a>
        <li><a href="#iasampleentry-semantics"><span class="secno">3.2.4</span> <span class="content">Semantics</span></a>
       </ol>
      <li>
       <a href="#codecspecificbox-section"><span class="secno">3.3</span> <span class="content">Codec Specific Box</span></a>
       <ol class="toc">
        <li>
         <a href="#codecspecificbox-opus"><span class="secno">3.3.1</span> <span class="content">OPUS Specific Box</span></a>
         <ol class="toc">
          <li><a href="#codecspecificbox-opus-definition"><span class="secno">3.3.1.1</span> <span class="content">Definition</span></a>
          <li><a href="#codecspecificbox-opus-description"><span class="secno">3.3.1.2</span> <span class="content">Description</span></a>
          <li><a href="#codecspecificbox-opus-syntax"><span class="secno">3.3.1.3</span> <span class="content">Syntax</span></a>
          <li><a href="#codecspecificbox-opus-semantics"><span class="secno">3.3.1.4</span> <span class="content">Semantics</span></a>
         </ol>
        <li>
         <a href="#codecspecificbox-mp4a"><span class="secno">3.3.2</span> <span class="content">MP4A Specific Box</span></a>
         <ol class="toc">
          <li><a href="#codecspecificbox-mp4a-definition"><span class="secno">3.3.2.1</span> <span class="content">Definition</span></a>
          <li><a href="#codecspecificbox-mp4a-description"><span class="secno">3.3.2.2</span> <span class="content">Description</span></a>
          <li><a href="#codecspecificbox-mp4a-syntax"><span class="secno">3.3.2.3</span> <span class="content">Syntax</span></a>
          <li><a href="#codecspecificbox-mp4a-semantics"><span class="secno">3.3.2.4</span> <span class="content">Semantics</span></a>
         </ol>
       </ol>
      <li><a href="#iasampleformat"><span class="secno">3.4</span> <span class="content">IA Sample Format</span></a>
      <li>
       <a href="#iasamplegroup"><span class="secno">3.5</span> <span class="content">IA Sample Group</span></a>
       <ol class="toc">
        <li><a href="#iasamplegroup-demixing"><span class="secno">3.5.1</span> <span class="content">Demixing Info Sample Group ## {#iasamplegroup-demixing}</span></a>
        <li><a href="#iasamplegroup-iastaticmeta"><span class="secno">3.5.2</span> <span class="content">IA Static Meta Sample Group ## {#iasamplegroup-iastaticmeta}</span></a>
       </ol>
      <li><a href="#CommonEncryption"><span class="secno">3.6</span> <span class="content">Common Encryption</span></a>
      <li><a href="#codecsparameter"><span class="secno">3.7</span> <span class="content">Codecs Parameter String</span></a>
     </ol>
    <li><a href="#iacdecapsulation"><span class="secno">4</span> <span class="content">IAC Decapsulation Process</span></a>
    <li>
     <a href="#iaencoding"><span class="secno">5</span> <span class="content">IA Encoding Process</span></a>
     <ol class="toc">
      <li><a href="#iaencoding-inputaudioformat"><span class="secno">5.1</span> <span class="content">Input Audio Format</span></a>
      <li>
       <a href="#iaencoding-iaencoder"><span class="secno">5.2</span> <span class="content">IA Encoder</span></a>
       <ol class="toc">
        <li><a href="#iaencoding-iaencoder-ambisonics"><span class="secno">5.2.1</span> <span class="content">IA Encoder for Ambisonics format</span></a>
        <li>
         <a href="#iaencoding-iaencoder-channelaudio"><span class="secno">5.2.2</span> <span class="content">IA Encoder for Channel Audio format</span></a>
         <ol class="toc">
          <li><a href="#iaencoding-iaencoder-channelaudio-downmixparameter"><span class="secno">5.2.2.1</span> <span class="content">Down-mix parameter and Loudness</span></a>
          <li><a href="#iaencoding-iaencoder-channelaudio-downmixmechanism"><span class="secno">5.2.2.2</span> <span class="content">Down-mix Mechanism</span></a>
          <li><a href="#iaencoding-iaencoder-channelaudio-channellayoutgenerationrule"><span class="secno">5.2.2.3</span> <span class="content">Channel Layout Generation Rule</span></a>
          <li><a href="#iaencoding-iaencoder-channelaudio-recongaingeneration"><span class="secno">5.2.2.4</span> <span class="content">Recon Gain Generation</span></a>
          <li><a href="#iaencoding-iaencoder-channelaudio-channelgroupgenerationrule"><span class="secno">5.2.2.5</span> <span class="content">ChannelGroup Generation Rule</span></a>
         </ol>
        <li><a href="#iaencoding-iaencoder-ambisoncis-channelaudio"><span class="secno">5.2.3</span> <span class="content">IA Encoder for Ambisonics and Channel Audio format</span></a>
       </ol>
     </ol>
    <li>
     <a href="#iadecoding"><span class="secno">6</span> <span class="content">IA Decoding Process</span></a>
     <ol class="toc">
      <li>
       <a href="#iadecoding-iadecoder"><span class="secno">6.1</span> <span class="content">IA Decoder</span></a>
       <ol class="toc">
        <li><a href="#iadecoding-iadecoder-ambisonics"><span class="secno">6.1.1</span> <span class="content">IA Decoder for Ambisonics decoding</span></a>
        <li>
         <a href="#iadecoding-iadecoder-channelaudio"><span class="secno">6.1.2</span> <span class="content">IA Decoder for Channel Audio decoding</span></a>
         <ol class="toc">
          <li><a href="#iadecoding-iadecoder-channelaudio-gain"><span class="secno">6.1.2.1</span> <span class="content">Gain</span></a>
          <li><a href="#iadecoding-iadecoder-channelaudio-demixer"><span class="secno">6.1.2.2</span> <span class="content">De-mixer</span></a>
          <li><a href="#iadecoding-iadecoder-channelaudio-recongain"><span class="secno">6.1.2.3</span> <span class="content">Recon Gain</span></a>
          <li><a href="#iadecoding-iadecoder-channelaudio-loudness"><span class="secno">6.1.2.4</span> <span class="content">Loudness Normalization</span></a>
          <li><a href="#iadecoding-iadecoder-channelaudio-drc"><span class="secno">6.1.2.5</span> <span class="content">DRC Control</span></a>
          <li><a href="#iadecoding-iadecoder-channelaudio-limiter"><span class="secno">6.1.2.6</span> <span class="content">Limiter</span></a>
         </ol>
        <li><a href="#iadecoding-iadecoder-ambisonics-channelaudio"><span class="secno">6.1.3</span> <span class="content">IA Decoder for Ambisonics and Channel Audio decoding</span></a>
       </ol>
      <li><a href="#iadecoding-downmixmatrix"><span class="secno">6.2</span> <span class="content">Down-mix Matrix (Static)</span></a>
     </ol>
    <li><a href="#conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="ia-bitstream">IA bitstream</dfn> is an codec-agnostic audio bitstream format to deliver three dimensional sound fields that can be used for multichannel sound playback and immersive experience and conceptually it consists of codec-dependent bitstream(s) and codec-agnostic metadata. And, it is designed to be able to reuse conventional encoding and decoding mechanisam as the codec-dependent bitstream consists of one or more coded streams. Where, each coded stream is an coded data for mono or stereo or more than 2 channels.</p>
   <p>Immersive audio container (<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="iac">IAC</dfn>) is the storage format for immersive audio (IA) bitstream in one single <a data-link-type="biblio" href="#biblio-isobmff">[ISOBMFF]</a> track.</p>
   <p>IAC is aimed to cover a wide range of applications for both surround sound and 3D audio, which is becoming more prevalent and accessible. These applications include internet audio streaming, multicasting/broadcasting services, file download, gaming, communication and extended-reality XR. The IAC format should help to provide an immersive 3D audio experience on a wide-range of devices from big screen to home entertainment, e.g. headsets, mobile phones, tablets, TVs, sound bars and home theater systems.</p>
   <p>Figure 1 shows an conceptual IAC architecture.</p>
   <center><img height="216" src="images/Conceptual IAC Architecture.png" width="800"></center>
   <center><b>Figure 1. </b>Conceptual IAC Architecture</center>
   <p>For a given 3D audio such as Ambisonics and/or multichannel audio,</p>
   <ul>
    <li data-md>
     <p>Pre-Processor generates Pre-Processed Audio and Codec Agnostic Metadata for immersive audio (IA).</p>
    <li data-md>
     <p>Audio Codec Enc generates Codec-Dependent Bitstream, which consists of the coded streams, coded from Pre-Processed Audio.</p>
    <li data-md>
     <p>File Packager generates IAC File by encapsulating IA bitstream, which consists of Codec-Dependent Bitstream and Codec Agnostic Metadata, into <a data-link-type="biblio" href="#biblio-isobmff">[ISOBMFF]</a> tracks.</p>
    <li data-md>
     <p>File Parser reconstructs IA bitstream by decapsulating IAC File.</p>
    <li data-md>
     <p>Audio Codec Dec outputs a decoded Pre-Processed Audio after decoding of Codec-Dependent Bitstream.</p>
    <li data-md>
     <p>Post-Processor outputs Immersive 3D Audio by using the decoded Pre-Processed Audio and Codec Agnostic Metadata.</p>
   </ul>
   <p>This specification is formulated as follows:</p>
   <ul>
    <li data-md>
     <p><a href="#introduction">§ 1 Introduction</a> describes a conceptual IAC architecture.</p>
    <li data-md>
     <p><a href="#iabitstream-definition">§ 2 Immersive Audio Bitstream Definition</a> specifies the definition of IA bitstream.</p>
    <li data-md>
     <p><a href="#basic-encapsulation">§ 3 Basic Encapsulation Scheme</a> specifies the way to encapsulate IA bitstream into <a data-link-type="biblio" href="#biblio-isobmff">[ISOBMFF]</a> tracks.</p>
    <li data-md>
     <p><a href="#iacdecapsulation">§ 4 IAC Decapsulation Process</a> provides a way to decapsulate IAC file back into IA bitstream.</p>
    <li data-md>
     <p><a href="#iaencoding">§ 5 IA Encoding Process</a> provides a guideline for Pre-Processor to generate Pre-Processed Audio and Codec Agnostic Metadata and IAC encoding model based on the conventional more or stereo encoding model.</p>
    <li data-md>
     <p><a href="#iadecoding">§ 6 IA Decoding Process</a> provides IAC decoding model based on the conventional more or stereo decoding model and a guideline for Post-Processor to generate Immersive 3D Audio.</p>
   </ul>
   <h2 class="heading settled" data-level="2" id="iabitstream-definition"><span class="secno">2. </span><span class="content">Immersive Audio Bitstream Definition</span><a class="self-link" href="#iabitstream-definition"></a></h2>
   <p>An immersive audio (IA) sequence is composed of a sequence of IA bitstreams.</p>
   <p>Each <a data-link-type="dfn" href="#ia-bitstream" id="ref-for-ia-bitstream">IA bitstream</a> is a self-decodable and composed of <a data-link-type="dfn" href="#non-timed-metadata" id="ref-for-non-timed-metadata">Non-timed Metadata</a> and followed by a sequence of <a data-link-type="dfn" href="#ia-frame" id="ref-for-ia-frame">IA Frames</a>, and the structure of the IA Frame is defined by the Non-timed Metadata:</p>
   <ul>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="non-timed-metadata" noexprot>Non-timed Metadata</dfn> is a common metadata which has been applied to all of following IA Frames. It is composed of Codec_Specific_Info and IA_Static_Meta.</p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="codec_specific_info" noexprot>Codec_Specific_Info</dfn> is a static metadata indicating a codec specific information which has been used to generate a Substream.</p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="ia_static_meta" noexprot>IA_Static_Meta</dfn> is a codec-agnostic and static metadata indicating the configuration of IA Frames.</p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="ia-frame" noexprot>IA Frame</dfn> is a frame format for immersive audio (IA). It is composed of Timed Metadata if present and followed by IA_Coded_Data.</p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="timed-metadata" noexprot>Timed Metadata</dfn> is a codec-agnostic and non-static metadata including frame variable informaiton. It is composed of Demixing_Info and Recon_Gain_Info.</p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="ia_coded_data" noexprot>IA_Coded_Data</dfn> is a coded data for IA Frame. It is composed of one or more ChannelGroups. Where, ChannelGroup is composed of one or more Substreams.</p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="channelgroup">ChannelGroup</dfn> is a set of Substreams which is able to provide a spatial resolution of audio contents by itself or which is able to provide an enhanced spatial resolution of audio contents by combining with the preceding ChannelGroups within the IA Frame.</p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="substream" noexprot>Substream</dfn> is a byte aligned raw coded stream for single channel or two channels.</p>
   </ul>
   <p>Figure 5 shows the configuration of IA bitstream (before packing <a data-link-type="dfn" href="#obu" id="ref-for-obu">OBUs</a>).</p>
   <center><img height="272" src="images/Configuration of IA Bitstream.png" width="800"></center>
   <center><b>Figure 5. </b>Configuration of IA Bitstream (before packing OBUs)</center>
   <p>For <a data-link-type="dfn" href="#iac" id="ref-for-iac">IAC</a>, each IA bitstream is packed by OBUs so that it is composed of a sequence of OBUs, Non-timed Metadata and followed by grouped into <a data-link-type="dfn" href="#temporal-unit" id="ref-for-temporal-unit">Temporal Units</a>. Where, each <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="temporal-unit">Temporal Unit</dfn> shall start Temproal_Delimitor_OBU and shall consist of OBUs for only one single IA_Frame. And, the order of Substreams in each Temporal Unit shall be maintained in the same order as in <a data-link-type="dfn" href="#ia_coded_data" id="ref-for-ia_coded_data">IA_Coded_Data</a>.</p>
   <p class="note" role="note"><span>NOTE:</span> IA_Stream_Indicator_OBU is only placed at the front of the first IA bitstream (i.e. at the front of IA sequence) to be feeded to OBU parsers.</p>
   <p>OBUs are made of a 1 byte header, identifying in particular the type of OBU, followed by an optional length field and by an optional payload, whose presence and content depend on the OBU type. Depending on its type, an OBU can carry Codec_Specific_Info, IA_Static_Meta, Demixing_Info, Recon_Gain_Info or Substream.</p>
   <p>Figure 6 shows a configuration of IA bitstream (after packing OBUs).</p>
   <center><img height="185" src="images/Configuration of IA Bitstream_OBU_Substream.png" width="800"></center>
   <center><b>Figure 6. </b>Configuration of IA Bitstream (after packing OBUs)</center>
   <p class="note" role="note"><span>NOTE:</span> All OBUs composing of IA bitstream except Codec_Specific_Info_OBU and Substream_OBU is codec-agnostic. OBU Syntax and OBU Semantics sections in this specification define its syntax and semantics for all information comprosing of IA bitstream except Codec_Specific_Info and Substream. Syntax and semantics for Codec_Specific_Info and Substream are defined by a given codec.</p>
   <h3 class="heading settled" data-level="2.1" id="codec-specific"><span class="secno">2.1. </span><span class="content">Codec Specific</span><a class="self-link" href="#codec-specific"></a></h3>
   <p>This section defines codec specific information for Codec_Specific_Info and Substream and random access point.</p>
   <ul>
    <li data-md>
     <p>Codec_Specific_Info is composed of <a data-link-type="dfn" href="#codec_id" id="ref-for-codec_id">Codec_ID</a> and <a data-link-type="dfn" href="#decoder_config" id="ref-for-decoder_config">Decoder_Config</a>. Codec_ID shall indicate the codec which has been used to generate Substreams within IA bitstream and Decder_Config shall indicate the decoding parameters which are applied to all of Substreams within IA bitstream.</p>
   </ul>
   <p>For legacy codecs, Decder_Config shall be exactly the same information as the conventional file parser feeds to the codec decoders for decoding of mono or stereo bitstream. For future codecs, Decder_Config shall include all of decoding parameters which are required to decode Substreams.</p>
   <ul>
    <li data-md>
     <p>Substream is a raw coded stream for mono or stereo channels. Substream format shall be exactly the same as the sample format (before packing OBU) for mono or stereo audio file which consists of only one single coded stream by the Codec_ID.</p>
   </ul>
   <p>In this version of the specification, <a data-link-type="dfn" href="#timed-metadata" id="ref-for-timed-metadata">Timed Metadata</a> of an IA_Frame has no decoding dependency with Timed Metadatas of the preceding IA_Frames. Therefore, every <a data-link-type="dfn" href="#temporal-unit" id="ref-for-temporal-unit①">Temporal Unit</a> is a random access point with following constraints as long as every frame of Substream by a given codec is a random access point:</p>
   <ul>
    <li data-md>
     <p>Prior to beginning to decode the Temporal Unit, IAC decoders need to be initialized with its relevant <a data-link-type="dfn" href="#non-timed-metadata" id="ref-for-non-timed-metadata①">Non-timed Metadata</a> (i.e. <a data-link-type="dfn" href="#codec_specific_info" id="ref-for-codec_specific_info">Codec_Specific_Info</a> and <a data-link-type="dfn" href="#ia_static_meta" id="ref-for-ia_static_meta">IA_Static_Meta</a> related to the Temporal Unit) which defines the following Temporal Units including the Temporal Unit.</p>
   </ul>
   <h4 class="heading settled" data-level="2.1.1" id="iac-opus-specific"><span class="secno">2.1.1. </span><span class="content">IAC-OPUS Specific</span><a class="self-link" href="#iac-opus-specific"></a></h4>
   <p><a data-link-type="dfn" href="#codec_specific_info" id="ref-for-codec_specific_info①">Codec_Specific_Info</a> for IAC-OPUS shall conform to <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc7845#" id="termref-for-">ID Header</a> with <a data-link-type="dfn" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-①">ChannelMappingFamily</a> = 0 of <a data-link-type="biblio" href="#biblio-rfc7845">[RFC7845]</a> with following constraints:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="https://tools.ietf.org/html/rfc8486#" id="termref-for-②">Channel Count</a> should be set to 2.</p>
    <li data-md>
     <p><a data-link-type="dfn" href="https://tools.ietf.org/html/rfc7845#" id="termref-for-③">Output Gain</a> shall not be used. In other words, it shall be set to 0dB.</p>
   </ul>
   <p>Substream format shall be <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6716#" id="termref-for-④">opus packet</a> of <a data-link-type="biblio" href="#biblio-rfc6716">[RFC6716]</a> which contains only one single frame of mono or stereo channels.</p>
   <p>As every frame of <a data-link-type="dfn" href="#substream" id="ref-for-substream">Substream</a> by IAC-OPUS is a random access point, every <a data-link-type="dfn" href="#temporal-unit" id="ref-for-temporal-unit②">Temporal Unit</a> for IAC-OPUS is a random access point.</p>
   <h4 class="heading settled" data-level="2.1.2" id="iac-aac-lc-specific"><span class="secno">2.1.2. </span><span class="content">IAC-AAC-LC Specific</span><a class="self-link" href="#iac-aac-lc-specific"></a></h4>
   <p><a data-link-type="dfn" href="#codec_id" id="ref-for-codec_id①">Codec_ID</a> shall be <a class="property css" data-link-type="property" href="https://www.iso.org/standard/79110.html#" id="termref-for-⑤">mp4a</a>.</p>
   <p><a data-link-type="dfn" href="#decoder_config" id="ref-for-decoder_config①">Decoder_Config</a> for IAC-AAC-LC shall be <a data-link-type="dfn" href="https://www.iso.org/standard/55688.html#" id="termref-for-⑥">DecoderConfigDescriptor()</a> of <a data-link-type="biblio" href="#biblio-mp4-systems">[MP4-Systems]</a>, which is a subset of <a data-link-type="dfn" href="https://www.iso.org/standard/79110.html#" id="termref-for-⑦">ESDBox</a> for <a data-link-type="biblio" href="#biblio-mp4-audio">[MP4-Audio]</a>, with following constraints:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="https://www.iso.org/standard/55688.html#" id="termref-for-⑧">objectTypeIndication</a> = 0x40</p>
    <li data-md>
     <p><a data-link-type="dfn" href="https://www.iso.org/standard/55688.html#" id="termref-for-⑨">streamType</a> = 0x05 (Audio Stream)</p>
    <li data-md>
     <p><a data-link-type="dfn" href="https://www.iso.org/standard/55688.html#" id="termref-for-①⓪">upstream</a> = 0</p>
    <li data-md>
     <p><a data-link-type="dfn" href="https://www.iso.org/standard/55688.html#" id="termref-for-①①">decSpecificInfo()</a>: The syntax and values shall conform to <a data-link-type="dfn" href="https://www.iso.org/standard/76383.html#" id="termref-for-①②">AudioSpecificConfig()</a> of <a data-link-type="biblio" href="#biblio-mp4-audio">[MP4-Audio]</a> with following constraints:</p>
     <ul>
      <li data-md>
       <p><a data-link-type="dfn" href="https://www.iso.org/standard/76383.html#" id="termref-for-①③">audioObjectType</a> = 2</p>
      <li data-md>
       <p><a data-link-type="dfn" href="https://www.iso.org/standard/76383.html#" id="termref-for-①④">channelConfiguration</a> should be set to 2.</p>
      <li data-md>
       <p><a data-link-type="dfn" href="https://www.iso.org/standard/76383.html#" id="termref-for-①⑤">GASpecificConfig()</a>: The syntax and values shall conform to <a data-link-type="dfn" href="https://www.iso.org/standard/76383.html#" id="termref-for-①⑥">GASpecificConfig()</a> of <a data-link-type="biblio" href="#biblio-mp4-audio">[MP4-Audio]</a> with following constraints:</p>
       <ul>
        <li data-md>
         <p><a data-link-type="dfn" href="https://www.iso.org/standard/76383.html#" id="termref-for-①⑦">frameLengthFlag</a> = 0 (1024 lines IMDCT)</p>
        <li data-md>
         <p><a data-link-type="dfn" href="https://www.iso.org/standard/76383.html#" id="termref-for-①⑧">dependsOnCoreCoder</a> = 0</p>
        <li data-md>
         <p><a data-link-type="dfn" href="https://www.iso.org/standard/76383.html#" id="termref-for-①⑨">extensionFlag</a> = 0</p>
       </ul>
     </ul>
   </ul>
   <p>Substream format shall be <a data-link-type="dfn" href="https://www.iso.org/standard/43345.html#" id="termref-for-②⓪">raw_data_block()</a> of <a data-link-type="biblio" href="#biblio-aac">[AAC]</a> which contains only one single frame of mono or stereo channels.</p>
   <p>As every frame of <a data-link-type="dfn" href="#substream" id="ref-for-substream①">Substream</a> by IAC-AAC-LC is a random access point, every <a data-link-type="dfn" href="#temporal-unit" id="ref-for-temporal-unit③">Temporal Unit</a> for IAC-AAC-LC is a random access point.</p>
   <h3 class="heading settled" data-level="2.2" id="obu-section"><span class="secno">2.2. </span><span class="content">OPEN Bitstream Unit (OBU) Syntax and Semantics</span><a class="self-link" href="#obu-section"></a></h3>
   <p>This section specifies the syntax elements and the meaning of the syntax elements read in the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="obu">OBU</dfn> syntax and semantics structures by assuming IAC decoder receives IA bitstream starting with IA Stream Indicator OBU as input. Where, IAC decoder consists of IAC-OBU parer, Substream decoders and Post-Processor.</p>
   <ul>
    <li data-md>
     <p>SeenIABitstream initially shall be set to 0.</p>
    <li data-md>
     <p>SeenIABitstream shall be set to 1 after receiving IA Stream Indicator OBU.</p>
    <li data-md>
     <p>If SeenIABitstream is set to 1, then following OBUs shall be given to the IAC decoder. Otherwise, the OBU will be dropped.</p>
   </ul>
   <p><dfn data-dfn-type="dfn" data-noexport id="drop_obu">drop_obu( )<a class="self-link" href="#drop_obu"></a></dfn> is a function call that indicates when IAC decoder should ignore an OBU because it is not assumed as IA bitstream.</p>
   <p>After SeenIABitstream sets to 1, IA bitstream shall be presented to IAC-OBU parser. After parsing Codec_Specific_Info_OBU and IA_Static_Meta_OBU, IAC-OBU parser prepares Substream decoders as many as the number of Substreams and reconstruts each coded stream, from Substream_OBUs, to be feeded to each Substream decoder. At the same time, IAC-OBU parser feeds IA_Static_Meta_OBU and Recon_Gain_Info_OBU to Post-Processor.</p>
   <center><img height="423" src="images/Hypothetical IAC Decoder Model.png" width="800"></center>
   <center><b>Figure 7. </b>Hypothetical IAC Decoder Model</center>
   <h4 class="heading settled" data-level="2.2.1" id="obu-general"><span class="secno">2.2.1. </span><span class="content">General OBU Syntax and Semantics</span><a class="self-link" href="#obu-general"></a></h4>
   <p><b>Syntax</b></p>
<pre>class obu_bitstream_unit(sz) {
  if (SeenIABitstream) {
    obu_header();
    if (obu_has_size_field)
      unsigned int (leb128()) obu_size;
    else
      obu_size = sz - 1;
    if (obu_type == 1)
      cpdec_specific_info();
    if (obu_type == 2)
      ia_static_meta();
    if (obu_type == 4)
      demixing_info();
    if (obu_type == 5)
      recon_gain_info();
    if (obu_type == 6)
      substream();
    byte_alignment():
  }
  else {
    obu_header();
    if (obu_type != 0)
      drop_obu();
    else
      ia_stream_indicator_obu();
  }
}
</pre>
   <p><b>Semantics</b></p>
   <p>When SeenIABitstream is set to 1, an ordered series of OBUs is presented to the decoding process. Each OBU is given to the decoding process as a string of bytes along with a variable sz that identifies the total number of bytes in the OBU.</p>
   <p>If the syntax element obu_has_size_field (in the OBU header) is equal to 1, then the variable sz will be unused and does not have to be provided.</p>
   <p><dfn data-dfn-type="dfn" data-noexport id="obu_size">obu_size<a class="self-link" href="#obu_size"></a></dfn> shall indicate the size in bytes of the OBU not including the bytes within obu_header or the obu_size syntax element.</p>
   <p>OBU data starts on the first (most significant) bit and ends on the last bit of the given bytes. The payload of an OBU lies between the first bit of the given bytes and the last bit before the first zero bit of byte alingment.</p>
   <h4 class="heading settled" data-level="2.2.2" id="obu-header"><span class="secno">2.2.2. </span><span class="content">OBU Header Syntax and Semantics</span><a class="self-link" href="#obu-header"></a></h4>
   <p><b>Syntax</b></p>
<pre>class obu_header() {
  unsigned int (1) obu_forbidden_bit;
  unsigned int (4) obu_type;
  unsigned int (1) obu_reserved_1bit;
  unsigned int (1) obu_has_size_field;
  unsigned int (1) obu_reserved_1bit;
}
</pre>
   <p><b>Semantics</b></p>
   <p>OBUs are structured with a header and a payload. The header identifies the type of the payload using the obu_type header parameter.</p>
   <p><dfn data-dfn-type="dfn" data-noexport id="obu_forbidden_bit">obu_forbidden_bit<a class="self-link" href="#obu_forbidden_bit"></a></dfn> shall be set to 0.</p>
   <p><dfn data-dfn-type="dfn" data-noexport id="obu_type">obu_type<a class="self-link" href="#obu_type"></a></dfn> shall specify the type of data structure contained in the OBU payload.</p>
<pre class="def">obu_type: Name of obu_type
   0    : OBU_IA_Stream_Indicator
   1    : OBU_Codec_Specific_Info
   2    : OBU_IA_Static_Meta
   3    : OBU_Temporal_Delimiter
   4    : OBU_Demixing_Info
   5    : OBU_Recon_Gain_Info
   6    : OBU_Substream
  7~15  : Reserved
</pre>
   <p>Reserved units are for future use and shall be ignored by IAC-OBU parser.</p>
   <p><dfn data-dfn-type="dfn" data-noexport id="obu_reserved_1bit">obu_reserved_1bit<a class="self-link" href="#obu_reserved_1bit"></a></dfn> shall be set to 0. The value is ignored by a IAC-OBU parser.</p>
   <p><dfn data-dfn-type="dfn" data-noexport id="obu_has_size_field">obu_has_size_field<a class="self-link" href="#obu_has_size_field"></a></dfn> equal to 1 indicates that the obu_size syntax element will be present. obu_has_size_field equal to 0 indicates tha the obu_size syntax element will not be present.</p>
   <h4 class="heading settled" data-level="2.2.3" id="obu-bytealignment"><span class="secno">2.2.3. </span><span class="content">Byte Alignment Syntax and Semantics</span><a class="self-link" href="#obu-bytealignment"></a></h4>
   <p><b>Syntax</b></p>
<pre>class byte_aligment() {
  while (get_position() &amp; 7)
    unsigned int (1) zero_bit;
}
</pre>
   <p><b>Semantics</b></p>
   <p><dfn data-dfn-type="dfn" data-noexport id="zero_bit">zero_bit<a class="self-link" href="#zero_bit"></a></dfn> shall be equal to 0 and is inserted into the bitstream to align the bit position to a multiple of 8 bits.</p>
   <h4 class="heading settled" data-level="2.2.4" id="obu-reserved"><span class="secno">2.2.4. </span><span class="content">Reserved OBU Syntax and Semantics</span><a class="self-link" href="#obu-reserved"></a></h4>
   <p>The reserved OBU allows the extension of this specification with additional OBU types in a way that allows older IAC-OBU parser to ignore them.</p>
   <h4 class="heading settled" data-level="2.2.5" id="obu-iastreamindicator"><span class="secno">2.2.5. </span><span class="content">IA Stream Indicator OBU Syntax and Semantics</span><a class="self-link" href="#obu-iastreamindicator"></a></h4>
   <p><b>Syntax</b></p>
<pre>class ia_stream_indicator_obu() {
  SeenIABitstream = 1;
}
</pre>
   <p class="note" role="note"><span>NOTE:</span> The IA Stream Indicator OBU has an empty payload.</p>
   <p><b>Semantics</b></p>
   <p><dfn data-dfn-type="dfn" data-noexport id="seeniabitstream">SeenIABitstream<a class="self-link" href="#seeniabitstream"></a></dfn> is to indicater whether a series of OBUs for IA bitstream will follow or not. It is initialized to zero.</p>
   <h4 class="heading settled" data-level="2.2.6" id="obu-codec"><span class="secno">2.2.6. </span><span class="content">Codec Specific Info OBU Syntax and Semantics</span><a class="self-link" href="#obu-codec"></a></h4>
   <p><b>Syntax</b></p>
<pre>class codec_specific_info_obu() {
  unsigned int (32) codec_id;
  decoder_config(codec_id);
}
</pre>
   <p><b>Semantics</b></p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="codec_id">codec_id</dfn> is a ‘four-character code’ (4CC) to identify the codec which has been used to generate Substream. It shall be the same as the <a data-link-type="dfn" href="https://www.iso.org/standard/68960.html#" id="termref-for-②①">boxtype</a> of its AduioSampleEntry if exist. It shall be <a class="property css" data-link-type="property" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-②②">opus</a> for IAC-OPUS and <a class="property css" data-link-type="property" href="https://www.iso.org/standard/79110.html#" id="termref-for-②③">mp4a</a> for IAC-AAC-LC.</p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="decoder_config">decoder_config</dfn> is a set of decoding parameters to decode Substream for a given codec_id. It shall be the set of decoding parameters which the conventional mono or stereo decoders need to decoder the Substream.</p>
   <p><dfn data-dfn-type="dfn" data-noexport id="codec_specific_info_obu">codec_specific_info_obu<a class="self-link" href="#codec_specific_info_obu"></a></dfn> for IAC-OPUS shall conform to <a data-link-type="dfn" href="#codec_specific_info" id="ref-for-codec_specific_info②">Codec_Specific_Info</a> of <a href="#iac-opus-specific">§ 2.1.1 IAC-OPUS Specific</a> and codec_specific_info for IAC-AAC-LC shall conform to <a data-link-type="dfn" href="#codec_specific_info" id="ref-for-codec_specific_info③">Codec_Specific_Info</a> of <a href="#iac-aac-lc-specific">§ 2.1.2 IAC-AAC-LC Specific</a>.</p>
   <h4 class="heading settled" data-level="2.2.7" id="obu-iastaticmeta"><span class="secno">2.2.7. </span><span class="content">IA Static Meta OBU Syntax and Semantics</span><a class="self-link" href="#obu-iastaticmeta"></a></h4>
   <p><b>Syntax</b></p>
<pre>class ia_static_meta_obu() {
  unsigned int (8) version;
  unsigned int (2) ambisonics_mode;
  unsigned int (3) channel_audio_layer;
  unsigned int (3) reserved;
  if (ambisonics_mode == 1 or 2)
    ambix_layer_config(ambisonics_mode);
  for (i=1; i&lt;= channel_audio_layer; i++)
    channel_audio_layer_config(i);
}
</pre>
   <p><b>Semantics</b></p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="version">version</dfn> shall indicate the version of IA bitstream. It shall be set to 0 for this version of the specification. Implementations should treat IA bitstream where the MSB four bits of the version number match that of a recognized specification as backwards compatible with that specification. That is, the version number can be split into "major" and "minor" version sub-fields, with changes to the minor sub-field (in the LSB four bits) signaling compatible changes. For example, an implementation of this specification should accept any stream with a version number of ’15’ or less, and should assume any stream with a version number ’16’ or
greater is incompatible.</p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="ambisonics_mode">ambisonics_mode</dfn> shall indicate if IA bitstream include Ambiosnics and which type if includes.</p>
   <ul>
    <li data-md>
     <p>0: IA bitstream includes no Ambisonics.</p>
    <li data-md>
     <p>1: The first ChannelGroup of each IA_Frame is for Ambisonics with Channel_Mapping</p>
    <li data-md>
     <p>2: The first ChannelGroup of each IA_Frame is for Ambisonics with Demixing_Matrix</p>
    <li data-md>
     <p>3: Reserved</p>
   </ul>
   <p class="note" role="note"><span>NOTE:</span> In the case of ambisonics_mode = 1 or 2, the channel audio if present is regarded as non-diegetic channels.</p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="channel_audio_layer">channel_audio_layer</dfn> shall indicate the number of ChannelGroups for channel audio in each IA_Frame. To indicate that IA bitstream includes no channel audio, it shall be set to zero. Its maximum number shall be limited to 6.</p>
   <h4 class="heading settled" data-level="2.2.8" id="obu-ambisonicslayerconfig"><span class="secno">2.2.8. </span><span class="content">Ambisonics Layer Config Syntax and Semantics</span><a class="self-link" href="#obu-ambisonicslayerconfig"></a></h4>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="ambix_layer_config">ambix_layer_config</dfn> contains information regarding the configuration of Ambiosnics ChannelGroup.</p>
   <p><b>Syntax</b></p>
<pre>class ambix_layer_config(mode) {
  unsigned int (8) output_channel_count (C);
  unsigned int (8) substream_count (N);
  unsigned int (8) coupled_substream_count (M);
  if (mode == 1)
    unsigned int (8*C) channel_mapping;
  else if (mode == 2)
    unsigned int (18*(N+M)*C) demixing_matrix;
}
</pre>
   <p><b>Semantics</b></p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="output_channel_count">output_channel_count</dfn> shall be the same as <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc8486#" id="termref-for-②④">channel count</a> in [[!RFC8486].</p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="substream_count">substream_count</dfn> shall indicate the number of Substreams composing of ChannelGroup.</p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="coupled_substream_count">coupled_substream_count</dfn> shall indicate the number of coupled Substreams among Substreams composing of ChannelGroup. Where, <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="coupled-substream">coupled Substream</dfn> is a coded Substream from one pair of <a data-link-type="dfn" href="#coupled-channels" id="ref-for-coupled-channels">coupled channels</a>.</p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="channel_mapping">channel_mapping</dfn> shall be the same as the one for <a data-link-type="dfn" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-②⑤">ChannelMappingFamily</a> = 2 in <a data-link-type="biblio" href="#biblio-rfc8486">[RFC8486]</a>.</p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="demixing_matrix">demixing_matrix</dfn> shall be the same as the one for <a data-link-type="dfn" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-②⑥">ChannelMappingFamily</a> = 3 in <a data-link-type="biblio" href="#biblio-rfc8486">[RFC8486]</a>.</p>
   <h4 class="heading settled" data-level="2.2.9" id="obu-channelaudiolayerconfig"><span class="secno">2.2.9. </span><span class="content">Channel Audio Layer Config Syntax and Semantics</span><a class="self-link" href="#obu-channelaudiolayerconfig"></a></h4>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="channel_audio_layer_config">channel_audio_layer_config</dfn> contains information regarding the configuration of ChannelGroup for channel audio.</p>
   <p><b>Syntax</b></p>
<pre>class channel_audio_layer_config(i) {
  unsigned int (4) loudspeaker_layout(i);
  unsigned int (1) output_gain_is_presetn_flag(i);
  unsigned int (1) recon_gain_is_presetn_flag(i);
  unsigned int (2) reserved;
  unsigned int (8) substream_count(i);
  unsigned int (8) coupled_substream_count(i);
  signed int (16) loudness(i);
  if (output_gain_is_presetn_flag(i) == 1) {
    unsigned int (6) output_gain_flag(i);
    unsigned int (2) reserved;
    signed int (16) output_gain(i);
  }
}
</pre>
   <p><b>Semantics</b></p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="loudspeaker_layout">loudspeaker_layout</dfn> shall indicate the channel layout for the channels to be reconstructed from the precedent ChannelGroups and the current ChannelGroup among ChannelGroups for channel audio in IA_Frame.</p>
   <p>In the current version of the specification, <a data-link-type="dfn" href="#loudspeaker_layout" id="ref-for-loudspeaker_layout">loudspeaker_layout</a> shall indicate one of 9 channel layouts including Mono, Stereo, 5.1ch, 5.1.2ch, 5.1.4ch, 7.1ch, 7.1.2ch, 7.1.4ch and 3.1.2ch. Where,</p>
   <ul>
    <li data-md>
     <p><dfn data-dfn-type="dfn" data-noexport id="stereo">Stereo<a class="self-link" href="#stereo"></a></dfn> is the loudspeaker configuration as depicted in <a data-link-type="dfn" href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#" id="termref-for-②⑦">Loudspeaker configuration for Sound System A (0+2+0)</a> of <a data-link-type="biblio" href="#biblio-itu2051-3">[ITU2051-3]</a>.</p>
    <li data-md>
     <p><dfn data-dfn-type="dfn" data-noexport id="51ch">5.1ch<a class="self-link" href="#51ch"></a></dfn> is the loudspeaker configuration as depicted in <a data-link-type="dfn" href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#" id="termref-for-②⑧">Loudspeaker configuration for Sound System B (0+5+0)</a> of <a data-link-type="biblio" href="#biblio-itu2051-3">[ITU2051-3]</a>.</p>
    <li data-md>
     <p><dfn data-dfn-type="dfn" data-noexport id="512ch">5.1.2ch<a class="self-link" href="#512ch"></a></dfn> is the loudspeaker configuration as depicted in <a data-link-type="dfn" href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#" id="termref-for-②⑨">Loudspeaker configuration for Sound System C (2+5+0)</a> of <a data-link-type="biblio" href="#biblio-itu2051-3">[ITU2051-3]</a>.</p>
    <li data-md>
     <p><dfn data-dfn-type="dfn" data-noexport id="514ch">5.1.4ch<a class="self-link" href="#514ch"></a></dfn> is the loudspeaker configuration as depicted in <a data-link-type="dfn" href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#" id="termref-for-③⓪">Loudspeaker configuration for Sound System D (4+5+0)</a> of <a data-link-type="biblio" href="#biblio-itu2051-3">[ITU2051-3]</a>.</p>
    <li data-md>
     <p><dfn data-dfn-type="dfn" data-noexport id="71ch">7.1ch<a class="self-link" href="#71ch"></a></dfn> is the loudspeaker configuration as depicted in <a data-link-type="dfn" href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#" id="termref-for-③①">Loudspeaker configuration for Sound System I (0+7+0)</a> of <a data-link-type="biblio" href="#biblio-itu2051-3">[ITU2051-3]</a>.</p>
    <li data-md>
     <p><dfn data-dfn-type="dfn" data-noexport id="712ch">7.1.2ch<a class="self-link" href="#712ch"></a></dfn> is the combination of the loudspeaker configuration as depicted in <a data-link-type="dfn" href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#" id="termref-for-③②">Loudspeaker configuration for Sound System I (0+7+0)</a> of <a data-link-type="biblio" href="#biblio-itu2051-3">[ITU2051-3]</a> and the left and right top front pair of the loudspeaker configuration as depicted in <a data-link-type="dfn" href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#" id="termref-for-③③">Loudspeaker configuration for Sound System J (4+7+0)</a> of <a data-link-type="biblio" href="#biblio-itu2051-3">[ITU2051-3]</a>.</p>
    <li data-md>
     <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="714ch">7.1.4ch</dfn> is the loudspeaker configuration as depicted in <a data-link-type="dfn" href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#" id="termref-for-③④">Loudspeaker configuration for Sound System J (4+7+0)</a> of <a data-link-type="biblio" href="#biblio-itu2051-3">[ITU2051-3]</a>.</p>
    <li data-md>
     <p><dfn data-dfn-type="dfn" data-noexport id="312ch">3.1.2ch<a class="self-link" href="#312ch"></a></dfn> is the front subset (L/C/R/Ltf/Rtf/LFE) of <a data-link-type="dfn" href="#714ch" id="ref-for-714ch">7.1.4ch</a>.</p>
   </ul>
<pre class="def">Loudspekaer Layout (4 bits) :  Channel Layout  : Loudspeaker Location Ordering
             0000           :       Mono       : C
             0001           :      Stereo      : L/R
             0010           :      5.1ch       : L/C/R/Ls/Rs/LFE
             0011           :     5.1.2ch      : L/C/R/Ls/Rs/Ltf/Rtf/LFE
             0100           :     5.1.4ch      : L/C/R/Ls/Rs/Ltf/Rtf/Ltr/Rtr/LFE
             0101           :      7.1ch       : L/C/R/Lss/Rss/Lrs/Rrs/LFE
             0110           :     7.1.2ch      : L/C/R/Lss/Rss/Lrs/Rrs/Ltf/Rtf/LFE
             0111           :     7.1.4ch      : L/C/R/Lss/Rss/Lrs/Rrs/Ltf/Rtf/Ltb/Rtb/LFE
             1000           :     3.1.2ch      : L/C/R//Ltf/Rtf/LFE
            others          :     reserved     : 
</pre>
<pre>Where, C: Center, L: Left, R: Right, Ls: Left Surround, Lss: Left Side Surround, Rs: Right Surround, Rss: Right Side Surround, Ltf: Left Top Front, Rtf: Right Top Front, Ltr: Left Top Rear, Rtr: Right Top Rear, Ltb: Left Top Back, Rtb: Right Top Back, LFE: Low-Frequency Effects
</pre>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="output_gain_is_present_flag">output_gain_is_present_flag</dfn> shall indicate if output_gain information fields for the ChannelGroup presents .</p>
   <ul>
    <li data-md>
     <p>0: No output_gain information fields for the ChannelGroup present.</p>
    <li data-md>
     <p>1: output_gain information fields for the ChannelGroup present. In this case, output_gain_flags and output_gain fields present.</p>
   </ul>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="recon_gain_is_present_flag">recon_gain_is_present_flag</dfn> shall indicate if recon_gain information fields for the ChannelGroup presents in Recon_Gain_Info_OBU .</p>
   <ul>
    <li data-md>
     <p>0: No recon_gain information fields for the ChannelGroup present in Recon_Gain_Info_OBU.</p>
    <li data-md>
     <p>1: recon_gain information fields for the ChannelGroup present in Recon_Gain_Info_OBU. In this case, recon_gain_flags and recon_gain fields present.</p>
   </ul>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="loudness">loudness</dfn> shall indicate the loudness value of the downmixed channels, for the channel layout which is indicated by loudspeaker_layout, from the original channel audio. It shall be stored in fixed-point value with 8 fractional bits (i.e. Q7.8 in <a data-link-type="biblio" href="#biblio-q-format">[Q-Format]</a>) and shall be <a data-link-type="dfn" href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.1770-4-201510-I!!PDF-E.pdf#" id="termref-for-③⑤">LKFS</a> based on <a data-link-type="biblio" href="#biblio-itu1770-4">[ITU1770-4]</a>, so it shall be to represent zero or negative value.</p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="output_gain_flags">output_gain_flags</dfn> shall indicate the channels which output_gian is applied to. If a bit set to 1, output_gain shall be applied to the channel. Otherwise, output_gain shall not be applied to the channel.</p>
<pre class="def">Bit position : Channel Name
    b5(MSB)  : Left channel (L1, L2, L3)
      b4     : Right channel (R2, R3)
      b3     : Left Surround channel (Ls5)
      b2     : Right Surround channel (Rs5)
      b1     : Left Top Front channel (Ltf)
      b0     : Rigth Top Front channel (Rtf)
      
</pre>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="output_gain">output_gain</dfn> shall indicate the gain value to be applied to the mixed channels which are indicated by output_gain_flags. It is 20*log10 of the factor by which to scale the mixed channels. It is stored in a 16-bit, signed, two’s complement fixed-point value with 8 fractional bits (i.e. Q7.8 in <a data-link-type="biblio" href="#biblio-q-format">[Q-Format]</a>). Where, each mixed channel is generated by downmixing two or more input channels.</p>
   <h4 class="heading settled" data-level="2.2.10" id="obu-temporaldelimitor"><span class="secno">2.2.10. </span><span class="content">Temporal Delimitor OBU Syntax and Semantics</span><a class="self-link" href="#obu-temporaldelimitor"></a></h4>
   <p><b>Syntax</b></p>
<pre>class temporal_delimiter_obu() {
}
</pre>
   <p class="note" role="note"><span>NOTE:</span> The temporal delimitor has an empty payload.</p>
   <p><b>Semantics</b></p>
   <p>It shall indicate the start of <a data-link-type="dfn" href="#temporal-unit" id="ref-for-temporal-unit④">Temporal Unit</a>.</p>
   <h4 class="heading settled" data-level="2.2.11" id="obu-demixinginfo"><span class="secno">2.2.11. </span><span class="content">Demixing Info OBU Syntax and Semantics</span><a class="self-link" href="#obu-demixinginfo"></a></h4>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="demixing_info">demixing_info</dfn> contains demixing parameter mode to be used to reconstruct demixed channels.</p>
   <p><b>Syntax</b></p>
<pre>class demixing_info_obu() {
  unsigned int (3) dmixp_mode;
  unsigned int (5) reserved;
}
</pre>
   <p><b>Semantics</b></p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="dmixp_mode">dmixp_mode</dfn> shall indicate a mode of pre-defined combinations of five demix parameters for the following IA_Coded_Data.</p>
   <ul>
    <li data-md>
     <p>0: mode1, (alpha, beta, gamma, delta, w_idx_offset) = (1, 1, 0.707, 0.707, -1)</p>
    <li data-md>
     <p>1: mode2, (alpha, beta, gamma, delta, w_idx_offset) = (0.707, 0.707, 0.707, 0.707, -1)</p>
    <li data-md>
     <p>2: mode3, (alpha, beta, gamma, delta, w_idx_offset) = (1, 0.866, 0.866, 0.866, -1)</p>
    <li data-md>
     <p>3: reserved</p>
    <li data-md>
     <p>4: mode1, (alpha, beta, gamma, delta, w_idx_offset) = (1, 1, 0.707, 0.707, 1)</p>
    <li data-md>
     <p>5: mode2, (alpha, beta, gamma, delta, w_idx_offset) = (0.707, 0.707, 0.707, 0.707, 1)</p>
    <li data-md>
     <p>6: mode3, (alpha, beta, gamma, delta, w_idx_offset) = (1, 0.866, 0.866, 0.866, 1)</p>
    <li data-md>
     <p>7: reserved</p>
   </ul>
   <p><dfn data-dfn-type="dfn" data-noexport id="alpha">alpha<a class="self-link" href="#alpha"></a></dfn> and <dfn data-dfn-type="dfn" data-noexport id="beta">beta<a class="self-link" href="#beta"></a></dfn> are gain values used for S7to5 down-mixer, <dfn data-dfn-type="dfn" data-noexport id="gamma">gamma<a class="self-link" href="#gamma"></a></dfn> for T4to2 down-mixer, <dfn data-dfn-type="dfn" data-noexport id="delta">delta<a class="self-link" href="#delta"></a></dfn> for S5to3 down-mixer and <dfn data-dfn-type="dfn" data-noexport id="w_idx_offset">w_idx_offset<a class="self-link" href="#w_idx_offset"></a></dfn> is the offset to generate a gain value <dfn data-dfn-type="dfn" data-noexport id="w">w<a class="self-link" href="#w"></a></dfn> used for T2toTF2 down-mixer.</p>
   <center><img height="388" src="images/IA Downmix Mechanism.png" width="800"></center>
   <center><b>Figure 8. </b>IA Downmix Mechanism</center>
   <h4 class="heading settled" data-level="2.2.12" id="obu-recongaininfo"><span class="secno">2.2.12. </span><span class="content">Recon Gain Info OBU Syntax and Semantics</span><a class="self-link" href="#obu-recongaininfo"></a></h4>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="recon_gain_info">recon_gain_info</dfn> contains recon gain values for demixed channels.</p>
   <p><b>Syntax</b></p>
<pre>class recon_gain_info_obu() {
  for (i=0; i&lt; channel_audio_layer; i++) {
    if (recon_gain_is_present_flag(i) == 1) {
      unsigned int(leb128()) recon_gain_flags(i);
      for (j=0; j&lt; n(i); j++) {
        if (recon_gain_flag(i)(j) == 1)
          unsigned int (8) recon_gain;
      }
    }
  }
}
</pre>
   <p><b>Semantics</b></p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="recon_gain_flags">recon_gain_flags</dfn> shall indicates the channels which recon_gain is applied to.</p>
   <left><img height="94" src="images/Recon_Gain_Flags.png" width="800"></left>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="recon_gain">recon_gain</dfn> shall indicates the gain value to be applied to the channel, which is indicated by <dfn data-dfn-type="dfn" data-noexport id="recon_gain_flalgs">recon_gain_flalgs<a class="self-link" href="#recon_gain_flalgs"></a></dfn>, after decoding of the following IA_Coded_Data.</p>
   <h4 class="heading settled" data-level="2.2.13" id="obu-substream"><span class="secno">2.2.13. </span><span class="content">Substream OBU Syntax and Semantics</span><a class="self-link" href="#obu-substream"></a></h4>
   <p><b>Syntax</b></p>
<pre>class substream_obu() {
  substream();
}
</pre>
   <p><b>Semantics</b></p>
   <p>Substream shall be an raw coded data for mono or stereo channels by using the codec which is indicated by codec_id field of Codec_Specific_Info_OBU. Substream format shall be <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6716#" id="termref-for-③⑥">opus packet</a> of <a data-link-type="biblio" href="#biblio-rfc6716">[RFC6716]</a> for IAC-OPUS and <a data-link-type="dfn" href="https://www.iso.org/standard/43345.html#" id="termref-for-③⑦">raw_data_block()</a> of <a data-link-type="biblio" href="#biblio-aac">[AAC]</a> for IAC-AAC-LC.</p>
   <p>There shall be ChannelGroups as many as channel_audio_layer if ambisonics_mode = 0. Otherwise, channel_audio_layer plus 1.
Each ChannelGroup shall have Substreams as many as <a data-link-type="dfn" href="#substream_count" id="ref-for-substream_count">substream_count</a>.</p>
   <h2 class="heading settled" data-level="3" id="basic-encapsulation"><span class="secno">3. </span><span class="content">Basic Encapsulation Scheme</span><a class="self-link" href="#basic-encapsulation"></a></h2>
   <p>This section describes the basic data structures used to signal encapsulation of IA bitstreams in <a data-link-type="biblio" href="#biblio-isobmff">[ISOBMFF]</a> containers.</p>
   <h3 class="heading settled" data-level="3.1" id="brands"><span class="secno">3.1. </span><span class="content">General Requirements &amp; Brands</span><a class="self-link" href="#brands"></a></h3>
   <p>A file conformant to this specification satisfies the following:</p>
   <ul>
    <li data-md>
     <p>It shall conform to the normative requirements of <a data-link-type="biblio" href="#biblio-isobmff">[ISOBMFF]</a></p>
    <li data-md>
     <p>It shall have the <dfn class="css" data-dfn-for="ISOBMFF Brand" data-dfn-type="value" data-export id="valdef-isobmff-brand-aiac">aiac<a class="self-link" href="#valdef-isobmff-brand-aiac"></a></dfn> brand among the compatible brands array of the FileTypeBox</p>
    <li data-md>
     <p>It shall contain at least one track using an <a data-link-type="dfn" href="#iasampleentry" id="ref-for-iasampleentry">IASampleEntry</a></p>
    <li data-md>
     <p>It SHOULD indicate a structural ISOBMFF brand among the compatible brands array of the FileTypeBox, such as <a class="property css" data-link-type="property" href="https://www.iso.org/standard/68960.html#" id="termref-for-③⑧">iso6</a></p>
    <li data-md>
     <p>It MAY indicate other brands not specified in this specification provided that the associated requirements do not conflict with those given in this specification</p>
   </ul>
   <p>Parsers shall support the structures required by the <code><a class="property css" data-link-type="property" href="https://www.iso.org/standard/68960.html#" id="termref-for-③⑨">iso6</a></code> brand and MAY support structures required by further ISOBMFF structural brands.</p>
   <p>During encapsulation process, OBUs of IA bistream are encapsulated into <a data-link-type="biblio" href="#biblio-isobmff">[ISOBMFF]</a> as follows:</p>
   <ul>
    <li data-md>
     <p>CodecSpecificBox, which is defined from Codec_Specific_Info in IA bitstream, shall be stored in sample entry.</p>
    <li data-md>
     <p>IA_Static_Meta (with OBU syntax) shall be stored as a new sample group having <a data-link-type="dfn" href="https://www.iso.org/standard/68960.html#" id="termref-for-④⓪">grouping_type</a>, <a data-link-type="dfn" href="#iasm" id="ref-for-iasm">iasm</a>.</p>
    <li data-md>
     <p>Some fields of IA_Static_Meta, related to MIME codecs parameter, shall be copied in sample entry.</p>
    <li data-md>
     <p>Temporal_Delimiter_OBUs shall be discarded from <a data-link-type="dfn" href="#temporal-unit" id="ref-for-temporal-unit⑤">Temporal Units</a>.</p>
    <li data-md>
     <p>Demixing_Info_OBUs (with OBU syntax) may be stored as a new sample group having <a data-link-type="dfn" href="https://www.iso.org/standard/68960.html#" id="termref-for-④①">grouping_type</a>, <a data-link-type="dfn" href="#admi" id="ref-for-admi">admi</a>.</p>
    <li data-md>
     <p>Remainded OBUs of <a data-link-type="dfn" href="#temporal-unit" id="ref-for-temporal-unit⑥">Temporal Units</a> shall be stored as sample data without gap among OBUs.</p>
   </ul>
   <h3 class="heading settled" data-level="3.2" id="iasampleentry-section"><span class="secno">3.2. </span><span class="content">IA Sample Entry</span><a class="self-link" href="#iasampleentry-section"></a></h3>
   <p class="note" role="note"><span>NOTE:</span> As discussed, we have an agreement to specify that only codec specific info is stored (no loop, no override). We might reconsider if new use cases are brought forward.
NOTE: We agree that all Opus (or AAC-LC) substreams must be encoded in a way that produces the same codec specific info.
NOTE: We agree that ChannelMappingFamily is always 0, and that OutputChannelCount is always 2. OutputChannelCount can be ignored because the real value can be determined from the IAC static metadata and from the Opus Packet headers.</p>
   <h4 class="heading settled" data-level="3.2.1" id="iasampleentry-definition"><span class="secno">3.2.1. </span><span class="content">Definition</span><a class="self-link" href="#iasampleentry-definition"></a></h4>
<pre class="def">Sample Entry Type: <dfn data-dfn-for="IASampleEntry" data-dfn-type="value" data-export id="valdef-iasampleentry-aiac">aiac<a class="self-link" href="#valdef-iasampleentry-aiac"></a></dfn>
Container:         Sample Description Box ('stsd')
Mandatory:         Yes
Quantity:          One or more.
</pre>
   <h4 class="heading settled" data-level="3.2.2" id="iasampleentry-description"><span class="secno">3.2.2. </span><span class="content">Description</span><a class="self-link" href="#iasampleentry-description"></a></h4>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="iasampleentry">IASampleEntry</dfn> sample entry identifies that the track contains <a data-link-type="dfn" href="#ia-sample" id="ref-for-ia-sample">IA Samples</a>, and uses one single <a data-link-type="dfn" href="#codec-specific-box" id="ref-for-codec-specific-box">codec specific box</a>.</p>
   <h4 class="heading settled" data-level="3.2.3" id="iasampleentry-syntax"><span class="secno">3.2.3. </span><span class="content">Syntax</span><a class="self-link" href="#iasampleentry-syntax"></a></h4>
<pre>class IASampleEntry extends AudioSampleEntry('aiac') {
  unsigned int (8) version;
  unsigned int (2) ambisonics_mode;
  unsigned int (3) channel_audio_layer;
  unsigned int (3) reserved;
  unsigned int (8) ambisonics_channel_count;
  for (i=0; i&lt;channel_audio_layer; i++)
    unsigned int (4) loudspeaker_layout;
  byte_alignment(); 
  CodecSpecificBox config;
}
</pre>
   <p>No optional boxes of AudioSampleEntry shall present.</p>
   <h4 class="heading settled" data-level="3.2.4" id="iasampleentry-semantics"><span class="secno">3.2.4. </span><span class="content">Semantics</span><a class="self-link" href="#iasampleentry-semantics"></a></h4>
   <p>Both <a data-link-type="dfn" href="https://www.iso.org/standard/68960.html#" id="termref-for-④②">channelcount</a> and <a data-link-type="dfn" href="https://www.iso.org/standard/68960.html#" id="termref-for-④③">samplerate</a> fields of AudioSampleEntry shall be ignored.</p>
   <p>version and channel_audio_layer shall be the same as the ones in IA_Static_Meta_OBU.</p>
   <p>ambisonics_mode and channel_audio_layer shall be the same as the ones in IA_Static_Meta_OBU.</p>
   <p><dfn data-dfn-type="dfn" data-noexport id="ambisonics_channel_count">ambisonics_channel_count<a class="self-link" href="#ambisonics_channel_count"></a></dfn> shall be the same as <a data-link-type="dfn" href="#output_channel_count" id="ref-for-output_channel_count">output_channel_count</a> in IA_Static_Meta_OBU. When ambisonics_mode set to 0, this field shall be ignored.</p>
   <p>loudspeaker_layout shall be the same as the one in IA_Static_Meta_OBU.</p>
   <h3 class="heading settled" data-level="3.3" id="codecspecificbox-section"><span class="secno">3.3. </span><span class="content">Codec Specific Box</span><a class="self-link" href="#codecspecificbox-section"></a></h3>
   <p>This section describes a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="codec-specific-box">codec specific box</dfn> for the decoding parameters, which is defined by codec_id of Codec_Specific_Info_OBU, to decode one single Substream of IA bitstream. <code>aiac</code> shall contain only one single codec specific box regardless of the number of Substreams in IA_Coded_Data. So, the codec specific box is applied to allo of Substreams in sample data.</p>
   <h4 class="heading settled" data-level="3.3.1" id="codecspecificbox-opus"><span class="secno">3.3.1. </span><span class="content">OPUS Specific Box</span><a class="self-link" href="#codecspecificbox-opus"></a></h4>
   <p>This shal be <a data-link-type="dfn" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-④④">OpusSpecificBox</a> (<a class="property css" data-link-type="property" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-④⑤">dOps</a>) for <a class="property css" data-link-type="property" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-④⑥">opus</a> audiosampleentry which is specified in <a data-link-type="biblio" href="#biblio-opus-in-isobmff">[OPUS-IN-ISOBMFF]</a>.</p>
   <h5 class="heading settled" data-level="3.3.1.1" id="codecspecificbox-opus-definition"><span class="secno">3.3.1.1. </span><span class="content">Definition</span><a class="self-link" href="#codecspecificbox-opus-definition"></a></h5>
<pre class="def">Box Type:  <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="dops">dOps</dfn>
Container: IA Sample Entry ('aiac')
Mandatory: Yes
Quantity:  One
</pre>
   <h5 class="heading settled" data-level="3.3.1.2" id="codecspecificbox-opus-description"><span class="secno">3.3.1.2. </span><span class="content">Description</span><a class="self-link" href="#codecspecificbox-opus-description"></a></h5>
   <p>This box is for one single Substream.</p>
   <h5 class="heading settled" data-level="3.3.1.3" id="codecspecificbox-opus-syntax"><span class="secno">3.3.1.3. </span><span class="content">Syntax</span><a class="self-link" href="#codecspecificbox-opus-syntax"></a></h5>
   <p>It shall be the same as <a class="property css" data-link-type="property" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-④⑦">dOps</a> box for <a class="property css" data-link-type="property" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-④⑧">opus</a> with that <a data-link-type="dfn" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-④⑨">ChannelMappingFamily</a> shall be set to 0.</p>
   <h5 class="heading settled" data-level="3.3.1.4" id="codecspecificbox-opus-semantics"><span class="secno">3.3.1.4. </span><span class="content">Semantics</span><a class="self-link" href="#codecspecificbox-opus-semantics"></a></h5>
   <p>It shall be the same as the semantics except followings:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-⑤⓪">OutputChannelCount</a> should be set to 2. <a data-link-type="dfn" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-⑤①">OutputChannelCount</a> can be ignored because the real value can be determined from the IA_Static_Meta_OBU and from the <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6716#" id="termref-for-⑤②">opus packet</a> header.</p>
    <li data-md>
     <p>In case of channel_audio_layer > 0, <a data-link-type="dfn" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-⑤③">OutputGain</a> shall be set to 0.</p>
    <li data-md>
     <p><a data-link-type="dfn" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-⑤④">ChannelMappingFamily</a> shall be set to 0.</p>
   </ul>
   <h4 class="heading settled" data-level="3.3.2" id="codecspecificbox-mp4a"><span class="secno">3.3.2. </span><span class="content">MP4A Specific Box</span><a class="self-link" href="#codecspecificbox-mp4a"></a></h4>
    This is <a data-link-type="dfn" href="https://www.iso.org/standard/79110.html#" id="termref-for-⑤⑤">ESDBox</a> (<a class="property css" data-link-type="property" href="https://www.iso.org/standard/79110.html#" id="termref-for-⑤⑥">esds</a>) for <a class="property css" data-link-type="property" href="https://www.iso.org/standard/79110.html#" id="termref-for-⑤⑦">mp4a</a> which is specified in <a data-link-type="biblio" href="#biblio-mp4">[MP4]</a>. 
   <h5 class="heading settled" data-level="3.3.2.1" id="codecspecificbox-mp4a-definition"><span class="secno">3.3.2.1. </span><span class="content">Definition</span><a class="self-link" href="#codecspecificbox-mp4a-definition"></a></h5>
<pre class="def">Box Type:  <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="esds">esds</dfn>
Container: IA Sample Entry ('aiac')
Mandatory: Yes
Quantity:  One of more
</pre>
   <h5 class="heading settled" data-level="3.3.2.2" id="codecspecificbox-mp4a-description"><span class="secno">3.3.2.2. </span><span class="content">Description</span><a class="self-link" href="#codecspecificbox-mp4a-description"></a></h5>
   <p>This box is for one single Substream.</p>
   <h5 class="heading settled" data-level="3.3.2.3" id="codecspecificbox-mp4a-syntax"><span class="secno">3.3.2.3. </span><span class="content">Syntax</span><a class="self-link" href="#codecspecificbox-mp4a-syntax"></a></h5>
   <p>It shall be the same as <a class="property css" data-link-type="property" href="https://www.iso.org/standard/79110.html#" id="termref-for-⑤⑧">esds</a> box for <a data-link-type="dfn" href="https://www.iso.org/standard/43345.html#" id="termref-for-⑤⑨">Low Complexity Profile</a> of <a data-link-type="biblio" href="#biblio-aac">[AAC]</a> (AAC-LC).</p>
   <h5 class="heading settled" data-level="3.3.2.4" id="codecspecificbox-mp4a-semantics"><span class="secno">3.3.2.4. </span><span class="content">Semantics</span><a class="self-link" href="#codecspecificbox-mp4a-semantics"></a></h5>
   <p>It shall be the same as the semantics except followings:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="https://www.iso.org/standard/76383.html#" id="termref-for-⑥⓪">channelConfiguration</a> field should be set to 2. The real value can be implied from the IA_Static_Meta_OBU.</p>
   </ul>
   <h3 class="heading settled" data-level="3.4" id="iasampleformat"><span class="secno">3.4. </span><span class="content">IA Sample Format</span><a class="self-link" href="#iasampleformat"></a></h3>
   <p>For tracks using the <a data-link-type="dfn" href="#iasampleentry" id="ref-for-iasampleentry①">IASampleEntry</a>, an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="ia-sample">IA Sample</dfn> has the following constraints:</p>
   <ul>
    <li data-md>
     <p>The sample data shall be a sequence of <a data-link-type="dfn" href="#obu" id="ref-for-obu①">OBUs</a> forming a <a data-link-type="dfn" href="#temporal-unit" id="ref-for-temporal-unit⑦">Temporal Unit</a>.</p>
    <li data-md>
     <p>Temporal_Delimiter_OBU shall not be present. It shall be discarded when <a data-link-type="dfn" href="#temporal-unit" id="ref-for-temporal-unit⑧">Temporal Unit</a> is stored as sample data.</p>
    <li data-md>
     <p>OBUs for Timed Metadata (if present) come first and followed by OBU(s) for IA_Coded_Data.</p>
    <li data-md>
     <p>Each OBU shall follow OBU syntax as specified in this specificaiton.</p>
   </ul>
   <h3 class="heading settled" data-level="3.5" id="iasamplegroup"><span class="secno">3.5. </span><span class="content">IA Sample Group</span><a class="self-link" href="#iasamplegroup"></a></h3>
   <p class="note" role="note"><span>NOTE:</span> We agree to create a generic sample group where the payload is exactly the OBU content (with header and length). This is to be used for demixing OBU and possibly others in the future. We still need to discuss if sample groups shall or should or can be used, possibly based on the OBU type.</p>
   <h4 class="heading settled" data-level="3.5.1" id="iasamplegroup-demixing"><span class="secno">3.5.1. </span><span class="content">Demixing Info Sample Group ## {#iasamplegroup-demixing}</span><a class="self-link" href="#iasamplegroup-demixing"></a></h4>
   <p>During encapsulation process, Demixing_Info_OBUs shall or should or can be discarded from IA bistream. A new sample group for Demixing_Info_OBUs is defined by using <a class="property css" data-link-type="property" href="https://www.iso.org/standard/68960.html#" id="termref-for-⑥①">sgpd</a>' and <a class="property css" data-link-type="property" href="https://www.iso.org/standard/68960.html#" id="termref-for-⑥②">sbgp</a> boxes with following requirements:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="https://www.iso.org/standard/68960.html#" id="termref-for-⑥③">grouping_type</a> shall be set to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="admi">admi</dfn>.</p>
    <li data-md>
     <p>Each <a data-link-type="dfn" href="https://www.iso.org/standard/68960.html#" id="termref-for-⑥④">SampleGroupDescriptionEntry</a> shall be Demixing_Info_OBU with OBU syntax.</p>
   </ul>
   <h4 class="heading settled" data-level="3.5.2" id="iasamplegroup-iastaticmeta"><span class="secno">3.5.2. </span><span class="content">IA Static Meta Sample Group ## {#iasamplegroup-iastaticmeta}</span><a class="self-link" href="#iasamplegroup-iastaticmeta"></a></h4>
   <p>During encapsulation process, IA_Static_Meta_OBUs are discarded from IA bistream. A new sample group for IA_Static_Meta_OBUs is defined by using <a class="property css" data-link-type="property" href="https://www.iso.org/standard/68960.html#" id="termref-for-⑥⑤">sgpd</a> and <a class="property css" data-link-type="property" href="https://www.iso.org/standard/68960.html#" id="termref-for-⑥⑥">sbgp</a> boxes with following requirements:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="https://www.iso.org/standard/68960.html#" id="termref-for-⑥⑦">grouping_type</a> shall be set to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="iasm">iasm</dfn>.</p>
    <li data-md>
     <p><a data-link-type="dfn" href="https://www.iso.org/standard/68960.html#" id="termref-for-⑥⑧">SampleGroupDescriptionEntry</a> shall be IA_Static_Meta_OBU with OBU syntax.</p>
   </ul>
   <h3 class="heading settled" data-level="3.6" id="CommonEncryption"><span class="secno">3.6. </span><span class="content">Common Encryption</span><a class="self-link" href="#CommonEncryption"></a></h3>
    TBA 
   <h3 class="heading settled" data-level="3.7" id="codecsparameter"><span class="secno">3.7. </span><span class="content">Codecs Parameter String</span><a class="self-link" href="#codecsparameter"></a></h3>
    DASH and other applications require defined values for the <a class="property css" data-link-type="property" href="https://tools.ietf.org/html/rfc6381#" id="termref-for-⑥⑨">Codecs</a> parameter specified in <a data-link-type="biblio" href="#biblio-rfc6381">[RFC6381]</a> for ISO Media tracks. The codecs parameter string for the AOM IA codec shall be: 
   <ul>
    <li data-md>
     <p>For IAC-OPUS</p>
   </ul>
<pre>aiac.IAC-specific-needs.Opus 
</pre>
   <ul>
    <li data-md>
     <p>For IAC-AAC-LC</p>
   </ul>
<pre>aiac.IAC-specific-needs.mp4a.40.2 
</pre>
   <p><b>IAC-specific-needs</b> shall be <b>V.AA.L(CC)*</b> as follows:</p>
   <ul>
    <li data-md>
     <p><dfn data-dfn-type="dfn" data-noexport id="v">V<a class="self-link" href="#v"></a></dfn> shall be four digits and shall represent <a data-link-type="dfn" href="#version" id="ref-for-version">version</a> of <a data-link-type="dfn" href="#ia_static_meta" id="ref-for-ia_static_meta①">IA_Static_Meta</a>.</p>
     <ul>
      <li data-md>
       <p>The first two digits shall represent the major version within the range 0 to 15.</p>
      <li data-md>
       <p>The second two digits shall represent the minor version within the range 0 to 15.</p>
     </ul>
    <li data-md>
     <p><dfn data-dfn-type="dfn" data-noexport id="aa">AA<a class="self-link" href="#aa"></a></dfn> shall be two or three digits.</p>
     <ul>
      <li data-md>
       <p>The first <b>A</b> shall be one digit and shall represent the mode of Ambisonics.</p>
      <li data-md>
       <p>The second <b>A</b> shall be one or two digits and shall represent the order of Ambisonics.</p>
     </ul>
    <li data-md>
     <p><dfn data-dfn-type="dfn" data-noexport id="l-cc">L(CC)*<a class="self-link" href="#l-cc"></a></dfn> means that <b>CC</b> commes L times.</p>
     <ul>
      <li data-md>
       <p><dfn data-dfn-type="dfn" data-noexport id="l">L<a class="self-link" href="#l"></a></dfn> shall be one digit and shall represent <a data-link-type="dfn" href="#channel_audio_layer" id="ref-for-channel_audio_layer">channel_audio_layer</a> of the channel audio.</p>
      <li data-md>
       <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="cc">CC</dfn> shall be two digits and shall represent the number of surround and top channels.</p>
       <ul>
        <li data-md>
         <p>The first <b>C</b> shall be one digit and shall represent the number of surround channels.</p>
        <li data-md>
         <p>The second <b>C</b> shall be one digit and shall represent the number of top channels.</p>
       </ul>
      <li data-md>
       <p>The ith <a data-link-type="dfn" href="#cc" id="ref-for-cc">CC</a> shall represent for the ith layer of the channel audio, where i = 1, 2, ..., L.</p>
     </ul>
   </ul>
   <p>For example, for this version of the specification</p>
   <ul>
    <li data-md>
     <p>The codecs parameter string of IAC-AAC-LC for the second order of Ambiosnics (SOA) with channel mapping:</p>
   </ul>
<pre>aiac.0000.12.mp4a.40.2
</pre>
   <ul>
    <li data-md>
     <p>The codecs parameter string of IAC-OPUS for channel audio with 3 layers (2ch/3.1.2ch/7.1.4ch):</p>
   </ul>
<pre>aiac.0000.00.203274.Opus
</pre>
   <h2 class="heading settled" data-level="4" id="iacdecapsulation"><span class="secno">4. </span><span class="content">IAC Decapsulation Process</span><a class="self-link" href="#iacdecapsulation"></a></h2>
   <p>This section provides a guideline for IAC parser to reconstruct IA bitstreams (i.e., IA sequence) from IAC file.</p>
   <p>When IAC parser feeds the reconstructed IA bitstreams to IAC-OBU parser, IA_Stream_Indicator_OBU is placed at the front of the first IA bistream to let IAC-OBU parser know OBUs for IA bistreams are coming.</p>
   <p>Figure 9 shows the mirroring process of the encapsulation scheme of IA bitstream specified in <a href="#basic-encapsulation">§ 3 Basic Encapsulation Scheme</a>.</p>
   <center><img height="326" src="images/IAC Decapsulation Guideline.png" width="800"></center>
   <center><b>Figure 9. </b>IAC Decapsulation Guideline</center>
   <p>During decapsulation process, IAC file is decapsulated into IA bitstreams which conform to <a href="#iabitstream-definition">§ 2 Immersive Audio Bitstream Definition</a> as follows:</p>
   <ul>
    <li data-md>
     <p>Step1: Reconstruction of Non-timed Metadata (Codec_Specific_OBU and followed by IA_Static_Meta_OBU) for the ith IA bitstream</p>
     <ul>
      <li data-md>
       <p>[Step1-1] Codec_Specific_Info_OBU: generate Codec_Specific_Info from CodecSpecificBox of <code>aiac</code> sample entry, and packetize it by OBU with obu_type = OBU_Codec_Sepcific_info.</p>
      <li data-md>
       <p>[Step1-2] IA_Static_Meta_OBU: take the ith SampleGroupDescriptionEntry as it is in SampleGroup with grouping_type, <a data-link-type="dfn" href="#iasm" id="ref-for-iasm①">iasm</a>.</p>
      <li data-md>
       <p>[Step1-3] Place Codec_Specific_Info_OBU at the front of IA_Static_Meta_OBU without gap to reconstruct Non-timed Metadata.</p>
      <li data-md>
       <p>[Step1-4] Figure out the offset (i1) and number (im) of Samples, which the ith SampleGroupDescriptionEntry is applied to, from the SampleGroup.</p>
     </ul>
    <li data-md>
     <p>Step2: Reconstructing of the jth Temporal Unit of the ith IA Bitstream (j = i1, i2, …, im)</p>
     <ul>
      <li data-md>
       <p>[Step2-1] Prepare Temporal_Delimiter_OBU with obu_type = OBU_Temporal_Delimiter.</p>
      <li data-md>
       <p>[Step2-2] If there is the SampleGroup with grouping_type, <a data-link-type="dfn" href="#admi" id="ref-for-admi①">admi</a>, then place the Demixing_Info_OBU at the front of jth Sample without gap. Otherwise, take jth Sample as it is.</p>
       <ul>
        <li data-md>
         <p>Demixing_Info_OBU: take the SampleGroupDescriptionEntry as it is, from SampleGrouop with grouping_type, <a data-link-type="dfn" href="#admi" id="ref-for-admi②">admi</a>, mapped to jth Sample.</p>
       </ul>
      <li data-md>
       <p>[Step2-3] Place Temporal_Delimiter_OBU at the front of the result of Step2-2 without gap to reconstruct the jth Temporal Unit.</p>
     </ul>
    <li data-md>
     <p>Step3: Place Non-Timed Metadata and followed by Temporal Units in order (j = i1, i2, …, im) without gap to reconstruct the ith IA bitstream.</p>
   </ul>
   <p>Codec_Specific_Info_OBU for IAC-OPUS is generated as follows:</p>
   <ul>
    <li data-md>
     <p>The syntax and values conform to <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc7845#" id="termref-for-⑦⓪">ID Header</a> of <a data-link-type="biblio" href="#biblio-rfc7845">[RFC7845]</a> with following constraints.</p>
     <ul>
      <li data-md>
       <p><a data-link-type="dfn" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-⑦①">OutputChannelCount</a>, <a data-link-type="dfn" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-⑦②">PreSkip</a>, <a data-link-type="dfn" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-⑦③">InputSampleRate</a>, <a data-link-type="dfn" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-⑦④">OutputGain</a> and <a data-link-type="dfn" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-⑦⑤">ChannelMappingFamily</a> are copied from <a data-link-type="dfn" href="#dops" id="ref-for-dops">dOps</a> box.</p>
     </ul>
   </ul>
   <p>Codec_Specific_Info_OBU for IAC-AAC-LC is generated as follows:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#codec_id" id="ref-for-codec_id②">Codec_ID</a>: <a class="property css" data-link-type="property" href="https://www.iso.org/standard/79110.html#" id="termref-for-⑦⑥">mp4a</a></p>
    <li data-md>
     <p><a data-link-type="dfn" href="#decoder_config" id="ref-for-decoder_config②">Decoder_Config</a> is copied from <a data-link-type="dfn" href="https://www.iso.org/standard/55688.html#" id="termref-for-⑦⑦">DecoderConfigDescriptor()</a> of <a data-link-type="dfn" href="#esds" id="ref-for-esds">esds</a> box.</p>
   </ul>
   <h2 class="heading settled" data-level="5" id="iaencoding"><span class="secno">5. </span><span class="content">IA Encoding Process</span><a class="self-link" href="#iaencoding"></a></h2>
   <p>This section provides a guideline for IA encoding for a given input audio format.</p>
   <h3 class="heading settled" data-level="5.1" id="iaencoding-inputaudioformat"><span class="secno">5.1. </span><span class="content">Input Audio Format</span><a class="self-link" href="#iaencoding-inputaudioformat"></a></h3>
   <p>Recommended input audo format for IA encoding is as follows:</p>
   <ul>
    <li data-md>
     <p>Ambiosnics format: It conforms to <a data-link-type="dfn" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-⑦⑧">ChannelMappingFamily</a> = 2 or 3 of <a data-link-type="biblio" href="#biblio-rfc8486">[RFC8486]</a>.</p>
    <li data-md>
     <p>Channel Audio format: It conforms to<a data-link-type="dfn" href="#loudspeaker_layout" id="ref-for-loudspeaker_layout①">loudspeaker_layout</a> specified in <a href="#obu-channelaudiolayerconfig">§ 2.2.9 Channel Audio Layer Config Syntax and Semantics</a>.</p>
    <li data-md>
     <p>Ambisonics + Channel Audio format: In this case, Channel Audio is regarded as Non-diegetic.</p>
    <li data-md>
     <p>Input Smapling Rate: 48000hz</p>
    <li data-md>
     <p>Bitdepth: 16 bits or 24 bits</p>
     <ul>
      <li data-md>
       <p>16 bits are recommended for IAC-OPUS.</p>
     </ul>
    <li data-md>
     <p>Input file format: .wav file (Linear PCM, simply called as PCM)</p>
   </ul>
   <h3 class="heading settled" data-level="5.2" id="iaencoding-iaencoder"><span class="secno">5.2. </span><span class="content">IA Encoder</span><a class="self-link" href="#iaencoding-iaencoder"></a></h3>
   <p>For a given input audio and user inputs, IA encoder outputs <a data-link-type="dfn" href="#ia-bitstream" id="ref-for-ia-bitstream①">IA bitstream</a> which conforms to <a href="#iabitstream-definition">§ 2 Immersive Audio Bitstream Definition</a>.</p>
   <p>Input audio is one of followings:</p>
   <ul>
    <li data-md>
     <p>Ambisonics format</p>
    <li data-md>
     <p>Channel Audio format</p>
    <li data-md>
     <p>Ambisonics + Channel Audio format</p>
   </ul>
   <p>User inputs are:</p>
   <ul>
    <li data-md>
     <p>Ambisonics mode to indicate if <a data-link-type="dfn" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-⑦⑨">ChannelMappingFamily</a> = 2 or 3 of <a data-link-type="biblio" href="#biblio-rfc8486">[RFC8486]</a>.</p>
    <li data-md>
     <p>List of channel layouts to be supported for scalable channel audio: it conforms to <a data-link-type="dfn" href="#loudspeaker_layout" id="ref-for-loudspeaker_layout②">loudspeaker_layout</a>.</p>
   </ul>
   <p>IA encoder is composed of Pre-processor, Codec encoder and OBU packetizer as depicted in Figure 10.</p>
   <ul>
    <li data-md>
     <p>Pre-processor outputs one or more <a data-link-type="dfn" href="#channelgroup" id="ref-for-channelgroup">ChannelGroups</a>, <a data-link-type="dfn" href="#ia_static_meta" id="ref-for-ia_static_meta②">IA_Static_Meta</a> and <a data-link-type="dfn" href="#timed-metadata" id="ref-for-timed-metadata①">Timed Metadata</a> if needed based on the input audio and user inputs.</p>
     <ul>
      <li data-md>
       <p>It outputs one single ChannelGroup for Ambisonics.</p>
      <li data-md>
       <p>It outputs one or more ChannelGroups for Channel audio.</p>
     </ul>
    <li data-md>
     <p>Codec encoder generates one or more <a data-link-type="dfn" href="#substream" id="ref-for-substream②">Substreams</a> from each ChannelGroup and outputs the Substream(s) with one single Decoder_Config.</p>
     <ul>
      <li data-md>
       <p>Mono or stereo coding is only allowed.</p>
       <ul>
        <li data-md>
         <p>Ambisonics format: each channel is coded as mono mode</p>
        <li data-md>
         <p>Channel Audio format: each pair of coupled channels in the same ChannelGroup is coded as stereo mode to generate one single Substream and each of non-coupled channels in the same ChannelGroup is coded as mono mode to generate one single Substream.</p>
         <ul>
          <li data-md>
           <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="coupled-channels">Coupled channels</dfn>: L/R, Ls/Rs, Lss/Rss, Lrs/Rrs, Ltf/Rtf, Ltb/Rtb</p>
          <li data-md>
           <dnf>Non-coupled channels: C, LFE, L </dnf>
         </ul>
       </ul>
     </ul>
    <li data-md>
     <p>OBU packetizer generates <a data-link-type="dfn" href="#non-timed-metadata" id="ref-for-non-timed-metadata②">Non-timed Metadata</a> and <a data-link-type="dfn" href="#temporal-unit" id="ref-for-temporal-unit⑨">Temporal Unit</a> for each frame, and outputs <a data-link-type="dfn" href="#ia-bitstream" id="ref-for-ia-bitstream②">IA bitstream</a>.</p>
     <ul>
      <li data-md>
       <p>Non-timed Metadata generator generates OBUs for <a data-link-type="dfn" href="#codec_specific_info" id="ref-for-codec_specific_info④">Codec_Specific_Info</a> and <a data-link-type="dfn" href="#ia_static_meta" id="ref-for-ia_static_meta③">IA_Static_Meta</a>.</p>
      <li data-md>
       <p>Temporal Unit generator generates <a data-link-type="dfn" href="#temporal-unit" id="ref-for-temporal-unit①⓪">Temporal Unit</a> for each frame from <a data-link-type="dfn" href="#timed-metadata" id="ref-for-timed-metadata②">Timed Metadata</a> if present and <a data-link-type="dfn" href="#substream" id="ref-for-substream③">Substreams</a>.</p>
     </ul>
   </ul>
   <center><img height="272" src="images/IA Encoder Configuration.png" width="800"></center>
   <center><b>Figure 10. </b>IA Encoder Configuration</center>
   <p>The order of Substreams in each ChannelGroup is as follows:</p>
   <ul>
    <li data-md>
     <p>In ChannelGroup for Ambisonics: The order conforms to <a data-link-type="biblio" href="#biblio-rfc8486">[RFC8486]</a>.</p>
    <li data-md>
     <p>In ChannelGroup for Channel audio: The order conforms to following rules:</p>
     <ul>
      <li data-md>
       <p><a data-link-type="dfn" href="#coupled-substream" id="ref-for-coupled-substream">Coupled Substreams</a> comes first and followed by <a data-link-type="dfn" href="#non-coupled-substream" id="ref-for-non-coupled-substream">non-coupled Substreams</a>.</p>
      <li data-md>
       <p>Coupled Substreams for surround channels comes first and followed by one(s) for top channels.</p>
      <li data-md>
       <p>Coupled Substreams for front channels comes first and followed by one(s) for side, rear and back channels.</p>
      <li data-md>
       <p>Coupled Substreams for side channels comes first and followed by one(s) for rear channels.</p>
      <li data-md>
       <p>Center channel comes first and followed by LFE and followed by the other one.</p>
     </ul>
   </ul>
   <p>Where, <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="non-coupled-substream">non-coupled Substream</dfn> is a coded Substream from one of [=non-coupled channels].</p>
   <h4 class="heading settled" data-level="5.2.1" id="iaencoding-iaencoder-ambisonics"><span class="secno">5.2.1. </span><span class="content">IA Encoder for Ambisonics format</span><a class="self-link" href="#iaencoding-iaencoder-ambisonics"></a></h4>
   <p>For Ambisonics format:</p>
   <ul>
    <li data-md>
     <p>Pre-processor outputs one ChannelGroup and IA_Static_Meta and it is only composed of Meta Generator.</p>
     <ul>
      <li data-md>
       <p>Meta generator generates IA_Static_Meta based on Ambisonics mode and the number of channels for Ambisonics.</p>
       <ul>
        <li data-md>
         <p><a data-link-type="dfn" href="#ambisonics_mode" id="ref-for-ambisonics_mode">Ambisonics_Mode</a> is set to 1 for <a data-link-type="dfn" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-⑧⓪">ChannelMappingFamily</a> = 2 of <a data-link-type="biblio" href="#biblio-rfc8486">[RFC8486]</a> or 2 for <a data-link-type="dfn" href="https://opus-codec.org/docs/opus_in_isobmff.html#" id="termref-for-⑧①">ChannelMappingFamily</a> = 3 of <a data-link-type="biblio" href="#biblio-rfc8486">[RFC8486]</a>.</p>
        <li data-md>
         <p><a data-link-type="dfn" href="#channel_audio_layer" id="ref-for-channel_audio_layer①">Channel_Audio_Layer</a> is set to 0.</p>
        <li data-md>
         <p>Ambisonics Layer Config() is set to as follows:</p>
         <ul>
          <li data-md>
           <p><a data-link-type="dfn" href="#output_channel_count" id="ref-for-output_channel_count①">output_channel_count</a>, <a data-link-type="dfn" href="#substream_count" id="ref-for-substream_count①">substream_count</a> and <a data-link-type="dfn" href="#coupled_substream_count" id="ref-for-coupled_substream_count">coupled_substream_count</a> are set to the number of channels for Ambisonics.</p>
          <li data-md>
           <p><a data-link-type="dfn" href="#channel_mapping" id="ref-for-channel_mapping">channel_mapping</a> for <a data-link-type="dfn" href="#ambisonics_mode" id="ref-for-ambisonics_mode①">Ambisonics_Mode</a> = 1 or <a data-link-type="dfn" href="#demixing_matrix" id="ref-for-demixing_matrix">demixing_matrix</a> for <a data-link-type="dfn" href="#ambisonics_mode" id="ref-for-ambisonics_mode②">Ambisonics_Mode</a> = 2 is assigned to according to the order of Substreams in ChannelGroup.</p>
         </ul>
       </ul>
     </ul>
    <li data-md>
     <p>Codec Enc. outputs Substreams as many as the number of channels for Ambisoncis by coding each channel in a mono mode.</p>
    <li data-md>
     <p><a data-link-type="dfn" href="#temporal-unit" id="ref-for-temporal-unit①①">Temporal Unit</a> is composed of Temporal_Delimiter_OBU and followded by OBUs for <a data-link-type="dfn" href="#substream" id="ref-for-substream④">Substreams</a>.</p>
     <ul>
      <li data-md>
       <p>The order of Substreams in ChanngelGroup is aligned with <a data-link-type="dfn" href="#channel_mapping" id="ref-for-channel_mapping①">channel_mapping</a> for <a data-link-type="dfn" href="#ambisonics_mode" id="ref-for-ambisonics_mode③">Ambisonics_Mode</a> = 1 or <a data-link-type="dfn" href="#demixing_matrix" id="ref-for-demixing_matrix①">demixing_matrix</a> for <a data-link-type="dfn" href="#ambisonics_mode" id="ref-for-ambisonics_mode④">Ambisonics_Mode</a> = 2.</p>
     </ul>
   </ul>
   <h4 class="heading settled" data-level="5.2.2" id="iaencoding-iaencoder-channelaudio"><span class="secno">5.2.2. </span><span class="content">IA Encoder for Channel Audio format</span><a class="self-link" href="#iaencoding-iaencoder-channelaudio"></a></h4>
   <p>For Channel Audio format:</p>
   <ul>
    <li data-md>
     <p>Pre-processor outputs one or more <a data-link-type="dfn" href="#channelgroup" id="ref-for-channelgroup①">ChannelGroups</a>, <a data-link-type="dfn" href="#ia_static_meta" id="ref-for-ia_static_meta④">IA_Static_Meta</a> and <a data-link-type="dfn" href="#timed-metadata" id="ref-for-timed-metadata③">Timed Metadata</a>. It is composed of Down-mix parameter generator, Down-mixer, Loudness, ChannelGroup generator, Attenation and Meta generator.</p>
     <ul>
      <li data-md>
       <p>For non-scalable channel audio (i.e. <a data-link-type="dfn" href="#channel_audio_layer" id="ref-for-channel_audio_layer②">Channel_Audio_Layer</a> = 1):</p>
       <ul>
        <li data-md>
         <p>Timed Metadata may not need to be generated. But Demixing_Info of Timed Metadata may be generated by implementers who assume it to be used for dynamic downmixing in a decoder side.</p>
        <li data-md>
         <p>Down-mix parameter generator, Down-mixer, ChannelGroup generator and Attenuation modules are not needed.</p>
       </ul>
      <li data-md>
       <p>Down-mix parameter generator generates 5 down-mix parameters (α(k), β(k), γ(k), δ(k) and w(k)) by analyzing input Channel Audio</p>
      <li data-md>
       <p>Down-mixer generates down-mixed audios according to the list of channel layouts and the down-mix parameters.</p>
      <li data-md>
       <p>Loudness module outputs the loudness level (<a data-link-type="dfn" href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.1770-4-201510-I!!PDF-E.pdf#" id="termref-for-⑧②">LKFS</a>) of each down-mixed audio based on <a data-link-type="biblio" href="#biblio-itu1770-4">[ITU1770-4]</a>.</p>
      <li data-md>
       <p>ChannelGroup generator transforms the input Channel Audio to ChannelGroups for audio scalability by using transformation matrix.</p>
       <ul>
        <li data-md>
         <p>Transformation matrix is generated based on down-mix parameters and the list of channel layouts.</p>
       </ul>
      <li data-md>
       <p>Attenuation module applies a gain to prevent clipping of mixed channels.</p>
      <li data-md>
       <p>Meta generator generates IA_Static_Meta, and Timed Metadata for each frame.</p>
       <ul>
        <li data-md>
         <p>IA_Static_Meta is set to as follows:</p>
         <ul>
          <li data-md>
           <p><a data-link-type="dfn" href="#ambisonics_mode" id="ref-for-ambisonics_mode⑤">Ambisonics_Mode</a> is set to 0.</p>
          <li data-md>
           <p><a data-link-type="dfn" href="#channel_audio_layer" id="ref-for-channel_audio_layer③">Channel_Audio_Layer</a> is set to the number of channel layouts.</p>
          <li data-md>
           <p>Channel_Audio Layer Config() is set to as follows:</p>
           <ul>
            <li data-md>
             <p><a data-link-type="dfn" href="#loudspeaker_layout" id="ref-for-loudspeaker_layout③">loudspeaker_layout</a> is set to the ith list of channel layouts for the ith ChannelGroup.</p>
            <li data-md>
             <p><a data-link-type="dfn" href="#output_gain_is_present_flag" id="ref-for-output_gain_is_present_flag">output_gain_is_present_flag</a> is set to 1 for the ith ChannelGroup if attenuation is applied to the mixed channels of the ith ChannelGroup. Otherwise it is set to 0 for the ith ChannelGroup.</p>
            <li data-md>
             <p><a data-link-type="dfn" href="#recon_gain_is_present_flag" id="ref-for-recon_gain_is_present_flag">recon_gain_is_present_flag</a> is set to 1 for the ith ChannelGroup if the preceding ChannelGroups has one or more mixed channels from the down-mixed audio for the ith channel layout. Otherwise, it is set to 0 for the ith ChannelGroup.</p>
            <li data-md>
             <p><a data-link-type="dfn" href="#substream_count" id="ref-for-substream_count②">substream_count</a> is set to the nubmer of Substreams composing of the ith ChannelGroup.</p>
            <li data-md>
             <p><a data-link-type="dfn" href="#coupled_substream_count" id="ref-for-coupled_substream_count①">coupled_substream_count</a> is set to the nubmer of coupled Substreams among the Substreams composing of the ith ChannelGroup.</p>
            <li data-md>
             <p><a data-link-type="dfn" href="#loudness" id="ref-for-loudness">loudness</a> is set to the loudness (<a data-link-type="dfn" href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.1770-4-201510-I!!PDF-E.pdf#" id="termref-for-⑧③">LKFS</a>) of the down-mixed audio for the ith channel layout for the ith ChannelGroup.</p>
            <li data-md>
             <p>Each bit of <a data-link-type="dfn" href="#output_gain_flags" id="ref-for-output_gain_flags">output_gain_flags</a> is set to 1 for the ith ChannelGroup if attenuation is applied to the relevant channel of the ith ChannelGroup. Otherwies it is set to 0 for the ith ChannelGroup.</p>
            <li data-md>
             <p><a data-link-type="dfn" href="#output_gain" id="ref-for-output_gain">output_gain</a> is set to the inverse number of the gain which is applied to the channels which are indicated by output_gain_flags.</p>
           </ul>
         </ul>
        <li data-md>
         <p>Timed Metadata is composed of <a data-link-type="dfn" href="#demixing_info" id="ref-for-demixing_info">Demixing_Info</a> and <a data-link-type="dfn" href="#recon_gain_info" id="ref-for-recon_gain_info">Recon_Gain_Info</a>.</p>
         <ul>
          <li data-md>
           <p><a data-link-type="dfn" href="#dmixp_mode" id="ref-for-dmixp_mode">dmixp_mode</a> of Demixing_Info for the kth frame is set to indicate (α(k), β(k), γ(k), δ(k)) and w_idx_offset(k). Where w_idx_offset(k) = 1 or -1.</p>
          <li data-md>
           <p><a data-link-type="dfn" href="#recon_gain_flags" id="ref-for-recon_gain_flags">recon_gain_flags</a> of Recon_Gain_Info are set to indicate the de-mixed channels, which need to apply <a data-link-type="dfn" href="#recon_gain" id="ref-for-recon_gain">recon_gain</a> among the output channels after demixing for ith channel layout.</p>
          <li data-md>
           <p><a data-link-type="dfn" href="#recon_gain" id="ref-for-recon_gain①">recon_gain</a> is set to the gain value to be applied to the channel which is indicated by recon_gain_flags for the ith ChannelGroup.</p>
         </ul>
       </ul>
     </ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#temporal-unit" id="ref-for-temporal-unit①②">Temporal Unit</a> is composed of Temporal_Delimiter_OBU, followed by OBUs for <a data-link-type="dfn" href="#timed-metadata" id="ref-for-timed-metadata④">Timed Metadata</a> and followed by OBUs for <a data-link-type="dfn" href="#substream" id="ref-for-substream⑤">Substreams</a>.</p>
     <ul>
      <li data-md>
       <p>ChannelGroups in Temporal Unit are placed in order. In other words, ChannelGroup for the first channel layout comes first, followed by ChannelGroup for the second channel layout, followed by ChannelGroup for the third channel layout and so on.</p>
     </ul>
   </ul>
   <p>Figure 11-1 shows IA encoding flowchart for Channel Audio Format.</p>
   <ul>
    <li data-md>
     <p>For a given Channel Audio and a given list of channel layouts for scalability, PCMs for Channel Audio are passed to CG Generation moddule.</p>
    <li data-md>
     <p>CG Generation module generates the transformed audio according to CG generation rule based on the list of CLs and the down-mix parameters.</p>
     <ul>
      <li data-md>
       <p>The transformed audio is structured as ChannelGroups.</p>
     </ul>
    <li data-md>
     <p>Non-mixed channels of the transformed audio (i.e., the original channels of the input channel audio) are directly input to Codec encoder, but the mixed channels may be input first to Attenuation module and then to Codec encoder.</p>
    <li data-md>
     <p>The Attenuation module reduces all sample values of the mixed channels in the same CG at a uniform rate (Output_Gain).</p>
     <ul>
      <li data-md>
       <p>A range of 0dB to -6dB is recommended for the attenuation. (i.e. a range of 0dB to 6dB for Output_Gain)</p>
     </ul>
    <li data-md>
     <p>Codec Enc. generates the coded Substreams from PCMs and passes Substreams and one single Decoder_Config to OBU Packetizer.</p>
    <li data-md>
     <p>OBU packetizer generates <a data-link-type="dfn" href="#non-timed-metadata" id="ref-for-non-timed-metadata③">Non-timed Metadata</a> which consists of OBU for <a data-link-type="dfn" href="#codec_specific_info" id="ref-for-codec_specific_info⑤">Codec_Specific_Info</a> and OBU for <a data-link-type="dfn" href="#ia_static_meta" id="ref-for-ia_static_meta⑤">IA_Static_Meta</a>.</p>
     <ul>
      <li data-md>
       <p>Codec_Specific_Info_OBU is generated based on <a data-link-type="dfn" href="#decoder_config" id="ref-for-decoder_config③">Decoder_Config</a>.</p>
      <li data-md>
       <p>IA_Static_Meta_OBU is generated based on <a data-link-type="dfn" href="#ambix_layer_config" id="ref-for-ambix_layer_config">Ambix_Layer_Config</a> and <a data-link-type="dfn" href="#channel_audio_layer_config" id="ref-for-channel_audio_layer_config">Channel_Audio_Layer_Config</a>.</p>
     </ul>
    <li data-md>
     <p>OBU packetizer generates <a data-link-type="dfn" href="#temporal-unit" id="ref-for-temporal-unit①③">Temporal Unit</a> for each frame.</p>
     <ul>
      <li data-md>
       <p>OBU Packetizer generates <a data-link-type="dfn" href="#timed-metadata" id="ref-for-timed-metadata⑤">Timed Metadata</a>, which consists of OBU for <a data-link-type="dfn" href="#demixing_info" id="ref-for-demixing_info①">Demixing_Info</a> and OBU for <a data-link-type="dfn" href="#recon_gain_info" id="ref-for-recon_gain_info①">Recon_Gain_Info</a>, for each frame.</p>
      <li data-md>
       <p>OBU Packetizer generates OBUs for <a data-link-type="dfn" href="#substream" id="ref-for-substream⑥">Substreams</a> for each frame.</p>
     </ul>
    <li data-md>
     <p>OBU Packetizer outputs <a data-link-type="dfn" href="#ia-bitstream" id="ref-for-ia-bitstream③">IA Bitstream</a> which is composed of OBUs for Non-timed Metadata and followed by OBUs for Temporal Units.</p>
   </ul>
   <center><img height="551" src="images/IA Encoding Flowchart for Channel Audio Format.png" width="800"></center>
   <center><b>Figure 11-1. </b>IA Encoding Flowchart for Channel Audio Format</center>
   <p>Following sections, <a href="#iaencoding-iaencoder-channelaudio-downmixparameter">§ 5.2.2.1 Down-mix parameter and Loudness</a>, <a href="#iaencoding-iaencoder-channelaudio-downmixmechanism">§ 5.2.2.2 Down-mix Mechanism</a>, <a href="#iaencoding-iaencoder-channelaudio-channellayoutgenerationrule">§ 5.2.2.3 Channel Layout Generation Rule</a>, <a href="#iaencoding-iaencoder-channelaudio-recongaingeneration">§ 5.2.2.4 Recon Gain Generation</a> and <a href="#iaencoding-iaencoder-channelaudio-channelgroupgenerationrule">§ 5.2.2.5 ChannelGroup Generation Rule</a> are not needed for non-scalable channel audio (i.e., when <a data-link-type="dfn" href="#channel_audio_layer" id="ref-for-channel_audio_layer④">Channel_Audio_Layer</a> of <a data-link-type="dfn" href="#ia_static_meta" id="ref-for-ia_static_meta⑥">IA_Static_Meta</a> is set to 1).</p>
   <h5 class="heading settled" data-level="5.2.2.1" id="iaencoding-iaencoder-channelaudio-downmixparameter"><span class="secno">5.2.2.1. </span><span class="content">Down-mix parameter and Loudness</span><a class="self-link" href="#iaencoding-iaencoder-channelaudio-downmixparameter"></a></h5>
   <p>This section describes how to generate down-mix parameters and loudness level for a given channel audio and a given list of channel layouts for scalability.</p>
   <p>Figure 11-2 shows a block diagram for down-mix parameter and loudness module including down-mixer.</p>
   <center><img height="387" src="images/Down-mix Parameter and Loudness.png" width="800"></center>
   <center><b>Figure 11-2. </b>IA Down-mix Parameter and Loudness</center>
   <p>For a given Channel Audio (e.g. 7.1.4ch) and a given list of channel layouts based on the Channel Audio,</p>
   <ul>
    <li data-md>
     <p>Down-mix parameter generator generates 5 down-mix parameters (α(k), β(k), γ(k), δ(k) and w(k)) by analyzing input Channel Audio, by refering <a data-link-type="biblio" href="#biblio-ai-cad-mixing">[AI-CAD-Mixing]</a>. Where, k is a frame index.</p>
     <ul>
      <li data-md>
       <p>It is composed of Audio Scene Classification module and Height Energy Quantification module as depicted in Figure 11-2.</p>
      <li data-md>
       <p>Audio Scene Classification module generates 4 parameters (α(k), β(k), γ(k), δ(k)) by classifying audio scenes of input channel audio in three modes.</p>
       <ul>
        <li data-md>
         <p>Default scene: Neither Dialog nor Effect</p>
        <li data-md>
         <p>Dialog scene: Center-channel oriented and clear dialog/voice sounds</p>
        <li data-md>
         <p>Effect scene: Directional and spatially moving sounds.</p>
       </ul>
      <li data-md>
       <p>Height Energy Quantification module generates a surround to height mixing parameter (w(k)) which is decided according to the relative energy difference between the top and surround channels of input channel audio.</p>
       <ul>
        <li data-md>
         <p>If the energy of top channels is bigger than that of surround ones, then w_idx_offset(k) is set to 1. Otherwise, it is set to -1. And, w(k) is calculated based on w_idx_offset(k) and conforms to <a href="#iadecoding">§ 6 IA Decoding Process</a>.</p>
       </ul>
     </ul>
    <li data-md>
     <p>Down-mixer generates down-mixed audios from input Channel Audio according to the list of channel layouts and the down-mix parameters, and outputs down-mixed audio for each channel layout to Loudness module.</p>
     <ul>
      <li data-md>
       <p>It is not depicted in Figure 11-2 but Down-mixer further generates <a data-link-type="dfn" href="#dmixp_mode" id="ref-for-dmixp_mode①">Dmixp_Mode</a> and <a data-link-type="dfn" href="#recon_gain" id="ref-for-recon_gain②">Recon_Gains</a> for each frame to be passed to OBU packetizer.</p>
     </ul>
    <li data-md>
     <p>Loudness module measures the loudness level (<a data-link-type="dfn" href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.1770-4-201510-I!!PDF-E.pdf#" id="termref-for-⑧④">LKFS</a>) of each down-mixed audio based on <a data-link-type="biblio" href="#biblio-itu1770-4">[ITU1770-4]</a>, and passes them to OBU packetizer.</p>
   </ul>
   <h5 class="heading settled" data-level="5.2.2.2" id="iaencoding-iaencoder-channelaudio-downmixmechanism"><span class="secno">5.2.2.2. </span><span class="content">Down-mix Mechanism</span><a class="self-link" href="#iaencoding-iaencoder-channelaudio-downmixmechanism"></a></h5>
   <p>This section describes the down-mixing mechanism to generate <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="down-mixed-audio">down-mixed audio</dfn> for IA.</p>
   <p>For a given Channel Audio which conforms to [[=loudspeaker_layout]], teh surround and top channels (if any) are separately down-mixed and especially step by step until to get a target channels.</p>
   <p>Therefore, a down-mixer based on the down-mix mechanisam for IA is a combination of following surround down-mixer(s) and top down-mixer(s) as depicted in Figure 11-3</p>
   <ul>
    <li data-md>
     <p>Surround Down-mixers: S7to5 enc., S5to3 enc., S3to2 enc., S2to1 enc.</p>
   </ul>
<pre>S7to5 enc.: Ls5 = α(k) x Lss7 + β(k) x Lrs7 and Rs5 = α(k) x Rss7 + β(k) x Rrs7.
S5to3 enc.: L3 = L5 + δ(k) x Ls5 and R3 = R5 + δ(k) x Rs5
S3to2 enc.: L2 = L3 + 0.707 x C and R2 = R3 + 0.707 x C
S2to1 enc.: Mono = 0.5 x (L2 + R2)
</pre>
   <ul>
    <li data-md>
     <p>Top Down-mixers: T4to2 enc., T2toTF2 enc.</p>
   </ul>
<pre>T4to2 enc.: Ltf2 = Ltf4 + γ(k) x Ltb4  and Rtf2 = Rtf4 + γ(k) x Rtb4.
T2toTF2 enc.: Ltf3 = Ltf2 + w(k) x δ(k) x Ls5 and Rtf3 = Rtf2 + w(k) x δ(k) x Rs5. 
</pre>
   <p>Figure 11-3 shows the down-mix mechanism.</p>
   <center><img height="373" src="images/Down-mix Mechanism.png" width="800"></center>
   <center><b>Figure 11-3. </b>IA Down-mix Mechanism</center>
<pre>For example, to get down-mixed 3.1.2ch from 7.1.4ch: 
- S3 of 3.1.2ch is generated by using S7to5 and S5to3 encs.
- TF2 of 3.1.2ch is generated by using T4to2 and T2toTF2 encs.
</pre>
   <h5 class="heading settled" data-level="5.2.2.3" id="iaencoding-iaencoder-channelaudio-channellayoutgenerationrule"><span class="secno">5.2.2.3. </span><span class="content">Channel Layout Generation Rule</span><a class="self-link" href="#iaencoding-iaencoder-channelaudio-channellayoutgenerationrule"></a></h5>
   <p>This section describes the generation rule for channel layouts.</p>
   <p>For a given channel layout (CL #n) of input Channel Audio, any list of CLs ({CL #i: i = 1, 2, ..., n}) for a scalable channel audio comforms with following rules:</p>
   <ul>
    <li data-md>
     <p>Si ≤ Si+1 and Wi ≤ Wi+1 and Ti ≤ Ti+1 except Si = Si+1 and Wi = Wi+1 and Ti = Ti+1 for i = n-1, n-2, …, 1. Where ith Channel Layout CL #i = Si.Wi.Ti.</p>
    <li data-md>
     <p>CL #i is one of <a data-link-type="dfn" href="#loudspeaker_layout" id="ref-for-loudspeaker_layout④">loudspeaker_layouts</a> supported in this specification.</p>
   </ul>
   <p>Down-mix paths, which conform to the above rule, are only allowed as depicted in Figure 11-4.</p>
   <center><img height="716" src="images/Down-mix Path.png" width="792"></center>
   <center><b>Figure 11-4. </b>IA Down-mix Path</center>
   <h5 class="heading settled" data-level="5.2.2.4" id="iaencoding-iaencoder-channelaudio-recongaingeneration"><span class="secno">5.2.2.4. </span><span class="content">Recon Gain Generation</span><a class="self-link" href="#iaencoding-iaencoder-channelaudio-recongaingeneration"></a></h5>
   <p>This section describes how to generate <a data-link-type="dfn" href="#recon_gain" id="ref-for-recon_gain③">Recon_Gain</a>.</p>
   <p>Recon_Gain needs to be applied to de-mixed channels. For this, IA encoder needs to deliver it to IA decoders.</p>
   <p>Let’s define followings:</p>
   <ul>
    <li data-md>
     <p>Level Ok is the signal power for the frame #k of a channel of the down-mixed audio for CL #i.</p>
    <li data-md>
     <p>Level Mk is the signal power for the frame #k of the relevant mixed channel of the down-mixed audio for CL #i-1.</p>
    <li data-md>
     <p>Level Dk is the signal power for the frame #k of the de-mixed channel for CL #i (after demixing).</p>
   </ul>
   <p>If 10*log10(level Ok / maxL^2) is less than the first threshold value (e.g. -80dB), Recon_Gain (k, i)  = 0. Where, maxL = 32767 for 16bits.</p>
   <p>If 10*log10(level Ok / level Mk ) is less than the second threshold value (e.g. -6dB), Recon_Gain (k, i) is set to the value which makes level Ok = Recon_Gain (k, i)^2 x level Dk. Otherwise, Recon_Gain (k, i) = 1. Actual value to be delivered is floor(255*Recon_Gain).</p>
<pre>For example, if we assume CL #i = 7.1.4ch and CL #i-1 = 5.1.2ch, then de-mixed channels are D_Lrs7, D_Rrs7, D_Ltb4 and D_Rtb4.
- D_Lrs7 and D_Rrs7 are de-mixed from Ls5 and Rs5 in the (i-1)th ChanngelGroup by using Lss7 and Rss7 in the ith ChannelGroup and its relevant demixing parameters (i.e., α(k) and β(k)) , respectively.
- D_Ltb4 and D_Rtb4 are de-mixed from Ltf2 and Rtf2 in the (i-1)th ChanngelGroup by using Ltf4 and Rtf4 in the ith ChannelGroup and its relevant demixing parameter (i.e., γ(k)), respectively.

Recon_Gain for D_Lrs7:
- Level Ok is the signal power for the frame #k of Lrs7 in the ith ChanngGroup.
- Level Mk is the signal power for the frame #k of Ls5 in the (i-1)th ChannelGroup.
- Level Dk is the signal power for the frame #k of D_Lrs7.
Recon_Gain for D_Rrs7:
- Level Ok is the signal power for the frame #k of Rrs7 in the ith ChanngGroup.
- Level Mk is the signal power for the frame #k of Rs5 in the (i-1)th ChannelGroup.
- Level Dk is the signal power for the frame #k of D_Rrs7.
Recon_Gain for D_Ltb4:
- Level Ok is the signal power for the frame #k of Ltf4 in the ith ChanngGroup.
- Level Mk is the signal power for the frame #k of Ltf2 in the (i-1)th ChannelGroup.
- Level Dk is the signal power for the frame #k of D_Ltb4.
Recon_Gain for D_Rtb4:
- Level Ok is the signal power for the frame #k of Rtf4 in the ith ChanngGroup.
- Level Mk is the signal power for the frame #k of Rtf2 in the (i-1)th ChannelGroup.
- Level Dk is the signal power for the frame #k of D_Rtb4.
</pre>
   <h5 class="heading settled" data-level="5.2.2.5" id="iaencoding-iaencoder-channelaudio-channelgroupgenerationrule"><span class="secno">5.2.2.5. </span><span class="content">ChannelGroup Generation Rule</span><a class="self-link" href="#iaencoding-iaencoder-channelaudio-channelgroupgenerationrule"></a></h5>
   <p>This section describes the generation rule for ChannelGroup.</p>
   <p>For a given Channel Audio and the list of CLs ({CL #i: i = 1, 2, ..., n}), CG Generation module outputs the transformed audio (i.e. ChannelGroups) which conforms to following rules:</p>
   <ul>
    <li data-md>
     <p>It consists of C number of channels and is structured to n number of CGs, where C is the number of channels for the Channel Audio.</p>
    <li data-md>
     <p>CG #1 (as called BCG): This CG is the down-mixed audio itself for CL #1 generated from the Channel Audio. It contains C1 number of channels.</p>
    <li data-md>
     <p>CG #i (as called DCG, i = 2, 3, …, n): This CG contains (Ci – Ci-1) number of channels. (Ci – Ci-1) channel(s) consists of as follows:</p>
     <ul>
      <li data-md>
       <p>(Si – Si-1) surround channel(s) if Si > Si-1 . When S_set = { x | Si-1 &lt; x ≤ Si and x is an integer},</p>
       <ul>
        <li data-md>
         <p>If 2 is an element of S_set, the L2 channel is contained in this CG #i.</p>
        <li data-md>
         <p>If 3 is an element of S_set, the Center channel is contained in this CG #i.</p>
        <li data-md>
         <p>If 5 is an element of S_set, the L5 and R5 channels are contained in this CG #i.</p>
        <li data-md>
         <p>If 7 is an element of S_set, the Lss7 and Rss7 channels are contained in this CG #i.</p>
       </ul>
      <li data-md>
       <p>The LFE channel if Wi > Wi-1 .</p>
      <li data-md>
       <p>(Ti – Ti-1) top channels if Ti > Ti-1 .</p>
       <ul>
        <li data-md>
         <p>If Ti-1 = 0, the top channels of the down-mixed audio for CL #i are contained in this CG #i.</p>
        <li data-md>
         <p>If Ti-1 = 2, the Ltf and Rtf channels of the down-mixed audio for CL #i are contained in this CG #i.</p>
       </ul>
     </ul>
   </ul>
   <p>Figure 15 shows one example of transformation matrix with 4 CGs (2ch/3.1.2ch/5.1.2ch/7.1.4ch).</p>
   <center><img height="261" src="images/Example of Transformation Matrix with 4 CGs.png" width="800"></center>
   <center><b>Figure 11-5. </b>Example of Transformation Matrix with 4 CGs</center>
   <h4 class="heading settled" data-level="5.2.3" id="iaencoding-iaencoder-ambisoncis-channelaudio"><span class="secno">5.2.3. </span><span class="content">IA Encoder for Ambisonics and Channel Audio format</span><a class="self-link" href="#iaencoding-iaencoder-ambisoncis-channelaudio"></a></h4>
   <p>For Ambisonics and Channel Audio format:</p>
   <ul>
    <li data-md>
     <p>One single <a data-link-type="dfn" href="#channelgroup" id="ref-for-channelgroup②">ChannelGroup</a> for Ambisonics is generated in the same way with <a href="#iaencoding-iaencoder-ambisonics">§ 5.2.1 IA Encoder for Ambisonics format</a>.</p>
    <li data-md>
     <p>One or more ChannelGroups and <a data-link-type="dfn" href="#timed-metadata" id="ref-for-timed-metadata⑥">Timed Metadata</a> for Channel Audio are generated in the same way with <a href="#iaencoding-iaencoder-ambisonics">§ 5.2.1 IA Encoder for Ambisonics format</a>.</p>
    <li data-md>
     <p><a data-link-type="dfn" href="#ia_static_meta" id="ref-for-ia_static_meta⑦">IA_Static_Meta</a> is set to as follows:</p>
     <ul>
      <li data-md>
       <p><a data-link-type="dfn" href="#ambisonics_mode" id="ref-for-ambisonics_mode⑥">Ambisonics_Mode</a> is set to according to Ambisonics mode in the same way with <a href="#iaencoding-iaencoder-ambisonics">§ 5.2.1 IA Encoder for Ambisonics format</a>.</p>
      <li data-md>
       <p><a data-link-type="dfn" href="#channel_audio_layer" id="ref-for-channel_audio_layer⑤">Channel_Audio_Layer</a> is set in the same way with <a href="#iaencoding-iaencoder-channelaudio">§ 5.2.2 IA Encoder for Channel Audio format</a>.</p>
      <li data-md>
       <p><a data-link-type="dfn" href="#ambix_layer_config" id="ref-for-ambix_layer_config①">ambix_layer_config</a> is set in the same way with <a href="#iaencoding-iaencoder-ambisonics">§ 5.2.1 IA Encoder for Ambisonics format</a>.</p>
      <li data-md>
       <p><a data-link-type="dfn" href="#channel_audio_layer_config" id="ref-for-channel_audio_layer_config①">channel_audio_layer_config</a> is set in the same way with <a href="#iaencoding-iaencoder-channelaudio">§ 5.2.2 IA Encoder for Channel Audio format</a>.</p>
     </ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#temporal-unit" id="ref-for-temporal-unit①④">Temporal Unit</a> is composed of Temporal_Delimiter_OBU, followed by OBUs for <a data-link-type="dfn" href="#timed-metadata" id="ref-for-timed-metadata⑦">Timed Metadata</a> and followed by OBUs for <a data-link-type="dfn" href="#substream" id="ref-for-substream⑦">Substreams</a>.</p>
     <ul>
      <li data-md>
       <p>OBUs for Substreams composing of ChannelGroup for Ambisonics comes first and followed by OBUs for Substreams composing of ChannelGroups for Channel Audio.</p>
     </ul>
   </ul>
   <p>Figure 12 shows IA encoding flowchart for Ambisonics and Channel Audio format with non-scalable channel audio.</p>
   <center><img height="337" src="images/IA Encoding Flowchart for Ambisonics and Channel Audio Format.png" width="745"></center>
   <center><b>Figure 12. </b>IA Encoding Flowchart for Ambisonics and Channel Audio Format</center>
   <h2 class="heading settled" data-level="6" id="iadecoding"><span class="secno">6. </span><span class="content">IA Decoding Process</span><a class="self-link" href="#iadecoding"></a></h2>
   <p>This section provides a guideline for IA decoding for a given <a data-link-type="dfn" href="#ia-bitstream" id="ref-for-ia-bitstream④">IA bitstream</a>.</p>
   <h3 class="heading settled" data-level="6.1" id="iadecoding-iadecoder"><span class="secno">6.1. </span><span class="content">IA Decoder</span><a class="self-link" href="#iadecoding-iadecoder"></a></h3>
   <p>IA decoder can selects one of three decoding modes based on <a data-link-type="dfn" href="#ambisonics_mode" id="ref-for-ambisonics_mode⑦">Ambisonics_Mode</a> and <a data-link-type="dfn" href="#channel_audio_layer" id="ref-for-channel_audio_layer⑥">Channel_Audio_Layer</a> in <a data-link-type="dfn" href="#ia_static_meta" id="ref-for-ia_static_meta⑧">IA_Static_Meta</a>.</p>
   <ul>
    <li data-md>
     <p>Ambisonics decoding in case of Ambisonics_Mode !=0 and Channel_Audio_Layer = 0.</p>
    <li data-md>
     <p>Channel Audio decoding in case of Ambisonics_Mode = 0 and Channel_Audio_Layer > 0.</p>
    <li data-md>
     <p>Ambisonics + Channel Audio decoding in case of Ambisonics_Mode != 0 and Channel_Audio_Layer > 0.</p>
   </ul>
   <p><b>Abmisonics decoding</b>, it conforms to <a data-link-type="biblio" href="#biblio-rfc8486">[RFC8486]</a> except codec specific processing and outputs Ambisonics channels in ACN (Ambisonics Channel Number) order.</p>
   <p><b>Channel Audio decoding</b>, it outputs the channel audio (e.g. 3.1.2ch or 7.1.4ch) for the target channel layout.</p>
   <p><b>Ambisonics + Channel Audio decoding</b>, it outputs both of Ambisonics channels and the channel audio for the target channel layout.</p>
   <ul>
    <li data-md>
     <p>In this case, implementors may have additional processing converting Ambisonics to Channel Audio (including Binaural) but it is not specified in this specification.</p>
   </ul>
   <p>IA decoder is composed of OBU parser, Codec decoder and Post-processor as depicted in Figure 13.</p>
   <ul>
    <li data-md>
     <p>OBU parser depacketizes <a data-link-type="dfn" href="#ia-bitstream" id="ref-for-ia-bitstream⑤">IA bitstream</a> to output one or more <a data-link-type="dfn" href="#substream" id="ref-for-substream⑧">Substreams</a> with one single <a data-link-type="dfn" href="#decoder_config" id="ref-for-decoder_config④">Decoder_Config</a>, <a data-link-type="dfn" href="#ia_static_meta" id="ref-for-ia_static_meta⑨">IA_Static_Meta</a> and <a data-link-type="dfn" href="#timed-metadata" id="ref-for-timed-metadata⑧">Timed Metadata</a>.</p>
     <ul>
      <li data-md>
       <p>OBU parser is composed of Non-timed Metadata parser and Temporal Unit parser.</p>
       <ul>
        <li data-md>
         <p>Non-timed Metadata parser depacketizes OBUs for Codec_Specific_Info and IA_Static_Meta, and figures out the configuration of IA bitstream including the codec to decoder Substreams.</p>
        <li data-md>
         <p>Temporal Unit parser depacketizes OBUs for each Temporal Unit and outputs Timed Metadata and Substreams for each frame.</p>
       </ul>
      <li data-md>
       <p>One or more Substreams with one single Decoder_Config are passed to Codec decoder.</p>
      <li data-md>
       <p>IA_Static_Meta and Timed Metadata for each frame are passed to Post-processor.</p>
      <li data-md>
       <p>For IAC-OPUS, Substream is one single <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6716#" id="termref-for-⑧⑤">opus packet</a> of <a data-link-type="biblio" href="#biblio-rfc6716">[RFC6716]</a> which has non-delimiting frame structure and for IAC-AAC-LC, Substreams is one single <a data-link-type="dfn" href="https://www.iso.org/standard/43345.html#" id="termref-for-⑧⑥">raw_data_block()</a> of <a data-link-type="biblio" href="#biblio-aac">[AAC]</a>.</p>
     </ul>
    <li data-md>
     <p>Codec decoder prepares the Mono/Stereo decoders as many as the number of Substreams. Each Mono/Stereo decoder is initialized with Decoder_Config and decodes Substream.</p>
     <ul>
      <li data-md>
       <p>Each Mono/Stereo decoder outputs one or two channels to Post-processor.</p>
     </ul>
    <li data-md>
     <p>Post-processor outputs Ambisonics and/or Channel Audio based on the decoding mode.</p>
     <ul>
      <li data-md>
       <p>Post-processor is composed of Ambiosonics processor and Channel Audio processor.</p>
      <li data-md>
       <p>Post-processor figures out the configuration of ChannelGroups based on IA_Static_Meta.</p>
      <li data-md>
       <p>Ambisonics processor outputs Ambisonics channels in ACN order by applying <a data-link-type="dfn" href="#channel_mapping" id="ref-for-channel_mapping②">Channel_Mapping</a> or <a data-link-type="dfn" href="#demixing_matrix" id="ref-for-demixing_matrix②">Demixing_Matrix</a> to the first ChannelGroup.</p>
      <li data-md>
       <p>Channel Audio processor outputs channel audio for the target channel layout after some processing of the relevant ChannelGroups by using Timed Metadata if needed.</p>
     </ul>
   </ul>
   <center><img height="252" src="images/IA Decoder Configuration.png" width="800"></center>
   <center><b>Figure 13. </b>IA Decoder Configuration</center>
   <h4 class="heading settled" data-level="6.1.1" id="iadecoding-iadecoder-ambisonics"><span class="secno">6.1.1. </span><span class="content">IA Decoder for Ambisonics decoding</span><a class="self-link" href="#iadecoding-iadecoder-ambisonics"></a></h4>
   <p>This section describes IA decoding operation for Ambisonics.</p>
   <p>Figure 14 shows the decoding flowchart of Ambisonics decoding.</p>
   <ul>
    <li data-md>
     <p>OBU parser outputs the first <a data-link-type="dfn" href="#substream" id="ref-for-substream⑨">Substreams</a>, among Substream in <a data-link-type="dfn" href="#ia-bitstream" id="ref-for-ia-bitstream⑥">IA bitstream</a>, as many as <a data-link-type="dfn" href="#substream_count" id="ref-for-substream_count③">substream_count</a> specified in <a data-link-type="dfn" href="#ambix_layer_config" id="ref-for-ambix_layer_config②">ambix_layer_config</a> of <a data-link-type="dfn" href="#ia_static_meta" id="ref-for-ia_static_meta①⓪">IA_Static_Meta</a>, with Decoder_Config.</p>
     <ul>
      <li data-md>
       <p>OBU parser outputs <a data-link-type="dfn" href="#channel_mapping" id="ref-for-channel_mapping③">channel_mapping</a> or <a data-link-type="dfn" href="#demixing_matrix" id="ref-for-demixing_matrix③">demixing_matrix</a> according to <a data-link-type="dfn" href="#ambisonics_mode" id="ref-for-ambisonics_mode⑧">Ambisonics_Mode</a> to Channel_Mapping/Demixing_Matrix module</p>
     </ul>
    <li data-md>
     <p>Codec decoder outputs channels as many as the nubmer of Substreams after decoding of each Substream.</p>
    <li data-md>
     <p>Channel_Mapping/Demixing_Matrix module applies channel_mapping or demixing_matrix according to Ambisonics_Mode to the channels (PCM) and outputs channels as many as <a data-link-type="dfn" href="#output_channel_count" id="ref-for-output_channel_count②">output_channel_count</a> in ACN order.</p>
   </ul>
   <center><img height="369" src="images/Ambisonics Decoding Flowchart.png" width="452"></center>
   <center><b>Figure 14. </b>Ambisonics Decoding Flowchart</center>
   <h4 class="heading settled" data-level="6.1.2" id="iadecoding-iadecoder-channelaudio"><span class="secno">6.1.2. </span><span class="content">IA Decoder for Channel Audio decoding</span><a class="self-link" href="#iadecoding-iadecoder-channelaudio"></a></h4>
   <p>This section describes IA decoding operation for Channe Audio.</p>
   <p>Figure 15 shows the decoding flowchart of Channel Audio decoding.</p>
   <center><img height="785" src="images/Channel Audio Decoding Flowchart.png" width="541"></center>
   <center><b>Figure 15. </b>Channel Audio Decoding Flowchart</center>
   <p>For a given target channel layout (i.e. CL #i) among the list of <a data-link-type="dfn" href="#loudspeaker_layout" id="ref-for-loudspeaker_layout⑤">loudspeaker_layout</a> in <a data-link-type="dfn" href="#ia_static_meta" id="ref-for-ia_static_meta①①">IA_Static_Meta</a>,</p>
   <ul>
    <li data-md>
     <p>OBU Parser gets Substreams for <a data-link-type="dfn" href="#channelgroup" id="ref-for-channelgroup③">ChannelGroup</a> #1 ~ ChannelGroup #i and pass them to Codec decoder with <a data-link-type="dfn" href="#decoder_config" id="ref-for-decoder_config⑤">Decoder_Config</a>.</p>
    <li data-md>
     <p>Codec decoder outputs decoded channels (PCM) in the transmission order.</p>
     <ul>
      <li data-md>
       <p>For non-scalable audio (i.e i = 1), its order is converted to the loudspeaker location order for CL #1.</p>
      <li data-md>
       <p>For scalable audio, its order is converted to the loudspeaker location order for CL #i after going through necessary modules such as Gain, De-Mixer, Recon_Gain etc..</p>
     </ul>
    <li data-md>
     <p>When Output_Gain_Is_Present_Flag(j) for ChanneGroup #j (j = 1, 2, …, i-1) is on, Gain module applies Output_Gain(j) to all audio samples of the mixed channels in the ChannelGroup #j indicated by Output_Gain_Flag(j).</p>
    <li data-md>
     <p>De-Mixer outputs de-mixed channels (PCM) for CL #i generated through de-mixing of the mixed channels from Gain module by using non-mixed channels and demixing parameters for each frame.</p>
    <li data-md>
     <p>Recon_Gain module outputs smoothed channels (PCM) by appling Recon_Gain to each frame of the de-mixed channels.</p>
    <li data-md>
     <p>Loudness normalization module outputs loudness normalized channels at -24 LKFS from non-mixed channels and smoothed channels (if present) by using loudness value for CL #i.</p>
    <li data-md>
     <p>DRC control module applies the pre-defined DRC compression to the loudness normalized channels, after that it outputs loudness normalized channels at -16 LKFS.</p>
    <li data-md>
     <p>Limiter module limits the true peak of input channels at -1dB.</p>
   </ul>
   <p>Following sections, <a href="#iadecoding-iadecoder-channelaudio-gain">§ 6.1.2.1 Gain</a>, <a href="#iadecoding-iadecoder-channelaudio-demixer">§ 6.1.2.2 De-mixer</a> and <a href="#iadecoding-iadecoder-channelaudio-recongain">§ 6.1.2.3 Recon Gain</a> are only needed for decoding of scalable audio. <a href="#iadecoding-iadecoder-channelaudio-loudness">§ 6.1.2.4 Loudness Normalization</a> and <a href="#iadecoding-iadecoder-channelaudio-drc">§ 6.1.2.5 DRC Control</a> may not be recommended according to application.</p>
   <h5 class="heading settled" data-level="6.1.2.1" id="iadecoding-iadecoder-channelaudio-gain"><span class="secno">6.1.2.1. </span><span class="content">Gain</span><a class="self-link" href="#iadecoding-iadecoder-channelaudio-gain"></a></h5>
   <p>Gain module is the mirror process of Attenuation module. It recovers the reduced sample values using Output_Gain when its flag for ChannelGroup #j is on. When its flag is off, then this module is bypassed for ChannelGroup #j. Output_Gain(j) for ChannelGroup #j is applied to all samples of the mixed channels in the ChannelGroup #j. Where, mixed channels means the mixed channels from an input channel audio (i.e. a channel audio for CL #n).</p>
   <p>To apply the gain, an implementation MUST use the following:</p>
<pre>Sample *= pow(10, Output_Gain(j) / (20.0*256))
</pre>
   <p>Where, Output_Gain(j) is the raw 16-bit value from <a data-link-type="dfn" href="#ia_static_meta" id="ref-for-ia_static_meta①②">IA_Static_Meta</a>.</p>
   <h5 class="heading settled" data-level="6.1.2.2" id="iadecoding-iadecoder-channelaudio-demixer"><span class="secno">6.1.2.2. </span><span class="content">De-mixer</span><a class="self-link" href="#iadecoding-iadecoder-channelaudio-demixer"></a></h5>
   <p>For scalable audio, some channels of <a data-link-type="dfn" href="#down-mixed-audio" id="ref-for-down-mixed-audio">down-mixed audio</a> for CL #i are delivered as is but the rest are mixed with other channels for CL #i-1.</p>
   <p>De-mixer module reconstructs the rest of the down-mixed audio for CL #i from the mixed channels, which is passed by Gain module, and its relevant non-mixed channels using its relevant demixing parameters.</p>
   <p>De-mixing for down-mixed audio for CL #i is a combination of following surround and top de-mixers:</p>
   <ul>
    <li data-md>
     <p>Surround de-mixers</p>
     <ul>
      <li data-md>
       <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="s1to2-de-mixer">S1to2 de-mixer</dfn>: R2 = 2 x Mono – L2</p>
      <li data-md>
       <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="s2to3-de-mixer">S2to3 de-mixer</dfn>: L3 = L2 – 0.707 x C and R3 = R2 – 0.707 x C</p>
      <li data-md>
       <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="s3to5-de-mixer">S3to5 de-mixer</dfn>: Ls = 1/δ(k) x (L3 – L5) and Rs = 1/δ(k) x (R3 – R5)</p>
      <li data-md>
       <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="s5to7-de-mixer">S5to7 de-mixer</dfn>: Lrs = 1/β(k) x (Ls – α(k) x Lss) and Rrs = 1/β(k) x (Rs – α(k) x Rss)</p>
     </ul>
    <li data-md>
     <p>Top de-mixers</p>
     <ul>
      <li data-md>
       <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="tf2tot2-de-mixer">TF2toT2 de-mixer</dfn>: Ltf2 = Ltf3 – w(k) x (L3 – L5) and Rtf2 = Rtf3 – w(k) x (R3 – R5)</p>
      <li data-md>
       <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="t2to4-de-mixer">T2to4 de-mixer</dfn>: Ltb = 1/γ(k) x (Ltf2 – Ltf4) and Rtb = 1/γ(k) x (Rtf2 – Rtf4)</p>
     </ul>
    <li data-md>
     <p>Where, Ltf2 / Rtf2 is top channel of x.1.2ch, Ltf3 / Rtf3 is top channel of 3.1.2ch, and Ltf4 / Rtf4 is to channel of x.1.4ch (x = 5 or 7) and w(k) is determined from the value of wIdx(k).</p>
   </ul>
   <p>Initially, wIdx(0) = 0 and the value of wIdx(k) is derived as follows:</p>
   <ul>
    <li data-md>
     <p><dfn data-dfn-type="dfn" data-noexport id="widx-k">wIdx(k)<a class="self-link" href="#widx-k"></a></dfn> = Clip3 (0, 10, wIdx(k-1) + w_idx_offset(k))</p>
    <li data-md>
     <p>Where, Clip3 (x, min, max) = max if x > max, min if x &lt; min, x otherwise.</p>
   </ul>
   <p>Mapping of wIdx(k) to w(k) is as follows:</p>
<pre class="def">wIdx(k) :   w(k)
   0    :    0
   1    :  0.0179
   2    :  0.0391
   3    :  0.0658
   4    :  0.1038
   5    :  0.25
   6    :  0.3962
   7    :  0.4342
   8    :  0.4609
   9    :  0.4821
   10    : 0.5
</pre>
   <p>When D_set = { x | S1 &lt; x ≤ Si and x is an integer},</p>
   <ul>
    <li data-md>
     <p>If 2 is an element of D_set, the combination includes <a data-link-type="dfn" href="#s1to2-de-mixer" id="ref-for-s1to2-de-mixer">S1to2 de-mixer</a>.</p>
    <li data-md>
     <p>If 3 is an element of D_set, the combination includes <a data-link-type="dfn" href="#s2to3-de-mixer" id="ref-for-s2to3-de-mixer">S2to3 de-mixer</a>.</p>
    <li data-md>
     <p>If 5 is an element of D_set, the combination includes <a data-link-type="dfn" href="#s3to5-de-mixer" id="ref-for-s3to5-de-mixer">S3to5 de-mixer</a>.</p>
    <li data-md>
     <p>If 7 is an element of D_set, the combination includes <a data-link-type="dfn" href="#s5to7-de-mixer" id="ref-for-s5to7-de-mixer">S5to7 de-mixer</a>.</p>
   </ul>
   <p>When Ti = 2,</p>
   <ul>
    <li data-md>
     <p>If Sj = 3 (j=1,2,…, i-1), the combination includes <a data-link-type="dfn" href="#tf2tot2-de-mixer" id="ref-for-tf2tot2-de-mixer">TF2toT2 de-mixer</a>.</p>
   </ul>
   <p>When Ti = 4,</p>
   <ul>
    <li data-md>
     <p>If Sj = 3 (j=1,2,…, i-1), the combination includes <a data-link-type="dfn" href="#tf2tot2-de-mixer" id="ref-for-tf2tot2-de-mixer①">TF2toT2 de-mixer</a> and <a data-link-type="dfn" href="#t2to4-de-mixer" id="ref-for-t2to4-de-mixer">T2to4 de-mixer</a>.</p>
    <li data-md>
     <p>Elseif Tj = 2 (j=1,2,…, i-1), the combination includes <a data-link-type="dfn" href="#t2to4-de-mixer" id="ref-for-t2to4-de-mixer①">T2to4 de-mixer</a>.</p>
   </ul>
   <p>For example, when CL #1 = 2ch, CL #2 = 3.1.2ch, CL #3 = 5.1.2ch and CL #4 = 7.1.4ch. To reconstruct the rest (i.e. Ls5/Rs5/Ltf/Rtf) of th down-mixed 5.1.2ch,</p>
   <ul>
    <li data-md>
     <p>The combination includes <a data-link-type="dfn" href="#s2to3-de-mixer" id="ref-for-s2to3-de-mixer①">S2to3 de-mixer</a>, <a data-link-type="dfn" href="#s3to5-de-mixer" id="ref-for-s3to5-de-mixer①">S3to5 de-mixer</a> and [=TF2toF2 de-mixer].</p>
    <li data-md>
     <p>Ls5 and Rs5 are recovered by S2to3 de-mixer and S3to5 de-mixer.</p>
    <li data-md>
     <p>Ltf and Rtf are recovered by S2to3 de-mixer and TF2toT2 de-mixer.</p>
   </ul>
<pre>Ls5 = 1/δ(k) × (L2 - 0.707 × C - L5) and Rs5 = 1/δ(k) × (R2 - 0.707 × C - R5).
Ltf = Ltf3 - w(k) x (L2 - 0.707 x C - L5) and Rtf = Rtf3 - w(k) x (R2 - 0.707 x C - R5).  
</pre>
   <h5 class="heading settled" data-level="6.1.2.3" id="iadecoding-iadecoder-channelaudio-recongain"><span class="secno">6.1.2.3. </span><span class="content">Recon Gain</span><a class="self-link" href="#iadecoding-iadecoder-channelaudio-recongain"></a></h5>
   <p><a data-link-type="dfn" href="#recon_gain" id="ref-for-recon_gain④">Recon_Gain</a> is only applied to all of audio samples of the de-mixed channels from De-mixer module.</p>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#recon_gain_info" id="ref-for-recon_gain_info②">Recon_Gain_Info</a> indicates each channel of CL #i which Recon_Gain needs to be applied to and provides Recon_Gain value for each frame of the channel.</p>
     <ul>
      <li data-md>
       <p>Sample (k,i) *= Smoothed_Recon_Gain (k,i), where k is the frame index and i is the sample index of the frame.</p>
      <li data-md>
       <p>Smoothed_Recon_Gain (k) = MA_gain (k-1) x e_window + MA_gain (k) x s_window</p>
      <li data-md>
       <p>MA_gain (k) = 2 / (N+1) x Recon_Gain (k) / 255 + (1 – 2/(N+1)) x MA_gain (k-1), where MA_gain (0) = 1.</p>
      <li data-md>
       <p>e_window[:ps – olen] = 1, e_window[ps – olen: ps] = hanning[olen:], e_window[ps:flen] = 0.</p>
      <li data-md>
       <p>s_window[:ps – olen] = 0, s_window[ps – olen: ps] = hanning[:olen], s_window[ps:flen] = 1.</p>
      <li data-md>
       <p>Where, hanning = np.hanning (2*olen), ps is the pre-skip value, flen is the frame size and olen is the overlab size.</p>
      <li data-md>
       <p>Recommend values: N = 7</p>
     </ul>
   </ul>
   <p>Figure 16 shows the smoothing scheme of <a data-link-type="dfn" href="#recon_gain" id="ref-for-recon_gain⑤">Recon_Gain</a>.</p>
   <center><img height="200" src="images/Smoothing Scheme of Recon Gain.png" width="800"></center>
   <center><b>Figure 16. </b>Smoothing Scheme of Recon Gain</center>
   <p>Recommend values for specific codecs are as follows</p>
   <ul>
    <li data-md>
     <p>IAC-OPUS: olen = 60, the pre-skip (ps) value is indicated in <a data-link-type="dfn" href="#codec_specific_info" id="ref-for-codec_specific_info⑥">Codec_Specific_Info</a> for IAC-OPUS.</p>
    <li data-md>
     <p>IAC-AAC-LC: olen = 64, ps = 720.</p>
   </ul>
   <h5 class="heading settled" data-level="6.1.2.4" id="iadecoding-iadecoder-channelaudio-loudness"><span class="secno">6.1.2.4. </span><span class="content">Loudness Normalization</span><a class="self-link" href="#iadecoding-iadecoder-channelaudio-loudness"></a></h5>
   <p>Loudness normalization is done by adjusting a loudness level to -24 LKFS based on the loudness value of the target channel layout (i.e. CL #i) which is signaled in <a data-link-type="dfn" href="#channel_audio_layer_config" id="ref-for-channel_audio_layer_config②">Channel_Audio_Layer_Config</a>.</p>
   <p>Real implementations for <a href="#iadecoding-iadecoder-channelaudio-loudness">§ 6.1.2.4 Loudness Normalization</a>, <a href="#iadecoding-iadecoder-channelaudio-drc">§ 6.1.2.5 DRC Control</a> and <a href="#iadecoding-iadecoder-channelaudio-limiter">§ 6.1.2.6 Limiter</a> are soly dependent on implementers (i.e., out of scope of this specification). This specification only recommends the principles for them.</p>
   <h5 class="heading settled" data-level="6.1.2.5" id="iadecoding-iadecoder-channelaudio-drc"><span class="secno">6.1.2.5. </span><span class="content">DRC Control</span><a class="self-link" href="#iadecoding-iadecoder-channelaudio-drc"></a></h5>
   <p>In this specification, DRC Control assumes an input loudness of -24 LKFS and targets an output loudness of -16 LKFS.</p>
   <p>DRC Control module applies the pre-defined DRC compression by assuming a target loudness is adjusted to -16 LKFS as follows:</p>
   <ul>
    <li data-md>
     <p>DRC Segment 0</p>
     <ul>
      <li data-md>
       <p>Threshold: not applicable</p>
      <li data-md>
       <p>Ratio: 1:1</p>
      <li data-md>
       <p>Type: Neutral</p>
     </ul>
    <li data-md>
     <p>DRC Segment 1</p>
     <ul>
      <li data-md>
       <p>Threshold: -16.5 dBFS</p>
      <li data-md>
       <p>Ratio: 1.5:1</p>
      <li data-md>
       <p>Type: Compressor</p>
     </ul>
    <li data-md>
     <p>DRC Segment 2</p>
     <ul>
      <li data-md>
       <p>Threshold: -9 dBFS</p>
      <li data-md>
       <p>Ratio: 2:1</p>
      <li data-md>
       <p>Type: Compressor</p>
     </ul>
    <li data-md>
     <p>DRC Segment 3</p>
     <ul>
      <li data-md>
       <p>Threshold: -6 dBFS</p>
      <li data-md>
       <p>Ratio: 3:1</p>
      <li data-md>
       <p>Type: Compressor</p>
     </ul>
   </ul>
   <p>Figure 17 shows the schematic diagram of the pre-defined DRC compression.</p>
   <center><img height="673" src="images/Pre-defined DRC Compression Scheme.png" width="800"></center>
   <center><b>Figure 17. </b>Pre-defined DRC Compression Scheme</center>
   <p>The below is the equation that represents the compressor scheme of Figure 17.</p>
<pre>Y = D_T(i) + (X - T(i)) / R(i). Where,
X ∈ Seg(i) and D_T (i) = T(0) + ∑ ((T(k+1) - T(k)) / R(k)) (k = 0 to i-1).	
Seg(i): ith Segment
 T(i) : Threshold vlaue in dBFS for Seg(i), where T(0) = -96.33
 R(i) : Ratio value for Seg(i)
D_T(i): Threshold value in dBFS for Seg(i) after DRC compression, where D_T(0) = T(0)
  X   : Input sample value in dBFS
  Y   : Output sample value in dBFS
</pre>
   <h5 class="heading settled" data-level="6.1.2.6" id="iadecoding-iadecoder-channelaudio-limiter"><span class="secno">6.1.2.6. </span><span class="content">Limiter</span><a class="self-link" href="#iadecoding-iadecoder-channelaudio-limiter"></a></h5>
   <p>This module limits the true peak of input signal at -1dB. The definition of thr true peak is base on <a data-link-type="biblio" href="#biblio-itu1770-4">[ITU1770-4]</a>.</p>
   <p>Below is a recommended loudness normalization and DRC control principle according to application.</p>
   <ul>
    <li data-md>
     <p>For AV application, it only applies Limiter at -1dBTP.</p>
    <li data-md>
     <p>For TV application, it only applies Loudness normalization at -24LKFS and Limiter at -1dBTP.</p>
    <li data-md>
     <p>For Mobile application, it applies Loudness normalization at -24LKFS, the pre-defined DRC control and adjusting of target loudness at -16 LKFS, and Limiter at -1dBTP.</p>
   </ul>
   <p class="note" role="note"><span>NOTE:</span> The definitions of AV, TV and Mobile applications are as follows:
.AV application: Sound devices with external speakers such as Soundbar, AV receiver, HiFi speaker etc..
.TV application: Television with built-in speakers such as LCD/OLED slim TV.
.Mobile application: Handheld devices with built-in speakers such as smartphone, tablet etc..</p>
   <h4 class="heading settled" data-level="6.1.3" id="iadecoding-iadecoder-ambisonics-channelaudio"><span class="secno">6.1.3. </span><span class="content">IA Decoder for Ambisonics and Channel Audio decoding</span><a class="self-link" href="#iadecoding-iadecoder-ambisonics-channelaudio"></a></h4>
   <p>Ambisonics and Channel Audio decoding is a simple parallel processing of both Ambisoncis decoding and Channel Audio decoding which are described in <a href="#iadecoding-iadecoder-ambisonics">§ 6.1.1 IA Decoder for Ambisonics decoding</a> and <a href="#iadecoding-iadecoder-channelaudio">§ 6.1.2 IA Decoder for Channel Audio decoding</a>, respectively.</p>
   <h3 class="heading settled" data-level="6.2" id="iadecoding-downmixmatrix"><span class="secno">6.2. </span><span class="content">Down-mix Matrix (Static)</span><a class="self-link" href="#iadecoding-downmixmatrix"></a></h3>
   <p>This section provides static down-mix matrices to stereo and 3.1.2ch.</p>
   <p>IAC players need to support any valid channel layout, even if the number of channels does not match the physically connected audio hardware. Players needs to perform channel mixing to increase or reduce the number of channels as needed.</p>
   <p>Implementations can use the matrices in Figure 18 to Figure 24 to implement down-mixing from output channel audio, which are known to give acceptable results for stereo and 3.1.2ch.</p>
   <p>For down-mixing to stereo, both sub-woofer and top channels are discarded during down-mixing. Therefore surround channels are only down-mixed and it only defines three down-mixing matrices, 3.x.x to stereo, 5.x.x to stereo and 7.x.x to stereo. Matrix for 3 channels is normalized so each coefficient row sums to 1 to avoid clipping. For 5 or more channels, they are normalized to 2 as a compromise between clipping and dynamic range reduction.</p>
   <center><img height="135" src="images/Stereo Down-mix Matrix for 3.x.x ch.png" width="634"></center>
   <center><b>Figure 18. </b>Stereo Down-mix matrix for 3.x.x ch</center>
   <center><img height="230" src="images/Stereo Down-mix Matrix for 5.x.x ch.png" width="800"></center>
   <center><b>Figure 19. </b>Stereo Down-mix matrix for 5.x.x ch</center>
   <center><img height="274" src="images/Stereo Down-mix Matrix for 7.x.x ch.png" width="800"></center>
   <center><b>Figure 20. </b>Stereo Down-mix matrix for 7.x.x ch</center>
   <p>Figure 21 to Figure 24 show static down-mix matrices to 3.1.2ch.</p>
   <center><img height="359" src="images/3.1.2ch Down-mix Matrix for 5.1.2ch.png" width="774"></center>
   <center><b>Figure 21. </b>3.1.2ch Down-mix matrix for 5.1.2ch</center>
   <center><img height="415" src="images/3.1.2ch Down-mix Matrix for 5.1.4ch.png" width="800"></center>
   <center><b>Figure 22. </b>3.1.2ch Down-mix matrix for 5.1.4ch</center>
   <center><img height="314" src="images/3.1.2ch Down-mix Matrix for 7.1.2ch.png" width="800"></center>
   <center><b>Figure 23. </b>3.1.2ch Down-mix matrix for 7.1.2ch</center>
   <center><img height="338" src="images/3.1.2ch Down-mix Matrix for 7.1.4ch.png" width="800"></center>
   <center><b>Figure 24. </b>3.1.2ch Down-mix matrix for 7.1.4ch</center>
   <p>Where, p1 = 0.707 and p2 = 0.3535</p>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <p> Conformance requirements are expressed with a combination of descriptive assertions and RFC 2119 terminology.
            The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
            in the normative parts of this document
            are to be interpreted as described in RFC 2119.
            However, for readability,
            these words do not appear in all uppercase letters in this specification. </p>
   <p> All of the text of this specification is normative
            except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a> </p>
   <p> Examples in this specification are introduced with the words “for example”
            or are set apart from the normative text with <code>class="example"</code>, like this: </p>
   <div class="example" id="example-example"><a class="self-link" href="#example-example"></a> This is an example of an informative example. </div>
   <p> Informative notes begin with the word “Note”
            and are set apart from the normative text with <code>class="note"</code>, like this: </p>
   <p class="note" role="note"> Note, this is an informative note.</p>
  </div>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">←</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">→</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">↑</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Don’t scroll to compensate for the ToC if we’re above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I don’t know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldn’t exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isn’t standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we don’t have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While we’re at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Can’t find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#312ch">3.1.2ch</a><span>, in § 2.2.9</span>
   <li><a href="#512ch">5.1.2ch</a><span>, in § 2.2.9</span>
   <li><a href="#514ch">5.1.4ch</a><span>, in § 2.2.9</span>
   <li><a href="#51ch">5.1ch</a><span>, in § 2.2.9</span>
   <li><a href="#712ch">7.1.2ch</a><span>, in § 2.2.9</span>
   <li><a href="#714ch">7.1.4ch</a><span>, in § 2.2.9</span>
   <li><a href="#71ch">7.1ch</a><span>, in § 2.2.9</span>
   <li><a href="#aa">AA</a><span>, in § 3.7</span>
   <li><a href="#admi">admi</a><span>, in § 3.5.1</span>
   <li>
    aiac
    <ul>
     <li><a href="#valdef-iasampleentry-aiac">value for IASampleEntry</a><span>, in § 3.2.1</span>
     <li><a href="#valdef-isobmff-brand-aiac">value for ISOBMFF Brand</a><span>, in § 3.1</span>
    </ul>
   <li><a href="#alpha">alpha</a><span>, in § 2.2.11</span>
   <li><a href="#ambisonics_channel_count">ambisonics_channel_count</a><span>, in § 3.2.4</span>
   <li><a href="#ambisonics_mode">ambisonics_mode</a><span>, in § 2.2.7</span>
   <li><a href="#ambix_layer_config">ambix_layer_config</a><span>, in § 2.2.8</span>
   <li><a href="#beta">beta</a><span>, in § 2.2.11</span>
   <li><a href="#cc">CC</a><span>, in § 3.7</span>
   <li><a href="#channel_audio_layer">channel_audio_layer</a><span>, in § 2.2.7</span>
   <li><a href="#channel_audio_layer_config">channel_audio_layer_config</a><span>, in § 2.2.9</span>
   <li><a href="#channelgroup">ChannelGroup</a><span>, in § 2</span>
   <li><a href="#channel_mapping">channel_mapping</a><span>, in § 2.2.8</span>
   <li><a href="#codec_id">codec_id</a><span>, in § 2.2.6</span>
   <li><a href="#codec-specific-box">codec specific box</a><span>, in § 3.3</span>
   <li><a href="#codec_specific_info">Codec_Specific_Info</a><span>, in § 2</span>
   <li><a href="#codec_specific_info_obu">codec_specific_info_obu</a><span>, in § 2.2.6</span>
   <li><a href="#coupled-channels">Coupled channels</a><span>, in § 5.2</span>
   <li><a href="#coupled-substream">coupled Substream</a><span>, in § 2.2.8</span>
   <li><a href="#coupled_substream_count">coupled_substream_count</a><span>, in § 2.2.8</span>
   <li><a href="#decoder_config">decoder_config</a><span>, in § 2.2.6</span>
   <li><a href="#delta">delta</a><span>, in § 2.2.11</span>
   <li><a href="#demixing_info">demixing_info</a><span>, in § 2.2.11</span>
   <li><a href="#demixing_matrix">demixing_matrix</a><span>, in § 2.2.8</span>
   <li><a href="#dmixp_mode">dmixp_mode</a><span>, in § 2.2.11</span>
   <li><a href="#dops">dOps</a><span>, in § 3.3.1.1</span>
   <li><a href="#down-mixed-audio">down-mixed audio</a><span>, in § 5.2.2.2</span>
   <li><a href="#drop_obu">drop_obu( )</a><span>, in § 2.2</span>
   <li><a href="#esds">esds</a><span>, in § 3.3.2.1</span>
   <li><a href="#gamma">gamma</a><span>, in § 2.2.11</span>
   <li><a href="#ia-bitstream">IA bitstream</a><span>, in § 1</span>
   <li><a href="#iac">IAC</a><span>, in § 1</span>
   <li><a href="#ia_coded_data">IA_Coded_Data</a><span>, in § 2</span>
   <li><a href="#ia-frame">IA Frame</a><span>, in § 2</span>
   <li><a href="#ia-sample">IA Sample</a><span>, in § 3.4</span>
   <li><a href="#iasampleentry">IASampleEntry</a><span>, in § 3.2.2</span>
   <li><a href="#iasm">iasm</a><span>, in § 3.5.2</span>
   <li><a href="#ia_static_meta">IA_Static_Meta</a><span>, in § 2</span>
   <li><a href="#l">L</a><span>, in § 3.7</span>
   <li><a href="#l-cc">L(CC)*</a><span>, in § 3.7</span>
   <li><a href="#loudness">loudness</a><span>, in § 2.2.9</span>
   <li><a href="#loudspeaker_layout">loudspeaker_layout</a><span>, in § 2.2.9</span>
   <li><a href="#non-coupled-substream">non-coupled Substream</a><span>, in § 5.2</span>
   <li><a href="#non-timed-metadata">Non-timed Metadata</a><span>, in § 2</span>
   <li><a href="#obu">OBU</a><span>, in § 2.2</span>
   <li><a href="#obu_forbidden_bit">obu_forbidden_bit</a><span>, in § 2.2.2</span>
   <li><a href="#obu_has_size_field">obu_has_size_field</a><span>, in § 2.2.2</span>
   <li><a href="#obu_reserved_1bit">obu_reserved_1bit</a><span>, in § 2.2.2</span>
   <li><a href="#obu_size">obu_size</a><span>, in § 2.2.1</span>
   <li><a href="#obu_type">obu_type</a><span>, in § 2.2.2</span>
   <li><a href="#output_channel_count">output_channel_count</a><span>, in § 2.2.8</span>
   <li><a href="#output_gain">output_gain</a><span>, in § 2.2.9</span>
   <li><a href="#output_gain_flags">output_gain_flags</a><span>, in § 2.2.9</span>
   <li><a href="#output_gain_is_present_flag">output_gain_is_present_flag</a><span>, in § 2.2.9</span>
   <li><a href="#recon_gain">recon_gain</a><span>, in § 2.2.12</span>
   <li><a href="#recon_gain_flags">recon_gain_flags</a><span>, in § 2.2.12</span>
   <li><a href="#recon_gain_flalgs">recon_gain_flalgs</a><span>, in § 2.2.12</span>
   <li><a href="#recon_gain_info">recon_gain_info</a><span>, in § 2.2.12</span>
   <li><a href="#recon_gain_is_present_flag">recon_gain_is_present_flag</a><span>, in § 2.2.9</span>
   <li><a href="#s1to2-de-mixer">S1to2 de-mixer</a><span>, in § 6.1.2.2</span>
   <li><a href="#s2to3-de-mixer">S2to3 de-mixer</a><span>, in § 6.1.2.2</span>
   <li><a href="#s3to5-de-mixer">S3to5 de-mixer</a><span>, in § 6.1.2.2</span>
   <li><a href="#s5to7-de-mixer">S5to7 de-mixer</a><span>, in § 6.1.2.2</span>
   <li><a href="#seeniabitstream">SeenIABitstream</a><span>, in § 2.2.5</span>
   <li><a href="#stereo">Stereo</a><span>, in § 2.2.9</span>
   <li><a href="#substream">Substream</a><span>, in § 2</span>
   <li><a href="#substream_count">substream_count</a><span>, in § 2.2.8</span>
   <li><a href="#t2to4-de-mixer">T2to4 de-mixer</a><span>, in § 6.1.2.2</span>
   <li><a href="#temporal-unit">Temporal Unit</a><span>, in § 2</span>
   <li><a href="#tf2tot2-de-mixer">TF2toT2 de-mixer</a><span>, in § 6.1.2.2</span>
   <li><a href="#timed-metadata">Timed Metadata</a><span>, in § 2</span>
   <li><a href="#v">V</a><span>, in § 3.7</span>
   <li><a href="#version">version</a><span>, in § 2.2.7</span>
   <li><a href="#w">w</a><span>, in § 2.2.11</span>
   <li><a href="#widx-k">wIdx(k)</a><span>, in § 6.1.2.2</span>
   <li><a href="#w_idx_offset">w_idx_offset</a><span>, in § 2.2.11</span>
   <li><a href="#zero_bit">zero_bit</a><span>, in § 2.2.3</span>
  </ul>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/43345.html#">https://www.iso.org/standard/43345.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.2. IAC-AAC-LC Specific</a>
    <li><a href="#termref-for-">2.2.13. Substream OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">3.3.2.3. Syntax</a>
    <li><a href="#termref-for-">6.1. IA Decoder</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/43345.html#">https://www.iso.org/standard/43345.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.2. IAC-AAC-LC Specific</a>
    <li><a href="#termref-for-">2.2.13. Substream OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">3.3.2.3. Syntax</a>
    <li><a href="#termref-for-">6.1. IA Decoder</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/68960.html#">https://www.iso.org/standard/68960.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">3.1. General Requirements &amp; Brands</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">3.2.4. Semantics</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">3.5.1. Demixing Info Sample Group ## {#iasamplegroup-demixing}</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">3.5.2. IA Static Meta Sample Group ## {#iasamplegroup-iastaticmeta}</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/68960.html#">https://www.iso.org/standard/68960.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">3.1. General Requirements &amp; Brands</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">3.2.4. Semantics</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">3.5.1. Demixing Info Sample Group ## {#iasamplegroup-demixing}</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">3.5.2. IA Static Meta Sample Group ## {#iasamplegroup-iastaticmeta}</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/68960.html#">https://www.iso.org/standard/68960.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">3.1. General Requirements &amp; Brands</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">3.2.4. Semantics</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">3.5.1. Demixing Info Sample Group ## {#iasamplegroup-demixing}</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">3.5.2. IA Static Meta Sample Group ## {#iasamplegroup-iastaticmeta}</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/68960.html#">https://www.iso.org/standard/68960.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">3.1. General Requirements &amp; Brands</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">3.2.4. Semantics</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">3.5.1. Demixing Info Sample Group ## {#iasamplegroup-demixing}</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">3.5.2. IA Static Meta Sample Group ## {#iasamplegroup-iastaticmeta}</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/68960.html#">https://www.iso.org/standard/68960.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">3.1. General Requirements &amp; Brands</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">3.2.4. Semantics</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">3.5.1. Demixing Info Sample Group ## {#iasamplegroup-demixing}</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">3.5.2. IA Static Meta Sample Group ## {#iasamplegroup-iastaticmeta}</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/68960.html#">https://www.iso.org/standard/68960.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">3.1. General Requirements &amp; Brands</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">3.2.4. Semantics</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">3.5.1. Demixing Info Sample Group ## {#iasamplegroup-demixing}</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">3.5.2. IA Static Meta Sample Group ## {#iasamplegroup-iastaticmeta}</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/68960.html#">https://www.iso.org/standard/68960.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">3.1. General Requirements &amp; Brands</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">3.2.4. Semantics</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">3.5.1. Demixing Info Sample Group ## {#iasamplegroup-demixing}</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">3.5.2. IA Static Meta Sample Group ## {#iasamplegroup-iastaticmeta}</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/68960.html#">https://www.iso.org/standard/68960.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">3.1. General Requirements &amp; Brands</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">3.2.4. Semantics</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">3.5.1. Demixing Info Sample Group ## {#iasamplegroup-demixing}</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">3.5.2. IA Static Meta Sample Group ## {#iasamplegroup-iastaticmeta}</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.1770-4-201510-I!!PDF-E.pdf#">https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.1770-4-201510-I!!PDF-E.pdf#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.2.9. Channel Audio Layer Config Syntax and Semantics</a>
    <li><a href="#termref-for-">5.2.2. IA Encoder for Channel Audio format</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">5.2.2.1. Down-mix parameter and Loudness</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#">https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.2.9. Channel Audio Layer Config Syntax and Semantics</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a> <a href="#termref-for-">(6)</a> <a href="#termref-for-">(7)</a> <a href="#termref-for-">(8)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#">https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.2.9. Channel Audio Layer Config Syntax and Semantics</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a> <a href="#termref-for-">(6)</a> <a href="#termref-for-">(7)</a> <a href="#termref-for-">(8)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#">https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.2.9. Channel Audio Layer Config Syntax and Semantics</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a> <a href="#termref-for-">(6)</a> <a href="#termref-for-">(7)</a> <a href="#termref-for-">(8)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#">https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.2.9. Channel Audio Layer Config Syntax and Semantics</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a> <a href="#termref-for-">(6)</a> <a href="#termref-for-">(7)</a> <a href="#termref-for-">(8)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#">https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.2.9. Channel Audio Layer Config Syntax and Semantics</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a> <a href="#termref-for-">(6)</a> <a href="#termref-for-">(7)</a> <a href="#termref-for-">(8)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#">https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.2.9. Channel Audio Layer Config Syntax and Semantics</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a> <a href="#termref-for-">(6)</a> <a href="#termref-for-">(7)</a> <a href="#termref-for-">(8)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/79110.html#">https://www.iso.org/standard/79110.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.2. IAC-AAC-LC Specific</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">3.3.2. MP4A Specific Box</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.2.3. Syntax</a>
    <li><a href="#termref-for-">4. IAC Decapsulation Process</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/79110.html#">https://www.iso.org/standard/79110.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.2. IAC-AAC-LC Specific</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">3.3.2. MP4A Specific Box</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.2.3. Syntax</a>
    <li><a href="#termref-for-">4. IAC Decapsulation Process</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/79110.html#">https://www.iso.org/standard/79110.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.2. IAC-AAC-LC Specific</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">3.3.2. MP4A Specific Box</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.2.3. Syntax</a>
    <li><a href="#termref-for-">4. IAC Decapsulation Process</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/76383.html#">https://www.iso.org/standard/76383.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.2. IAC-AAC-LC Specific</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a> <a href="#termref-for-">(6)</a> <a href="#termref-for-">(7)</a> <a href="#termref-for-">(8)</a>
    <li><a href="#termref-for-">3.3.2.4. Semantics</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/76383.html#">https://www.iso.org/standard/76383.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.2. IAC-AAC-LC Specific</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a> <a href="#termref-for-">(6)</a> <a href="#termref-for-">(7)</a> <a href="#termref-for-">(8)</a>
    <li><a href="#termref-for-">3.3.2.4. Semantics</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/76383.html#">https://www.iso.org/standard/76383.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.2. IAC-AAC-LC Specific</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a> <a href="#termref-for-">(6)</a> <a href="#termref-for-">(7)</a> <a href="#termref-for-">(8)</a>
    <li><a href="#termref-for-">3.3.2.4. Semantics</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/76383.html#">https://www.iso.org/standard/76383.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.2. IAC-AAC-LC Specific</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a> <a href="#termref-for-">(6)</a> <a href="#termref-for-">(7)</a> <a href="#termref-for-">(8)</a>
    <li><a href="#termref-for-">3.3.2.4. Semantics</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/76383.html#">https://www.iso.org/standard/76383.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.2. IAC-AAC-LC Specific</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a> <a href="#termref-for-">(6)</a> <a href="#termref-for-">(7)</a> <a href="#termref-for-">(8)</a>
    <li><a href="#termref-for-">3.3.2.4. Semantics</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/76383.html#">https://www.iso.org/standard/76383.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.2. IAC-AAC-LC Specific</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a> <a href="#termref-for-">(6)</a> <a href="#termref-for-">(7)</a> <a href="#termref-for-">(8)</a>
    <li><a href="#termref-for-">3.3.2.4. Semantics</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/76383.html#">https://www.iso.org/standard/76383.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.2. IAC-AAC-LC Specific</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a> <a href="#termref-for-">(6)</a> <a href="#termref-for-">(7)</a> <a href="#termref-for-">(8)</a>
    <li><a href="#termref-for-">3.3.2.4. Semantics</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/55688.html#">https://www.iso.org/standard/55688.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.2. IAC-AAC-LC Specific</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a>
    <li><a href="#termref-for-">4. IAC Decapsulation Process</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/55688.html#">https://www.iso.org/standard/55688.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.2. IAC-AAC-LC Specific</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a>
    <li><a href="#termref-for-">4. IAC Decapsulation Process</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/55688.html#">https://www.iso.org/standard/55688.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.2. IAC-AAC-LC Specific</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a>
    <li><a href="#termref-for-">4. IAC Decapsulation Process</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/55688.html#">https://www.iso.org/standard/55688.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.2. IAC-AAC-LC Specific</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a>
    <li><a href="#termref-for-">4. IAC Decapsulation Process</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://www.iso.org/standard/55688.html#">https://www.iso.org/standard/55688.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.2. IAC-AAC-LC Specific</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a>
    <li><a href="#termref-for-">4. IAC Decapsulation Process</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://opus-codec.org/docs/opus_in_isobmff.html#">https://opus-codec.org/docs/opus_in_isobmff.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.1. IAC-OPUS Specific</a>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">2.2.8. Ambisonics Layer Config Syntax and Semantics</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">3.3.1. OPUS Specific Box</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.1.3. Syntax</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.1.4. Semantics</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">4. IAC Decapsulation Process</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a>
    <li><a href="#termref-for-">5.1. Input Audio Format</a>
    <li><a href="#termref-for-">5.2. IA Encoder</a>
    <li><a href="#termref-for-">5.2.1. IA Encoder for Ambisonics format</a> <a href="#termref-for-">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://opus-codec.org/docs/opus_in_isobmff.html#">https://opus-codec.org/docs/opus_in_isobmff.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.1. IAC-OPUS Specific</a>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">2.2.8. Ambisonics Layer Config Syntax and Semantics</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">3.3.1. OPUS Specific Box</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.1.3. Syntax</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.1.4. Semantics</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">4. IAC Decapsulation Process</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a>
    <li><a href="#termref-for-">5.1. Input Audio Format</a>
    <li><a href="#termref-for-">5.2. IA Encoder</a>
    <li><a href="#termref-for-">5.2.1. IA Encoder for Ambisonics format</a> <a href="#termref-for-">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://opus-codec.org/docs/opus_in_isobmff.html#">https://opus-codec.org/docs/opus_in_isobmff.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.1. IAC-OPUS Specific</a>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">2.2.8. Ambisonics Layer Config Syntax and Semantics</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">3.3.1. OPUS Specific Box</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.1.3. Syntax</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.1.4. Semantics</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">4. IAC Decapsulation Process</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a>
    <li><a href="#termref-for-">5.1. Input Audio Format</a>
    <li><a href="#termref-for-">5.2. IA Encoder</a>
    <li><a href="#termref-for-">5.2.1. IA Encoder for Ambisonics format</a> <a href="#termref-for-">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://opus-codec.org/docs/opus_in_isobmff.html#">https://opus-codec.org/docs/opus_in_isobmff.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.1. IAC-OPUS Specific</a>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">2.2.8. Ambisonics Layer Config Syntax and Semantics</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">3.3.1. OPUS Specific Box</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.1.3. Syntax</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.1.4. Semantics</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">4. IAC Decapsulation Process</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a>
    <li><a href="#termref-for-">5.1. Input Audio Format</a>
    <li><a href="#termref-for-">5.2. IA Encoder</a>
    <li><a href="#termref-for-">5.2.1. IA Encoder for Ambisonics format</a> <a href="#termref-for-">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://opus-codec.org/docs/opus_in_isobmff.html#">https://opus-codec.org/docs/opus_in_isobmff.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.1. IAC-OPUS Specific</a>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">2.2.8. Ambisonics Layer Config Syntax and Semantics</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">3.3.1. OPUS Specific Box</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.1.3. Syntax</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.1.4. Semantics</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">4. IAC Decapsulation Process</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a>
    <li><a href="#termref-for-">5.1. Input Audio Format</a>
    <li><a href="#termref-for-">5.2. IA Encoder</a>
    <li><a href="#termref-for-">5.2.1. IA Encoder for Ambisonics format</a> <a href="#termref-for-">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://opus-codec.org/docs/opus_in_isobmff.html#">https://opus-codec.org/docs/opus_in_isobmff.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.1. IAC-OPUS Specific</a>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">2.2.8. Ambisonics Layer Config Syntax and Semantics</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">3.3.1. OPUS Specific Box</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.1.3. Syntax</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.1.4. Semantics</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">4. IAC Decapsulation Process</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a>
    <li><a href="#termref-for-">5.1. Input Audio Format</a>
    <li><a href="#termref-for-">5.2. IA Encoder</a>
    <li><a href="#termref-for-">5.2.1. IA Encoder for Ambisonics format</a> <a href="#termref-for-">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://opus-codec.org/docs/opus_in_isobmff.html#">https://opus-codec.org/docs/opus_in_isobmff.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.1. IAC-OPUS Specific</a>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">2.2.8. Ambisonics Layer Config Syntax and Semantics</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">3.3.1. OPUS Specific Box</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.1.3. Syntax</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.1.4. Semantics</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">4. IAC Decapsulation Process</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a>
    <li><a href="#termref-for-">5.1. Input Audio Format</a>
    <li><a href="#termref-for-">5.2. IA Encoder</a>
    <li><a href="#termref-for-">5.2.1. IA Encoder for Ambisonics format</a> <a href="#termref-for-">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://opus-codec.org/docs/opus_in_isobmff.html#">https://opus-codec.org/docs/opus_in_isobmff.html#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.1. IAC-OPUS Specific</a>
    <li><a href="#termref-for-">2.2.6. Codec Specific Info OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">2.2.8. Ambisonics Layer Config Syntax and Semantics</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">3.3.1. OPUS Specific Box</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.1.3. Syntax</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a>
    <li><a href="#termref-for-">3.3.1.4. Semantics</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a>
    <li><a href="#termref-for-">4. IAC Decapsulation Process</a> <a href="#termref-for-">(2)</a> <a href="#termref-for-">(3)</a> <a href="#termref-for-">(4)</a> <a href="#termref-for-">(5)</a>
    <li><a href="#termref-for-">5.1. Input Audio Format</a>
    <li><a href="#termref-for-">5.2. IA Encoder</a>
    <li><a href="#termref-for-">5.2.1. IA Encoder for Ambisonics format</a> <a href="#termref-for-">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://tools.ietf.org/html/rfc6381#">https://tools.ietf.org/html/rfc6381#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">3.7. Codecs Parameter String</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://tools.ietf.org/html/rfc6716#">https://tools.ietf.org/html/rfc6716#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.1. IAC-OPUS Specific</a>
    <li><a href="#termref-for-">2.2.13. Substream OBU Syntax and Semantics</a>
    <li><a href="#termref-for-">3.3.1.4. Semantics</a>
    <li><a href="#termref-for-">6.1. IA Decoder</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://tools.ietf.org/html/rfc7845#">https://tools.ietf.org/html/rfc7845#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.1. IAC-OPUS Specific</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">4. IAC Decapsulation Process</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://tools.ietf.org/html/rfc7845#">https://tools.ietf.org/html/rfc7845#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.1. IAC-OPUS Specific</a> <a href="#termref-for-">(2)</a>
    <li><a href="#termref-for-">4. IAC Decapsulation Process</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-">
   <a href="https://tools.ietf.org/html/rfc8486#">https://tools.ietf.org/html/rfc8486#</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.1.1. IAC-OPUS Specific</a>
    <li><a href="#termref-for-">2.2.8. Ambisonics Layer Config Syntax and Semantics</a>
   </ul>
  </aside>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[AAC]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-">low complexity profile</span>
     <li><span class="dfn-paneled" id="term-for-①">raw_data_block()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ISOBMFF]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-②">boxtype</span>
     <li><span class="dfn-paneled" id="term-for-③">channelcount</span>
     <li><span class="dfn-paneled" id="term-for-④">grouping_type</span>
     <li><span class="dfn-paneled" id="term-for-⑤">iso6</span>
     <li><span class="dfn-paneled" id="term-for-⑥">samplegroupdescriptionentry</span>
     <li><span class="dfn-paneled" id="term-for-⑦">samplerate</span>
     <li><span class="dfn-paneled" id="term-for-⑧">sbgp</span>
     <li><span class="dfn-paneled" id="term-for-⑨">sgpd</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ITU1770-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-①⓪">lkfs</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ITU2051-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-①①">loudspeaker configuration for sound system a (0+2+0)</span>
     <li><span class="dfn-paneled" id="term-for-①②">loudspeaker configuration for sound system b (0+5+0)</span>
     <li><span class="dfn-paneled" id="term-for-①③">loudspeaker configuration for sound system c (2+5+0)</span>
     <li><span class="dfn-paneled" id="term-for-①④">loudspeaker configuration for sound system d (4+5+0)</span>
     <li><span class="dfn-paneled" id="term-for-①⑤">loudspeaker configuration for sound system i (0+7+0)</span>
     <li><span class="dfn-paneled" id="term-for-①⑥">loudspeaker configuration for sound system j (4+7+0)</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MP4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-①⑦">esdbox</span>
     <li><span class="dfn-paneled" id="term-for-①⑧">esds</span>
     <li><span class="dfn-paneled" id="term-for-①⑨">mp4a</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MP4-Audio]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-②⓪">audioobjecttype</span>
     <li><span class="dfn-paneled" id="term-for-②①">audiospecificconfig()</span>
     <li><span class="dfn-paneled" id="term-for-②②">channelconfiguration</span>
     <li><span class="dfn-paneled" id="term-for-②③">dependsoncorecoder</span>
     <li><span class="dfn-paneled" id="term-for-②④">extensionflag</span>
     <li><span class="dfn-paneled" id="term-for-②⑤">framelengthflag</span>
     <li><span class="dfn-paneled" id="term-for-②⑥">gaspecificconfig()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MP4-Systems]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-②⑦">decoderconfigdescriptor()</span>
     <li><span class="dfn-paneled" id="term-for-②⑧">decspecificinfo()</span>
     <li><span class="dfn-paneled" id="term-for-②⑨">objecttypeindication</span>
     <li><span class="dfn-paneled" id="term-for-③⓪">streamtype</span>
     <li><span class="dfn-paneled" id="term-for-③①">upstream</span>
    </ul>
   <li>
    <a data-link-type="biblio">[OPUS-IN-ISOBMFF]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-③②">channelmappingfamily</span>
     <li><span class="dfn-paneled" id="term-for-③③">dops</span>
     <li><span class="dfn-paneled" id="term-for-③④">inputsamplerate</span>
     <li><span class="dfn-paneled" id="term-for-③⑤">opus</span>
     <li><span class="dfn-paneled" id="term-for-③⑥">opusspecificbox</span>
     <li><span class="dfn-paneled" id="term-for-③⑦">outputchannelcount</span>
     <li><span class="dfn-paneled" id="term-for-③⑧">outputgain</span>
     <li><span class="dfn-paneled" id="term-for-③⑨">preskip</span>
    </ul>
   <li>
    <a data-link-type="biblio">[RFC6381]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-④⓪">codecs</span>
    </ul>
   <li>
    <a data-link-type="biblio">[RFC6716]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-④①">opus packet</span>
    </ul>
   <li>
    <a data-link-type="biblio">[RFC7845]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-④②">id header</span>
     <li><span class="dfn-paneled" id="term-for-④③">output gain</span>
    </ul>
   <li>
    <a data-link-type="biblio">[RFC8486]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-④④">channel count</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-aac">[AAC]
   <dd><a href="https://www.iso.org/standard/43345.html"><cite>Information technology — Generic coding of moving pictures and associated audio information — Part 7: Advanced Audio Coding (AAC)</cite></a>. Standard. URL: <a href="https://www.iso.org/standard/43345.html">https://www.iso.org/standard/43345.html</a>
   <dt id="biblio-isobmff">[ISOBMFF]
   <dd><a href="http://standards.iso.org/ittf/PubliclyAvailableStandards/c068960_ISO_IEC_14496-12_2015.zip"><cite>Information technology — Coding of audio-visual objects — Part 12: ISO Base Media File Format</cite></a>. December 2015. International Standard. URL: <a href="http://standards.iso.org/ittf/PubliclyAvailableStandards/c068960_ISO_IEC_14496-12_2015.zip">http://standards.iso.org/ittf/PubliclyAvailableStandards/c068960_ISO_IEC_14496-12_2015.zip</a>
   <dt id="biblio-itu1770-4">[ITU1770-4]
   <dd><a href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.1770-4-201510-I!!PDF-E.pdf"><cite>Algorithms to measure audio programme loudness and true-peak audio level</cite></a>. Standard. URL: <a href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.1770-4-201510-I!!PDF-E.pdf">https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.1770-4-201510-I!!PDF-E.pdf</a>
   <dt id="biblio-itu2051-3">[ITU2051-3]
   <dd><a href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf"><cite>Advance sound system for programme production</cite></a>. Standard. URL: <a href="https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf">https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.2051-3-202205-I!!PDF-E.pdf</a>
   <dt id="biblio-mp4">[MP4]
   <dd><a href="https://www.iso.org/standard/79110.html"><cite>Information technology — Coding of audio-visual objects — Part 14: MP4 file format</cite></a>. January 2020. Published. URL: <a href="https://www.iso.org/standard/79110.html">https://www.iso.org/standard/79110.html</a>
   <dt id="biblio-mp4-audio">[MP4-Audio]
   <dd><a href="https://www.iso.org/standard/76383.html"><cite>Information technology — Coding of audio-visual objects — Part 3: Audio</cite></a>. Standard. URL: <a href="https://www.iso.org/standard/76383.html">https://www.iso.org/standard/76383.html</a>
   <dt id="biblio-mp4-systems">[MP4-Systems]
   <dd><a href="https://www.iso.org/standard/55688.html"><cite>Information technology — Coding of audio-visual objects — Part 1: Systems</cite></a>. Standard. URL: <a href="https://www.iso.org/standard/55688.html">https://www.iso.org/standard/55688.html</a>
   <dt id="biblio-opus-in-isobmff">[OPUS-IN-ISOBMFF]
   <dd><a href="https://opus-codec.org/docs/opus_in_isobmff.html"><cite>Encapsulation of Opus in ISO Base Media File Format</cite></a>. Best Practice. URL: <a href="https://opus-codec.org/docs/opus_in_isobmff.html">https://opus-codec.org/docs/opus_in_isobmff.html</a>
   <dt id="biblio-q-format">[Q-Format]
   <dd><a href="https://en.wikipedia.org/wiki/Q_(number_format)"><cite>Q (number format)</cite></a>. Best Practice. URL: <a href="https://en.wikipedia.org/wiki/Q_(number_format)">https://en.wikipedia.org/wiki/Q_(number_format)</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-rfc6381">[RFC6381]
   <dd>R. Gellens; D. Singer; P. Frojdh. <a href="https://www.rfc-editor.org/rfc/rfc6381"><cite>The 'Codecs' and 'Profiles' Parameters for "Bucket" Media Types</cite></a>. August 2011. Proposed Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc6381">https://www.rfc-editor.org/rfc/rfc6381</a>
   <dt id="biblio-rfc6716">[RFC6716]
   <dd>JM. Valin; K. Vos; T. Terriberry. <a href="https://www.rfc-editor.org/rfc/rfc6716"><cite>Definition of the Opus Audio Codec</cite></a>. September 2012. Proposed Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc6716">https://www.rfc-editor.org/rfc/rfc6716</a>
   <dt id="biblio-rfc7845">[RFC7845]
   <dd>T. Terriberry; R. Lee; R. Giles. <a href="https://www.rfc-editor.org/rfc/rfc7845"><cite>Ogg Encapsulation for the Opus Audio Codec</cite></a>. April 2016. Proposed Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc7845">https://www.rfc-editor.org/rfc/rfc7845</a>
   <dt id="biblio-rfc8486">[RFC8486]
   <dd>J. Skoglund; M. Graczyk. <a href="https://www.rfc-editor.org/rfc/rfc8486"><cite>Ambisonics in an Ogg Opus Container</cite></a>. October 2018. Proposed Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc8486">https://www.rfc-editor.org/rfc/rfc8486</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-ai-cad-mixing">[AI-CAD-Mixing]
   <dd><a href="https://www.aes.org/e-lib/browse.cfm?elib=21489"><cite>AI 3D immersive audio codec based on content-adaptive dynamic down-mixing and up-mixing framework</cite></a>. Paper. URL: <a href="https://www.aes.org/e-lib/browse.cfm?elib=21489">https://www.aes.org/e-lib/browse.cfm?elib=21489</a>
  </dl>
  <aside class="dfn-panel" data-for="ia-bitstream">
   <b><a href="#ia-bitstream">#ia-bitstream</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ia-bitstream">2. Immersive Audio Bitstream Definition</a>
    <li><a href="#ref-for-ia-bitstream①">5.2. IA Encoder</a> <a href="#ref-for-ia-bitstream②">(2)</a>
    <li><a href="#ref-for-ia-bitstream③">5.2.2. IA Encoder for Channel Audio format</a>
    <li><a href="#ref-for-ia-bitstream④">6. IA Decoding Process</a>
    <li><a href="#ref-for-ia-bitstream⑤">6.1. IA Decoder</a>
    <li><a href="#ref-for-ia-bitstream⑥">6.1.1. IA Decoder for Ambisonics decoding</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="iac">
   <b><a href="#iac">#iac</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-iac">2. Immersive Audio Bitstream Definition</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="non-timed-metadata">
   <b><a href="#non-timed-metadata">#non-timed-metadata</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-non-timed-metadata">2. Immersive Audio Bitstream Definition</a>
    <li><a href="#ref-for-non-timed-metadata①">2.1. Codec Specific</a>
    <li><a href="#ref-for-non-timed-metadata②">5.2. IA Encoder</a>
    <li><a href="#ref-for-non-timed-metadata③">5.2.2. IA Encoder for Channel Audio format</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="codec_specific_info">
   <b><a href="#codec_specific_info">#codec_specific_info</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-codec_specific_info">2.1. Codec Specific</a>
    <li><a href="#ref-for-codec_specific_info①">2.1.1. IAC-OPUS Specific</a>
    <li><a href="#ref-for-codec_specific_info②">2.2.6. Codec Specific Info OBU Syntax and Semantics</a> <a href="#ref-for-codec_specific_info③">(2)</a>
    <li><a href="#ref-for-codec_specific_info④">5.2. IA Encoder</a>
    <li><a href="#ref-for-codec_specific_info⑤">5.2.2. IA Encoder for Channel Audio format</a>
    <li><a href="#ref-for-codec_specific_info⑥">6.1.2.3. Recon Gain</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="ia_static_meta">
   <b><a href="#ia_static_meta">#ia_static_meta</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ia_static_meta">2.1. Codec Specific</a>
    <li><a href="#ref-for-ia_static_meta①">3.7. Codecs Parameter String</a>
    <li><a href="#ref-for-ia_static_meta②">5.2. IA Encoder</a> <a href="#ref-for-ia_static_meta③">(2)</a>
    <li><a href="#ref-for-ia_static_meta④">5.2.2. IA Encoder for Channel Audio format</a> <a href="#ref-for-ia_static_meta⑤">(2)</a> <a href="#ref-for-ia_static_meta⑥">(3)</a>
    <li><a href="#ref-for-ia_static_meta⑦">5.2.3. IA Encoder for Ambisonics and Channel Audio format</a>
    <li><a href="#ref-for-ia_static_meta⑧">6.1. IA Decoder</a> <a href="#ref-for-ia_static_meta⑨">(2)</a>
    <li><a href="#ref-for-ia_static_meta①⓪">6.1.1. IA Decoder for Ambisonics decoding</a>
    <li><a href="#ref-for-ia_static_meta①①">6.1.2. IA Decoder for Channel Audio decoding</a>
    <li><a href="#ref-for-ia_static_meta①②">6.1.2.1. Gain</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="ia-frame">
   <b><a href="#ia-frame">#ia-frame</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ia-frame">2. Immersive Audio Bitstream Definition</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="timed-metadata">
   <b><a href="#timed-metadata">#timed-metadata</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-timed-metadata">2.1. Codec Specific</a>
    <li><a href="#ref-for-timed-metadata①">5.2. IA Encoder</a> <a href="#ref-for-timed-metadata②">(2)</a>
    <li><a href="#ref-for-timed-metadata③">5.2.2. IA Encoder for Channel Audio format</a> <a href="#ref-for-timed-metadata④">(2)</a> <a href="#ref-for-timed-metadata⑤">(3)</a>
    <li><a href="#ref-for-timed-metadata⑥">5.2.3. IA Encoder for Ambisonics and Channel Audio format</a> <a href="#ref-for-timed-metadata⑦">(2)</a>
    <li><a href="#ref-for-timed-metadata⑧">6.1. IA Decoder</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="ia_coded_data">
   <b><a href="#ia_coded_data">#ia_coded_data</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ia_coded_data">2. Immersive Audio Bitstream Definition</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="channelgroup">
   <b><a href="#channelgroup">#channelgroup</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-channelgroup">5.2. IA Encoder</a>
    <li><a href="#ref-for-channelgroup①">5.2.2. IA Encoder for Channel Audio format</a>
    <li><a href="#ref-for-channelgroup②">5.2.3. IA Encoder for Ambisonics and Channel Audio format</a>
    <li><a href="#ref-for-channelgroup③">6.1.2. IA Decoder for Channel Audio decoding</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="substream">
   <b><a href="#substream">#substream</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-substream">2.1.1. IAC-OPUS Specific</a>
    <li><a href="#ref-for-substream①">2.1.2. IAC-AAC-LC Specific</a>
    <li><a href="#ref-for-substream②">5.2. IA Encoder</a> <a href="#ref-for-substream③">(2)</a>
    <li><a href="#ref-for-substream④">5.2.1. IA Encoder for Ambisonics format</a>
    <li><a href="#ref-for-substream⑤">5.2.2. IA Encoder for Channel Audio format</a> <a href="#ref-for-substream⑥">(2)</a>
    <li><a href="#ref-for-substream⑦">5.2.3. IA Encoder for Ambisonics and Channel Audio format</a>
    <li><a href="#ref-for-substream⑧">6.1. IA Decoder</a>
    <li><a href="#ref-for-substream⑨">6.1.1. IA Decoder for Ambisonics decoding</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="temporal-unit">
   <b><a href="#temporal-unit">#temporal-unit</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-temporal-unit">2. Immersive Audio Bitstream Definition</a>
    <li><a href="#ref-for-temporal-unit①">2.1. Codec Specific</a>
    <li><a href="#ref-for-temporal-unit②">2.1.1. IAC-OPUS Specific</a>
    <li><a href="#ref-for-temporal-unit③">2.1.2. IAC-AAC-LC Specific</a>
    <li><a href="#ref-for-temporal-unit④">2.2.10. Temporal Delimitor OBU Syntax and Semantics</a>
    <li><a href="#ref-for-temporal-unit⑤">3.1. General Requirements &amp; Brands</a> <a href="#ref-for-temporal-unit⑥">(2)</a>
    <li><a href="#ref-for-temporal-unit⑦">3.4. IA Sample Format</a> <a href="#ref-for-temporal-unit⑧">(2)</a>
    <li><a href="#ref-for-temporal-unit⑨">5.2. IA Encoder</a> <a href="#ref-for-temporal-unit①⓪">(2)</a>
    <li><a href="#ref-for-temporal-unit①①">5.2.1. IA Encoder for Ambisonics format</a>
    <li><a href="#ref-for-temporal-unit①②">5.2.2. IA Encoder for Channel Audio format</a> <a href="#ref-for-temporal-unit①③">(2)</a>
    <li><a href="#ref-for-temporal-unit①④">5.2.3. IA Encoder for Ambisonics and Channel Audio format</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="obu">
   <b><a href="#obu">#obu</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-obu">2. Immersive Audio Bitstream Definition</a>
    <li><a href="#ref-for-obu①">3.4. IA Sample Format</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="codec_id">
   <b><a href="#codec_id">#codec_id</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-codec_id">2.1. Codec Specific</a>
    <li><a href="#ref-for-codec_id①">2.1.2. IAC-AAC-LC Specific</a>
    <li><a href="#ref-for-codec_id②">4. IAC Decapsulation Process</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="decoder_config">
   <b><a href="#decoder_config">#decoder_config</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-decoder_config">2.1. Codec Specific</a>
    <li><a href="#ref-for-decoder_config①">2.1.2. IAC-AAC-LC Specific</a>
    <li><a href="#ref-for-decoder_config②">4. IAC Decapsulation Process</a>
    <li><a href="#ref-for-decoder_config③">5.2.2. IA Encoder for Channel Audio format</a>
    <li><a href="#ref-for-decoder_config④">6.1. IA Decoder</a>
    <li><a href="#ref-for-decoder_config⑤">6.1.2. IA Decoder for Channel Audio decoding</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="version">
   <b><a href="#version">#version</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-version">3.7. Codecs Parameter String</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="ambisonics_mode">
   <b><a href="#ambisonics_mode">#ambisonics_mode</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ambisonics_mode">5.2.1. IA Encoder for Ambisonics format</a> <a href="#ref-for-ambisonics_mode①">(2)</a> <a href="#ref-for-ambisonics_mode②">(3)</a> <a href="#ref-for-ambisonics_mode③">(4)</a> <a href="#ref-for-ambisonics_mode④">(5)</a>
    <li><a href="#ref-for-ambisonics_mode⑤">5.2.2. IA Encoder for Channel Audio format</a>
    <li><a href="#ref-for-ambisonics_mode⑥">5.2.3. IA Encoder for Ambisonics and Channel Audio format</a>
    <li><a href="#ref-for-ambisonics_mode⑦">6.1. IA Decoder</a>
    <li><a href="#ref-for-ambisonics_mode⑧">6.1.1. IA Decoder for Ambisonics decoding</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="channel_audio_layer">
   <b><a href="#channel_audio_layer">#channel_audio_layer</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-channel_audio_layer">3.7. Codecs Parameter String</a>
    <li><a href="#ref-for-channel_audio_layer①">5.2.1. IA Encoder for Ambisonics format</a>
    <li><a href="#ref-for-channel_audio_layer②">5.2.2. IA Encoder for Channel Audio format</a> <a href="#ref-for-channel_audio_layer③">(2)</a> <a href="#ref-for-channel_audio_layer④">(3)</a>
    <li><a href="#ref-for-channel_audio_layer⑤">5.2.3. IA Encoder for Ambisonics and Channel Audio format</a>
    <li><a href="#ref-for-channel_audio_layer⑥">6.1. IA Decoder</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="ambix_layer_config">
   <b><a href="#ambix_layer_config">#ambix_layer_config</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ambix_layer_config">5.2.2. IA Encoder for Channel Audio format</a>
    <li><a href="#ref-for-ambix_layer_config①">5.2.3. IA Encoder for Ambisonics and Channel Audio format</a>
    <li><a href="#ref-for-ambix_layer_config②">6.1.1. IA Decoder for Ambisonics decoding</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="output_channel_count">
   <b><a href="#output_channel_count">#output_channel_count</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-output_channel_count">3.2.4. Semantics</a>
    <li><a href="#ref-for-output_channel_count①">5.2.1. IA Encoder for Ambisonics format</a>
    <li><a href="#ref-for-output_channel_count②">6.1.1. IA Decoder for Ambisonics decoding</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="substream_count">
   <b><a href="#substream_count">#substream_count</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-substream_count">2.2.13. Substream OBU Syntax and Semantics</a>
    <li><a href="#ref-for-substream_count①">5.2.1. IA Encoder for Ambisonics format</a>
    <li><a href="#ref-for-substream_count②">5.2.2. IA Encoder for Channel Audio format</a>
    <li><a href="#ref-for-substream_count③">6.1.1. IA Decoder for Ambisonics decoding</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="coupled_substream_count">
   <b><a href="#coupled_substream_count">#coupled_substream_count</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-coupled_substream_count">5.2.1. IA Encoder for Ambisonics format</a>
    <li><a href="#ref-for-coupled_substream_count①">5.2.2. IA Encoder for Channel Audio format</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="coupled-substream">
   <b><a href="#coupled-substream">#coupled-substream</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-coupled-substream">5.2. IA Encoder</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="channel_mapping">
   <b><a href="#channel_mapping">#channel_mapping</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-channel_mapping">5.2.1. IA Encoder for Ambisonics format</a> <a href="#ref-for-channel_mapping①">(2)</a>
    <li><a href="#ref-for-channel_mapping②">6.1. IA Decoder</a>
    <li><a href="#ref-for-channel_mapping③">6.1.1. IA Decoder for Ambisonics decoding</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="demixing_matrix">
   <b><a href="#demixing_matrix">#demixing_matrix</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-demixing_matrix">5.2.1. IA Encoder for Ambisonics format</a> <a href="#ref-for-demixing_matrix①">(2)</a>
    <li><a href="#ref-for-demixing_matrix②">6.1. IA Decoder</a>
    <li><a href="#ref-for-demixing_matrix③">6.1.1. IA Decoder for Ambisonics decoding</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="channel_audio_layer_config">
   <b><a href="#channel_audio_layer_config">#channel_audio_layer_config</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-channel_audio_layer_config">5.2.2. IA Encoder for Channel Audio format</a>
    <li><a href="#ref-for-channel_audio_layer_config①">5.2.3. IA Encoder for Ambisonics and Channel Audio format</a>
    <li><a href="#ref-for-channel_audio_layer_config②">6.1.2.4. Loudness Normalization</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="loudspeaker_layout">
   <b><a href="#loudspeaker_layout">#loudspeaker_layout</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-loudspeaker_layout">2.2.9. Channel Audio Layer Config Syntax and Semantics</a>
    <li><a href="#ref-for-loudspeaker_layout①">5.1. Input Audio Format</a>
    <li><a href="#ref-for-loudspeaker_layout②">5.2. IA Encoder</a>
    <li><a href="#ref-for-loudspeaker_layout③">5.2.2. IA Encoder for Channel Audio format</a>
    <li><a href="#ref-for-loudspeaker_layout④">5.2.2.3. Channel Layout Generation Rule</a>
    <li><a href="#ref-for-loudspeaker_layout⑤">6.1.2. IA Decoder for Channel Audio decoding</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="714ch">
   <b><a href="#714ch">#714ch</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-714ch">2.2.9. Channel Audio Layer Config Syntax and Semantics</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="output_gain_is_present_flag">
   <b><a href="#output_gain_is_present_flag">#output_gain_is_present_flag</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-output_gain_is_present_flag">5.2.2. IA Encoder for Channel Audio format</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="recon_gain_is_present_flag">
   <b><a href="#recon_gain_is_present_flag">#recon_gain_is_present_flag</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-recon_gain_is_present_flag">5.2.2. IA Encoder for Channel Audio format</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="loudness">
   <b><a href="#loudness">#loudness</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-loudness">5.2.2. IA Encoder for Channel Audio format</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="output_gain_flags">
   <b><a href="#output_gain_flags">#output_gain_flags</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-output_gain_flags">5.2.2. IA Encoder for Channel Audio format</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="output_gain">
   <b><a href="#output_gain">#output_gain</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-output_gain">5.2.2. IA Encoder for Channel Audio format</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="demixing_info">
   <b><a href="#demixing_info">#demixing_info</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-demixing_info">5.2.2. IA Encoder for Channel Audio format</a> <a href="#ref-for-demixing_info①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dmixp_mode">
   <b><a href="#dmixp_mode">#dmixp_mode</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dmixp_mode">5.2.2. IA Encoder for Channel Audio format</a>
    <li><a href="#ref-for-dmixp_mode①">5.2.2.1. Down-mix parameter and Loudness</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="recon_gain_info">
   <b><a href="#recon_gain_info">#recon_gain_info</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-recon_gain_info">5.2.2. IA Encoder for Channel Audio format</a> <a href="#ref-for-recon_gain_info①">(2)</a>
    <li><a href="#ref-for-recon_gain_info②">6.1.2.3. Recon Gain</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="recon_gain_flags">
   <b><a href="#recon_gain_flags">#recon_gain_flags</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-recon_gain_flags">5.2.2. IA Encoder for Channel Audio format</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="recon_gain">
   <b><a href="#recon_gain">#recon_gain</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-recon_gain">5.2.2. IA Encoder for Channel Audio format</a> <a href="#ref-for-recon_gain①">(2)</a>
    <li><a href="#ref-for-recon_gain②">5.2.2.1. Down-mix parameter and Loudness</a>
    <li><a href="#ref-for-recon_gain③">5.2.2.4. Recon Gain Generation</a>
    <li><a href="#ref-for-recon_gain④">6.1.2.3. Recon Gain</a> <a href="#ref-for-recon_gain⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="iasampleentry">
   <b><a href="#iasampleentry">#iasampleentry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-iasampleentry">3.1. General Requirements &amp; Brands</a>
    <li><a href="#ref-for-iasampleentry①">3.4. IA Sample Format</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="codec-specific-box">
   <b><a href="#codec-specific-box">#codec-specific-box</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-codec-specific-box">3.2.2. Description</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dops">
   <b><a href="#dops">#dops</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dops">4. IAC Decapsulation Process</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="esds">
   <b><a href="#esds">#esds</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-esds">4. IAC Decapsulation Process</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="ia-sample">
   <b><a href="#ia-sample">#ia-sample</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ia-sample">3.2.2. Description</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="admi">
   <b><a href="#admi">#admi</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-admi">3.1. General Requirements &amp; Brands</a>
    <li><a href="#ref-for-admi①">4. IAC Decapsulation Process</a> <a href="#ref-for-admi②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="iasm">
   <b><a href="#iasm">#iasm</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-iasm">3.1. General Requirements &amp; Brands</a>
    <li><a href="#ref-for-iasm①">4. IAC Decapsulation Process</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="cc">
   <b><a href="#cc">#cc</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-cc">3.7. Codecs Parameter String</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="coupled-channels">
   <b><a href="#coupled-channels">#coupled-channels</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-coupled-channels">2.2.8. Ambisonics Layer Config Syntax and Semantics</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="non-coupled-substream">
   <b><a href="#non-coupled-substream">#non-coupled-substream</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-non-coupled-substream">5.2. IA Encoder</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="down-mixed-audio">
   <b><a href="#down-mixed-audio">#down-mixed-audio</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-down-mixed-audio">6.1.2.2. De-mixer</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="s1to2-de-mixer">
   <b><a href="#s1to2-de-mixer">#s1to2-de-mixer</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-s1to2-de-mixer">6.1.2.2. De-mixer</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="s2to3-de-mixer">
   <b><a href="#s2to3-de-mixer">#s2to3-de-mixer</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-s2to3-de-mixer">6.1.2.2. De-mixer</a> <a href="#ref-for-s2to3-de-mixer①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="s3to5-de-mixer">
   <b><a href="#s3to5-de-mixer">#s3to5-de-mixer</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-s3to5-de-mixer">6.1.2.2. De-mixer</a> <a href="#ref-for-s3to5-de-mixer①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="s5to7-de-mixer">
   <b><a href="#s5to7-de-mixer">#s5to7-de-mixer</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-s5to7-de-mixer">6.1.2.2. De-mixer</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="tf2tot2-de-mixer">
   <b><a href="#tf2tot2-de-mixer">#tf2tot2-de-mixer</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-tf2tot2-de-mixer">6.1.2.2. De-mixer</a> <a href="#ref-for-tf2tot2-de-mixer①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="t2to4-de-mixer">
   <b><a href="#t2to4-de-mixer">#t2to4-de-mixer</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-t2to4-de-mixer">6.1.2.2. De-mixer</a> <a href="#ref-for-t2to4-de-mixer①">(2)</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>